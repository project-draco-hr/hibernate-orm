{
  this.session=session;
  ArrayList tmpSpaces=new ArrayList();
  for (int i=0; i < affectedQueryables.length; i++) {
    if (affectedQueryables[i].hasCache()) {
      affectedEntityNames.add(affectedQueryables[i].getEntityName());
    }
    Set roles=session.getFactory().getCollectionRolesByEntityParticipant(affectedQueryables[i].getEntityName());
    if (roles != null) {
      affectedCollectionRoles.addAll(roles);
    }
    for (int y=0; y < affectedQueryables[i].getQuerySpaces().length; y++) {
      tmpSpaces.add(affectedQueryables[i].getQuerySpaces()[y]);
    }
  }
  this.spaces=new Serializable[tmpSpaces.size()];
  for (int i=0; i < tmpSpaces.size(); i++) {
    this.spaces[i]=(Serializable)tmpSpaces.get(i);
  }
}
