{
  List deletes=new ArrayList();
  Iterator iter=((Map)getSnapshot()).entrySet().iterator();
  while (iter.hasNext()) {
    Map.Entry e=(Map.Entry)iter.next();
    Object key=e.getKey();
    if (e.getValue() != null && map.get(key) == null) {
      deletes.add(indexIsFormula ? e.getValue() : key);
    }
  }
  return deletes.iterator();
}
