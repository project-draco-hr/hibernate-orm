{
  final PropertyPath subPath=currentPropertyPath.append(attributeDefinition.getName());
  log.debug("Visiting attribute path : " + subPath.getFullPath());
  if (attributeDefinition.getType().isAssociationType()) {
    final AssociationKey associationKey=((AssociationAttributeDefinition)attributeDefinition).getAssociationKey();
    if (isDuplicateAssociationKey(associationKey)) {
      log.debug("Property path deemed to be circular : " + subPath.getFullPath());
      strategy.foundCircularAssociationKey(associationKey,attributeDefinition);
      return;
    }
  }
  final boolean continueWalk=strategy.startingAttribute(attributeDefinition);
  if (continueWalk) {
    final PropertyPath old=currentPropertyPath;
    currentPropertyPath=subPath;
    try {
      final Type attributeType=attributeDefinition.getType();
      if (attributeType.isAssociationType()) {
        visitAssociation((AssociationAttributeDefinition)attributeDefinition);
      }
 else       if (attributeType.isComponentType()) {
        visitCompositeDefinition((CompositionDefinition)attributeDefinition);
      }
    }
  finally {
      currentPropertyPath=old;
    }
  }
  strategy.finishingAttribute(attributeDefinition);
}
