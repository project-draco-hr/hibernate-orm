{
  final HqlParser parser=HqlParser.getInstance(hql);
  parser.setFilter(filter);
  LOG.debugf("parse() - HQL: %s",hql);
  parser.statement();
  final AST hqlAst=parser.getAST();
  final NodeTraverser walker=new NodeTraverser(new JavaConstantConverter(factory));
  walker.traverseDepthFirst(hqlAst);
  showHqlAst(hqlAst);
  parser.getParseErrorHandler().throwQueryException();
  return parser;
}
