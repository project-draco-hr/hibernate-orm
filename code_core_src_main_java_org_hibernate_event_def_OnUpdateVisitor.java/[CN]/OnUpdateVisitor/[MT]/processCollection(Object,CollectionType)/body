{
  if (collection == CollectionType.UNFETCHED_COLLECTION) {
    return null;
  }
  EventSource session=getSession();
  CollectionPersister persister=session.getFactory().getCollectionPersister(type.getRole());
  final Serializable collectionKey=extractCollectionKeyFromOwner(persister);
  if (collection != null && (collection instanceof PersistentCollection)) {
    PersistentCollection wrapper=(PersistentCollection)collection;
    if (wrapper.setCurrentSession(session)) {
      if (!isOwnerUnchanged(wrapper,persister,collectionKey)) {
        removeCollection(persister,collectionKey,session);
      }
      reattachCollection(wrapper,type);
    }
 else {
      removeCollection(persister,collectionKey,session);
    }
  }
 else {
    removeCollection(persister,collectionKey,session);
  }
  return null;
}
