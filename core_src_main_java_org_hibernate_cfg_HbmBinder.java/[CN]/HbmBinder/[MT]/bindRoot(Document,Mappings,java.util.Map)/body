{
  java.util.List names=HbmBinder.getExtendsNeeded(doc,mappings);
  if (!names.isEmpty()) {
    Element hmNode=doc.getRootElement();
    Attribute packNode=hmNode.attribute("package");
    String packageName=null;
    if (packNode != null) {
      packageName=packNode.getValue();
    }
    Iterator itr=names.iterator();
    while (itr.hasNext()) {
      String extendsName=(String)itr.next();
      mappings.addToExtendsQueue(new ExtendsQueueEntry(extendsName,packageName,doc));
    }
    return;
  }
  Element hmNode=doc.getRootElement();
  inheritedMetas=getMetas(hmNode,inheritedMetas,true);
  extractRootAttributes(hmNode,mappings);
  Iterator rootChildren=hmNode.elementIterator();
  while (rootChildren.hasNext()) {
    final Element element=(Element)rootChildren.next();
    final String elementName=element.getName();
    if ("filter-def".equals(elementName)) {
      parseFilterDef(element,mappings);
    }
 else     if ("fetch-profile".equals(elementName)) {
      parseFetchProfile(element,mappings,null);
    }
 else     if ("typedef".equals(elementName)) {
      bindTypeDef(element,mappings);
    }
 else     if ("class".equals(elementName)) {
      RootClass rootclass=new RootClass();
      bindRootClass(element,rootclass,mappings,inheritedMetas);
      mappings.addClass(rootclass);
    }
 else     if ("subclass".equals(elementName)) {
      PersistentClass superModel=getSuperclass(mappings,element);
      handleSubclass(superModel,mappings,element,inheritedMetas);
    }
 else     if ("joined-subclass".equals(elementName)) {
      PersistentClass superModel=getSuperclass(mappings,element);
      handleJoinedSubclass(superModel,mappings,element,inheritedMetas);
    }
 else     if ("union-subclass".equals(elementName)) {
      PersistentClass superModel=getSuperclass(mappings,element);
      handleUnionSubclass(superModel,mappings,element,inheritedMetas);
    }
 else     if ("query".equals(elementName)) {
      bindNamedQuery(element,null,mappings);
    }
 else     if ("sql-query".equals(elementName)) {
      bindNamedSQLQuery(element,null,mappings);
    }
 else     if ("resultset".equals(elementName)) {
      bindResultSetMappingDefinition(element,null,mappings);
    }
 else     if ("import".equals(elementName)) {
      bindImport(element,mappings);
    }
 else     if ("database-object".equals(elementName)) {
      bindAuxiliaryDatabaseObject(element,mappings);
    }
  }
}
