{
  SessionImplementor session=getLoadContext().getPersistenceContext().getSession();
  if (!loadContexts.hasLoadingCollectionEntries() && localLoadingCollectionKeys.isEmpty()) {
    return;
  }
  List matches=null;
  Iterator iter=localLoadingCollectionKeys.iterator();
  while (iter.hasNext()) {
    final CollectionKey collectionKey=(CollectionKey)iter.next();
    final LoadingCollectionEntry lce=loadContexts.locateLoadingCollectionEntry(collectionKey);
    if (lce == null)     LOG.loadingCollectionKeyNotFound(collectionKey);
 else     if (lce.getResultSet() == resultSet && lce.getPersister() == persister) {
      if (matches == null) {
        matches=new ArrayList();
      }
      matches.add(lce);
      if (lce.getCollection().getOwner() == null) {
        session.getPersistenceContext().addUnownedCollection(new CollectionKey(persister,lce.getKey(),persister.getOwnerEntityPersister().getEntityMetamodel().getEntityMode()),lce.getCollection());
      }
      LOG.trace("Removing collection load entry [" + lce + "]");
      loadContexts.unregisterLoadingCollectionXRef(collectionKey);
      iter.remove();
    }
  }
  endLoadingCollections(persister,matches);
  if (localLoadingCollectionKeys.isEmpty()) {
    loadContexts.cleanup(resultSet);
  }
}
