{
  Session s=openSession();
  Transaction txn=s.beginTransaction();
  try {
    s.createQuery("from Human h inner join h.friends as f with f.bodyWeight < :someLimit").setDouble("someLimit",1).list();
    fail("failure expected");
  }
 catch (  InvalidWithClauseException expected) {
  }
  try {
    s.createQuery("from Animal a inner join a.offspring o inner join o.mother as m inner join m.father as f with o.bodyWeight > 1").list();
    fail("failure expected");
  }
 catch (  InvalidWithClauseException expected) {
  }
  try {
    s.createQuery("from Human h inner join h.offspring o with o.mother.father = :cousin").setEntity("cousin",s.load(Human.class,new Long(123))).list();
    fail("failure expected");
  }
 catch (  InvalidWithClauseException expected) {
  }
  txn.commit();
  s.close();
}
