{
  int errorCode=sqlException.getErrorCode();
  SQLException nested=sqlException.getNextException();
  while (errorCode == 0 && nested != null) {
    errorCode=nested.getErrorCode();
    nested=nested.getNextException();
  }
  return errorCode;
}
