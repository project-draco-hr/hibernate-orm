{
  Point[] points=new Point[coordinates.length];
  for (int i=0; i < coordinates.length; i++) {
    Coordinate c=coordinates[i];
    Point pt;
    if (Double.isNaN(c.z)) {
      pt=new Point(c.x,c.y);
    }
 else {
      pt=new Point(c.x,c.y,c.z);
    }
    if (c instanceof MCoordinate) {
      MCoordinate mc=(MCoordinate)c;
      if (!Double.isNaN(mc.m)) {
        pt.setM(mc.m);
      }
    }
    points[i]=pt;
  }
  return points;
}
