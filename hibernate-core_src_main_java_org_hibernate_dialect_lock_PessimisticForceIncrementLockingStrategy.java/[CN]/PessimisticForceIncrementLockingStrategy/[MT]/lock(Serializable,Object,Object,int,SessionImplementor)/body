{
  if (!lockable.isVersioned()) {
    throw new HibernateException("[" + lockMode + "] not supported for non-versioned entities ["+ lockable.getEntityName()+ "]");
  }
  EntityEntry entry=session.getPersistenceContext().getEntry(object);
  final EntityPersister persister=entry.getPersister();
  Object nextVersion=persister.forceVersionIncrement(entry.getId(),entry.getVersion(),session);
  entry.forceLocked(object,nextVersion);
}
