{
  if (!IdentityGenerator.class.isAssignableFrom(getDialect().getNativeIdentifierGeneratorClass())) {
    reportSkip("FailureExpected test passes when native id generator is not IdentityGenerator","parent insert is assigned (delayed) when child is identity (early insert)");
    fail("test is expected to fail");
    return;
  }
  Session session=openSession();
  Transaction txn=session.beginTransaction();
  Parent parent=new Parent();
  Child child=new Child();
  child.setParent(parent);
  parent.setChildren(Collections.singleton(child));
  parent.setId(new Long(123L));
  session.save(child);
  txn.commit();
  session.close();
  session=openSession();
  txn=session.beginTransaction();
  parent=(Parent)session.get(Parent.class,parent.getId());
  assertEquals(1,parent.getChildren().size());
  txn.commit();
  session.close();
}
