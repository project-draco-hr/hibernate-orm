{
  Configuration cfg=new Configuration();
  cfg.setProperties(user.getProperties());
  cfg.setProperty(Environment.HBM2DDL_AUTO,"create-drop");
  Class<?>[] resources=getAnnotatedClasses();
  for (  Class<?> resource : resources) {
    cfg.addAnnotatedClass(resource);
  }
  serviceRegistry=ServiceRegistryBuilder.buildServiceRegistry(cfg.getProperties());
  factory=cfg.buildSessionFactory(serviceRegistry);
}
