{
  Map settings=getConfig();
  addMappings(settings);
  if (createSchema()) {
    settings.put(org.hibernate.cfg.AvailableSettings.HBM2DDL_AUTO,"create-drop");
  }
  if (StringHelper.isNotEmpty(getAuditStrategy())) {
    settings.put("org.hibernate.envers.audit_strategy",getAuditStrategy());
  }
  if (!isAudit()) {
    settings.put(EnversIntegrator.AUTO_REGISTER,"false");
  }
  settings.put("org.hibernate.envers.use_revision_entity_with_native_id","false");
  settings.put(org.hibernate.cfg.AvailableSettings.USE_NEW_ID_GENERATOR_MAPPINGS,"true");
  settings.put(org.hibernate.cfg.AvailableSettings.DIALECT,getDialect().getClass().getName());
  return settings;
}
