{
  T result=null;
  try {
    transactionManager.begin();
    try {
      result=doTheWork(work);
      transactionManager.commit();
    }
 catch (    Exception e) {
      try {
        transactionManager.rollback();
      }
 catch (      Exception ignore) {
        LOG.unableToRollbackIsolatedTransaction(e,ignore);
      }
      throw new HibernateException("Could not apply work",e);
    }
  }
 catch (  SystemException e) {
    throw new HibernateException("Unable to start isolated transaction",e);
  }
catch (  NotSupportedException e) {
    throw new HibernateException("Unable to start isolated transaction",e);
  }
  return result;
}
