{
  if (index < 0) {
    throw new ArrayIndexOutOfBoundsException("negative index");
  }
  Object old=isPutQueueEnabled() ? readElementByIndex(new Integer(index)) : UNKNOWN;
  if (old == UNKNOWN) {
    write();
    return list.set(index,value);
  }
 else {
    queueOperation(new Set(index,value,old));
    return old;
  }
}
