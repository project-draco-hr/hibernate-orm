{
  final String manyToManyTableAlias;
  final String tableAlias;
  if (persister.isManyToMany()) {
    manyToManyTableAlias=createTableAlias(persister.getRole());
    tableAlias=createTableAlias(persister.getElementDefinition().toEntityDefinition().getEntityPersister());
  }
 else {
    manyToManyTableAlias=null;
    tableAlias=createTableAlias(persister.getRole());
  }
  final CollectionReferenceAliasesImpl aliases=new CollectionReferenceAliasesImpl(tableAlias,manyToManyTableAlias,createCollectionAliases(persister),createCollectionElementAliases(persister));
  registerQuerySpaceAliases(uid,aliases);
  return aliases;
}
