{
  if (isUsingIdentity()) {
    SkipLog.reportSkip("hand sql expecting non-identity id gen","Custom SQL");
    return;
  }
  Person p=new Person();
  p.setName("Max");
  p.setLastName("Andersen");
  p.setNationalID("110974XYZ???");
  p.setAddress("P. P. Street 8");
  Session s=openSession();
  s.save(p);
  s.flush();
  s.connection().commit();
  s.close();
  getSessions().evict(Person.class);
  s=openSession();
  Person p2=(Person)s.get(Person.class,p.getId());
  assertNotSame(p,p2);
  assertEquals(p2.getId(),p.getId());
  assertEquals(p2.getLastName(),p.getLastName());
  s.flush();
  List list=s.createQuery("select p from Party as p").list();
  assertTrue(list.size() == 1);
  s.connection().commit();
  s.close();
  s=openSession();
  list=s.createQuery("select p from Person as p where p.address = 'L???rkev???nget 1'").list();
  assertTrue(list.size() == 0);
  p.setAddress("L???rkev???nget 1");
  s.update(p);
  list=s.createQuery("select p from Person as p where p.address = 'L???rkev???nget 1'").list();
  assertTrue(list.size() == 1);
  list=s.createQuery("select p from Party as p where p.address = 'P. P. Street 8'").list();
  assertTrue(list.size() == 0);
  s.delete(p);
  list=s.createQuery("select p from Person as p").list();
  assertTrue(list.size() == 0);
  s.connection().commit();
  s.close();
}
