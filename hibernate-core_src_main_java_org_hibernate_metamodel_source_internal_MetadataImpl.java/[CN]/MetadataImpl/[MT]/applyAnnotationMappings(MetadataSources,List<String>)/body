{
  Indexer indexer=new Indexer();
  for (  Class<?> clazz : metadataSources.getAnnotatedClasses()) {
    indexClass(indexer,clazz.getName().replace('.','/') + ".class");
  }
  for (  String packageName : metadataSources.getAnnotatedPackages()) {
    indexClass(indexer,packageName.replace('.','/') + "/package-info.class");
  }
  Index index=indexer.complete();
  final OrmXmlParser ormParser=new OrmXmlParser(this);
  List<JaxbRoot<XMLEntityMappings>> mappings=new ArrayList<JaxbRoot<XMLEntityMappings>>();
  for (  JaxbRoot<?> root : metadataSources.getJaxbRootList()) {
    if (root.getRoot() instanceof XMLEntityMappings) {
      mappings.add((JaxbRoot<XMLEntityMappings>)root);
    }
  }
  index=ormParser.parseAndUpdateIndex(mappings,index);
  final AnnotationBinder annotationBinder=new AnnotationBinder(this);
  annotationBinder.bind(index);
}
