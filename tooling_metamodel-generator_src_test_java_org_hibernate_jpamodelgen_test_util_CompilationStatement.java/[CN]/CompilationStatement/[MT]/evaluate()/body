{
  try {
    if (!preCompileEntities.isEmpty()) {
      compile(getCompilationUnits(preCompileEntities));
    }
    compile(getCompilationUnits(testEntities));
    if (!ignoreCompilationErrors) {
      TestUtil.assertNoCompilationError(compilationDiagnostics);
    }
  }
 catch (  Exception e) {
    StringWriter errors=new StringWriter();
    e.printStackTrace(new PrintWriter(errors));
    log.debug(errors.toString());
    fail("Unable to process test sources.");
  }
  originalStatement.evaluate();
}
