{
  for (  Object o : classfile.getMethods()) {
    final MethodInfo methodInfo=(MethodInfo)o;
    final String methodName=methodInfo.getName();
    if (methodName.startsWith(EACH_READ_METHOD_PREFIX) || methodName.startsWith(EACH_WRITE_METHOD_PREFIX) || methodName.equals(GETFIELDHANDLER_METHOD_NAME)|| methodName.equals(SETFIELDHANDLER_METHOD_NAME)) {
      continue;
    }
    final CodeAttribute codeAttr=methodInfo.getCodeAttribute();
    if (codeAttr == null) {
      continue;
    }
    final CodeIterator iter=codeAttr.iterator();
    while (iter.hasNext()) {
      int pos=iter.next();
      pos=transformInvokevirtualsIntoGetfields(classfile,iter,pos);
      transformInvokevirtualsIntoPutfields(classfile,iter,pos);
    }
    final StackMapTable smt=MapMaker.make(classPool,methodInfo);
    codeAttr.setAttribute(smt);
  }
}
