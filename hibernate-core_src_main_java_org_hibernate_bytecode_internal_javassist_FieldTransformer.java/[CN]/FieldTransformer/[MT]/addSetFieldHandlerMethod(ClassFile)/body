{
  final ConstPool constPool=classfile.getConstPool();
  final int thisClassInfo=constPool.getThisClassInfo();
  final MethodInfo methodInfo=new MethodInfo(constPool,SETFIELDHANDLER_METHOD_NAME,SETFIELDHANDLER_METHOD_DESCRIPTOR);
  final Bytecode code=new Bytecode(constPool,3,3);
  code.addAload(0);
  code.addAload(1);
  code.addOpcode(Opcode.PUTFIELD);
  final int fieldIndex=constPool.addFieldrefInfo(thisClassInfo,HANDLER_FIELD_NAME,HANDLER_FIELD_DESCRIPTOR);
  code.addIndex(fieldIndex);
  code.addOpcode(Opcode.RETURN);
  methodInfo.setCodeAttribute(code.toCodeAttribute());
  methodInfo.setAccessFlags(AccessFlag.PUBLIC);
  final CodeAttribute codeAttribute=methodInfo.getCodeAttribute();
  if (codeAttribute != null) {
    final StackMapTable smt=MapMaker.make(classPool,methodInfo);
    codeAttribute.setAttribute(smt);
  }
  classfile.addMethod(methodInfo);
}
