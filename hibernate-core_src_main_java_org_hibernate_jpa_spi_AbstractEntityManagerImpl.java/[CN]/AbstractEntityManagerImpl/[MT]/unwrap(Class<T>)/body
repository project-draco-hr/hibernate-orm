{
  checkOpen();
  if (Session.class.isAssignableFrom(clazz)) {
    return (T)internalGetSession();
  }
  if (SessionImplementor.class.isAssignableFrom(clazz)) {
    return (T)internalGetSession();
  }
  if (EntityManager.class.isAssignableFrom(clazz)) {
    return (T)this;
  }
  throw new PersistenceException("Hibernate cannot unwrap " + clazz);
}
