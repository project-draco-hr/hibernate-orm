{
  ValueGeneration annotationValueGeneration=getValueGenerationFromAnnotations(property);
  ValueGeneration legacyValueGeneration=getLegacyValueGeneration(property);
  if (annotationValueGeneration == null && legacyValueGeneration == null) {
    return NoValueGeneration.INSTANCE;
  }
 else   if (annotationValueGeneration != null && legacyValueGeneration != null) {
    throw new AnnotationException("@Generated and a generator annotation must not be specified at the same time:" + StringHelper.qualify(holder.getPath(),name));
  }
  final GenerationTiming when=annotationValueGeneration != null ? annotationValueGeneration.getGenerationTiming() : legacyValueGeneration.getGenerationTiming();
  if (property.isAnnotationPresent(javax.persistence.Version.class) && when == GenerationTiming.INSERT) {
    throw new AnnotationException("@Generated(INSERT) on a @Version property not allowed, use ALWAYS (or NEVER): " + StringHelper.qualify(holder.getPath(),name));
  }
  if (legacyValueGeneration != null) {
    insertable=false;
    if (when == GenerationTiming.ALWAYS) {
      updatable=false;
    }
  }
  return annotationValueGeneration != null ? annotationValueGeneration : legacyValueGeneration;
}
