{
  if (getProducer().isTransactionInProgress()) {
    FlushMode effectiveFlushMode=getHibernateFlushMode();
    if (effectiveFlushMode == null) {
      effectiveFlushMode=getProducer().getHibernateFlushMode();
    }
    if (effectiveFlushMode != FlushMode.MANUAL) {
      return true;
    }
  }
  return false;
}
