{
  if (isNativeSqlQuery()) {
    throw new IllegalStateException("Cannot tell if native SQL query is SELECT query");
  }
  return getEntityManager().getFactory().getSessionFactory().getQueryPlanCache().getHQLQueryPlan(query.getQueryString(),false,Collections.emptyMap()).isSelect();
}
