{
  if (getEntityGraphQueryHint() != null) {
    SessionImplementor sessionImpl=(SessionImplementor)getEntityManager().getSession();
    HQLQueryPlan entityGraphQueryPlan=new HQLQueryPlan(getHibernateQuery().getQueryString(),false,sessionImpl.getEnabledFilters(),sessionImpl.getFactory(),getEntityGraphQueryHint());
    unwrap(org.hibernate.internal.QueryImpl.class).setQueryPlan(entityGraphQueryPlan);
  }
  return query.list();
}
