{
  for (  Object key : originalId.keySet()) {
    Object value=originalId.get(key);
    if (value instanceof HibernateProxy) {
      HibernateProxy hibernateProxy=(HibernateProxy)value;
      LazyInitializer initializer=hibernateProxy.getHibernateLazyInitializer();
      final String entityName=initializer.getEntityName();
      final Serializable entityId=initializer.getIdentifier();
      if (verCfg.getEntCfg().isVersioned(entityName)) {
        final String entityClassName=verCfg.getEntCfg().get(entityName).getEntityClassName();
        Class entityClass;
        try {
          entityClass=ReflectHelper.classForName(entityClassName);
        }
 catch (        ClassNotFoundException e) {
          throw new AuditException(e);
        }
        final ToOneDelegateSessionImplementor delegate=new ToOneDelegateSessionImplementor(versionsReader,entityClass,entityId,revision,verCfg);
        originalId.put(key,versionsReader.getSessionImplementor().getFactory().getEntityPersister(entityName).createProxy(entityId,delegate));
      }
    }
  }
}
