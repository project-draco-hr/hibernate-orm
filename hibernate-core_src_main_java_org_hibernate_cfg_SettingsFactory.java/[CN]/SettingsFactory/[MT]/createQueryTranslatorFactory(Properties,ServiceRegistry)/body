{
  String className=ConfigurationHelper.getString(Environment.QUERY_TRANSLATOR,properties,"org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory");
  LOG.debugf("Query translator: %s",className);
  try {
    return (QueryTranslatorFactory)serviceRegistry.getService(ClassLoaderService.class).classForName(className).newInstance();
  }
 catch (  Exception e) {
    throw new HibernateException("could not instantiate QueryTranslatorFactory: " + className,e);
  }
}
