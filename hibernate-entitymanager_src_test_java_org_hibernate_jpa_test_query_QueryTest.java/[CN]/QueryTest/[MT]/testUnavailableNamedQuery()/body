{
  Item item=new Item("Mouse","Micro$oft mouse");
  EntityManager em=getOrCreateEntityManager();
  em.getTransaction().begin();
  em.persist(item);
  try {
    em.createNamedQuery("wrong name");
    fail("Wrong named query should raise an exception");
  }
 catch (  IllegalArgumentException e) {
  }
  assertTrue("thrown IllegalArgumentException should of caused transaction to be marked for rollback only",true == em.getTransaction().getRollbackOnly());
  em.getTransaction().rollback();
  assertNull("entity should not of been saved to database since IllegalArgumentException should of" + "caused transaction to be marked for rollback only",em.find(Item.class,item.getName()));
  em.close();
}
