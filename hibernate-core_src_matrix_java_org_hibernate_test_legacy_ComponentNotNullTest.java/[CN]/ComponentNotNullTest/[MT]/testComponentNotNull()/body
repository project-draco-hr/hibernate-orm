{
  Session s=openSession();
  Transaction t=s.beginTransaction();
  ComponentNotNullMaster master=new ComponentNotNullMaster();
  ComponentNotNull nullable=new ComponentNotNull();
  ComponentNotNull supercomp=new ComponentNotNull();
  ComponentNotNull subcomp=new ComponentNotNull();
  master.setNullable(nullable);
  subcomp.setProp1Subcomp("test");
  supercomp.setSubcomp(subcomp);
  master.setSupercomp(supercomp);
  s.save(master);
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  master=new ComponentNotNullMaster();
  nullable=new ComponentNotNull();
  supercomp=new ComponentNotNull();
  subcomp=new ComponentNotNull();
  master.setNullable(nullable);
  supercomp.setSubcomp(subcomp);
  master.setSupercomp(supercomp);
  try {
    s.save(master);
    t.commit();
    fail("Inserting not-null null property should fail");
  }
 catch (  PropertyValueException e) {
  }
  t.rollback();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  master=new ComponentNotNullMaster();
  nullable=new ComponentNotNull();
  supercomp=new ComponentNotNull();
  subcomp=new ComponentNotNull();
  master.setNullable(nullable);
  try {
    s.save(master);
    t.commit();
    fail("Inserting not-null null property should fail");
  }
 catch (  PropertyValueException e) {
  }
  t.rollback();
  s.close();
}
