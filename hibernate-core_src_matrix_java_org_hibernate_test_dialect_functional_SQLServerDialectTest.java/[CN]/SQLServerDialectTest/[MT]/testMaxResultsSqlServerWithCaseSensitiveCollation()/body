{
  Session s=openSession();
  Connection conn=((SessionFactoryImpl)s.getSessionFactory()).getConnectionProvider().getConnection();
  String databaseName=conn.getCatalog();
  conn.close();
  s.createSQLQuery("ALTER DATABASE " + databaseName + " set single_user with rollback immediate").executeUpdate();
  s.createSQLQuery("ALTER DATABASE " + databaseName + " COLLATE Latin1_General_CS_AS").executeUpdate();
  s.createSQLQuery("ALTER DATABASE " + databaseName + " set multi_user").executeUpdate();
  Transaction tx=s.beginTransaction();
  for (int i=1; i <= 20; i++) {
    Product2 kit=new Product2();
    kit.id=i;
    kit.description="Kit" + i;
    s.persist(kit);
  }
  s.flush();
  s.clear();
  List list=s.createQuery("from Product2 where description like 'Kit%'").setFirstResult(2).setMaxResults(2).list();
  assertEquals(2,list.size());
  tx.rollback();
  s.close();
}
