{
  if (value == null) {
    st.setNull(index,Types.CLOB);
  }
 else {
    if (value instanceof SerializableClob) {
      value=((SerializableClob)value).getWrappedClob();
    }
    final boolean useReader=session.getFactory().getDialect().useInputStreamToInsertBlob() && (value instanceof ClobImpl);
    if (useReader) {
      ClobImpl clob=(ClobImpl)value;
      st.setCharacterStream(index,clob.getCharacterStream(),(int)clob.length());
    }
 else {
      st.setClob(index,(Clob)value);
    }
  }
}
