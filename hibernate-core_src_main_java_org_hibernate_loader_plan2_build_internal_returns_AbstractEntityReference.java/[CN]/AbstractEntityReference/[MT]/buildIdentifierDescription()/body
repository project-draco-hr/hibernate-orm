{
  final EntityIdentifierDefinition identifierDefinition=getEntityPersister().getEntityKeyDefinition();
  if (identifierDefinition.isEncapsulated()) {
    final EncapsulatedEntityIdentifierDefinition encapsulatedIdentifierDefinition=(EncapsulatedEntityIdentifierDefinition)identifierDefinition;
    final Type idAttributeType=encapsulatedIdentifierDefinition.getAttributeDefinition().getType();
    if (!CompositeType.class.isInstance(idAttributeType)) {
      return new SimpleEntityIdentifierDescriptionImpl();
    }
  }
  final ExpandingCompositeQuerySpace querySpace=expandingEntityQuerySpace().makeCompositeIdentifierQuerySpace();
  return identifierDefinition.isEncapsulated() ? buildEncapsulatedCompositeIdentifierDescription(querySpace) : buildNonEncapsulatedCompositeIdentifierDescription(querySpace);
}
