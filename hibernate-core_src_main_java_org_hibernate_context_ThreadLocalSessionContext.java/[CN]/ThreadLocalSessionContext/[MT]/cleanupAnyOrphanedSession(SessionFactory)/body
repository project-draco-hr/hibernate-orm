{
  Session orphan=doUnbind(factory,false);
  if (orphan != null) {
    LOG.alreadySessionBound();
    try {
      if (orphan.getTransaction() != null && orphan.getTransaction().isActive()) {
        try {
          orphan.getTransaction().rollback();
        }
 catch (        Throwable t) {
          LOG.unableToRollbackTransaction(t.getMessage());
        }
      }
      orphan.close();
    }
 catch (    Throwable t) {
      LOG.unableToCloseOrphanedSession(t.getMessage());
    }
  }
}
