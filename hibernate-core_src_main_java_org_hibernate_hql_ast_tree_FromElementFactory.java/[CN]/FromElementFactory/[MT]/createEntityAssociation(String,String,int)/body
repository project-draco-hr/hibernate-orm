{
  FromElement elem;
  Queryable entityPersister=(Queryable)queryableCollection.getElementPersister();
  String associatedEntityName=entityPersister.getEntityName();
  if (queryableCollection.isOneToMany()) {
    LOG.createEntityAssociation(path,role,associatedEntityName);
    JoinSequence joinSequence=createJoinSequence(roleAlias,joinType);
    elem=createJoin(associatedEntityName,roleAlias,joinSequence,(EntityType)queryableCollection.getElementType(),false);
  }
 else {
    LOG.createManyToMany(path,role,associatedEntityName);
    elem=createManyToMany(role,associatedEntityName,roleAlias,entityPersister,(EntityType)queryableCollection.getElementType(),joinType);
    fromClause.getWalker().addQuerySpaces(queryableCollection.getCollectionSpaces());
  }
  elem.setCollectionTableAlias(roleAlias);
  return elem;
}
