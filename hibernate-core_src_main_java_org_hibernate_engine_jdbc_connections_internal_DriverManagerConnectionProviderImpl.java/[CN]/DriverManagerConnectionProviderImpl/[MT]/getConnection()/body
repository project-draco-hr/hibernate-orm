{
  if (!active) {
    throw new HibernateException("Connection pool is no longer active");
  }
  Connection connection;
  if ((connection=connections.poll()) == null) {
    connection=connectionCreator.createConnection();
  }
  return connection;
}
