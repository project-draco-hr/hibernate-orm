{
  if (lockOptions.getLockMode().greaterThan(LockMode.READ)) {
    return JoinType.NONE;
  }
  if (isTooDeep(currentDepth) || (associationType.isCollectionType() && isTooManyCollections())) {
    return JoinType.NONE;
  }
  if (!isJoinedFetchEnabledInMapping(metadataFetchMode,associationType) && !isJoinFetchEnabledByProfile(persister,path,propertyNumber)) {
    return JoinType.NONE;
  }
  if (isDuplicateAssociation(lhsTable,lhsColumns,associationType)) {
    return JoinType.NONE;
  }
  return getJoinType(nullable,currentDepth);
}
