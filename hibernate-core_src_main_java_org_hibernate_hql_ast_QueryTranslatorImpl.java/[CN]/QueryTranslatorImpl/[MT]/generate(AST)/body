{
  if (sql == null) {
    SqlGenerator gen=new SqlGenerator(factory);
    gen.statement(sqlAst);
    sql=gen.getSQL();
    if (LOG.isDebugEnabled()) {
      LOG.debug("HQL: " + hql);
      LOG.debug("SQL: " + sql);
    }
    gen.getParseErrorHandler().throwQueryException();
    collectedParameterSpecifications=gen.getCollectedParameters();
  }
}
