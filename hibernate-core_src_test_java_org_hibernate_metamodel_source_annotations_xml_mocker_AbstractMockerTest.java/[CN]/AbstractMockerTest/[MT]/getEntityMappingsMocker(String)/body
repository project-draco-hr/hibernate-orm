{
  ClassLoaderService classLoaderService=getServiceRegistry().getService(ClassLoaderService.class);
  List<JaxbEntityMappings> xmlEntityMappingsList=new ArrayList<JaxbEntityMappings>();
  for (  String fileName : mappingFiles) {
    JaxbEntityMappings entityMappings;
    try {
      entityMappings=XmlHelper.unmarshallXml(packagePrefix + fileName,ORM2_MAPPING_XSD,JaxbEntityMappings.class,classLoaderService).getRoot();
    }
 catch (    JAXBException orm2Exception) {
      try {
        entityMappings=XmlHelper.unmarshallXml(packagePrefix + fileName,ORM1_MAPPING_XSD,JaxbEntityMappings.class,classLoaderService).getRoot();
      }
 catch (      JAXBException orm1Exception) {
        throw new AnnotationException("Unable to parse xml configuration.",orm1Exception);
      }
    }
    xmlEntityMappingsList.add(entityMappings);
  }
  return new EntityMappingsMocker(xmlEntityMappingsList,getIndex(),getServiceRegistry());
}
