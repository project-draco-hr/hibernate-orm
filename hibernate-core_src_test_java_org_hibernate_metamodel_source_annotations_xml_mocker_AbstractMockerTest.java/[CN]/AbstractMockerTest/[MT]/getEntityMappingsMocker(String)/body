{
  ClassLoaderService classLoaderService=getServiceRegistry().getService(ClassLoaderService.class);
  List<XMLEntityMappings> xmlEntityMappingsList=new ArrayList<XMLEntityMappings>();
  for (  String fileName : mappingFiles) {
    XMLEntityMappings entityMappings;
    try {
      entityMappings=XmlHelper.unmarshallXml(packagePrefix + fileName,ORM2_MAPPING_XSD,XMLEntityMappings.class,classLoaderService).getRoot();
    }
 catch (    JAXBException orm2Exception) {
      try {
        entityMappings=XmlHelper.unmarshallXml(packagePrefix + fileName,ORM1_MAPPING_XSD,XMLEntityMappings.class,classLoaderService).getRoot();
      }
 catch (      JAXBException orm1Exception) {
        throw new AnnotationException("Unable to parse xml configuration.",orm1Exception);
      }
    }
    xmlEntityMappingsList.add(entityMappings);
  }
  return new EntityMappingsMocker(xmlEntityMappingsList,getIndex(),getServiceRegistry());
}
