{
  if (isNullValue) {
    if (checkNullability) {
      if (isLegacy) {
        assertTyping(PropertyValueException.class,ex);
      }
 else {
        assertTyping(PersistenceException.class,ex);
      }
    }
 else {
      assertTrue((ex instanceof JDBCException) || (ex.getCause() instanceof JDBCException));
    }
  }
 else {
    if (isLegacy) {
      assertTyping(TransientPropertyValueException.class,ex);
    }
 else {
      assertTyping(IllegalStateException.class,ex);
    }
  }
}
