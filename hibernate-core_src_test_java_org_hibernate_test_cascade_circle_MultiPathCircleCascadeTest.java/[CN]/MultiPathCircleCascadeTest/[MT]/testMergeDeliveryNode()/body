{
  Route route=getUpdatedDetachedEntity();
  clearCounts();
  Session s=openSession();
  s.beginTransaction();
  Iterator it=route.getNodes().iterator();
  Node node=(Node)it.next();
  Node deliveryNode;
  if (node.getName().equals("deliveryNodeB")) {
    deliveryNode=node;
  }
 else {
    node=(Node)it.next();
    assertEquals("deliveryNodeB",node.getName());
    deliveryNode=node;
  }
  deliveryNode=(Node)s.merge(deliveryNode);
  s.getTransaction().commit();
  s.close();
  assertInsertCount(4);
  assertUpdateCount(0);
  s=openSession();
  s.beginTransaction();
  route=(Route)s.get(Route.class,route.getRouteID());
  checkResults(route,false);
  s.getTransaction().commit();
  s.close();
}
