{
  createData();
  Session session=openSession();
  session.beginTransaction();
  List results=session.createQuery("from Tranchenmodell").list();
  assertEquals(1,results.size());
  results=session.createQuery("from Preisregelung").list();
  assertEquals(1,results.size());
  Preisregelung preisregelung=(Preisregelung)results.get(0);
  Tranchenmodell tranchenmodell=preisregelung.getTranchenmodell();
  assertNotNull(tranchenmodell);
  assertNotNull(tranchenmodell.getX());
  assertEquals(2,tranchenmodell.getTranchen().size());
  assertNotNull(tranchenmodell.getTranchen().get(0).getY());
  Tranchenmodell tranchenmodellNew=new Tranchenmodell();
  X xNew=new X();
  tranchenmodellNew.setX(xNew);
  xNew.setTranchenmodell(tranchenmodellNew);
  Tranche trancheNew=new Tranche();
  tranchenmodellNew.getTranchen().add(trancheNew);
  trancheNew.setTranchenmodell(tranchenmodellNew);
  Y yNew=new Y();
  trancheNew.setY(yNew);
  yNew.setTranche(trancheNew);
  preisregelung.setTranchenmodell(tranchenmodellNew);
  tranchenmodellNew.setPreisregelung(preisregelung);
  session.getTransaction().commit();
  session.close();
  session=openSession();
  session.getTransaction().begin();
  results=session.createQuery("from Tranche").list();
  assertEquals(1,results.size());
  results=session.createQuery("from Tranchenmodell").list();
  assertEquals(1,results.size());
  results=session.createQuery("from X").list();
  assertEquals(1,results.size());
  results=session.createQuery("from Y").list();
  assertEquals(1,results.size());
  results=session.createQuery("from Preisregelung").list();
  assertEquals(1,results.size());
  preisregelung=(Preisregelung)results.get(0);
  tranchenmodell=preisregelung.getTranchenmodell();
  assertNotNull(tranchenmodell);
  assertEquals(tranchenmodellNew.getId(),tranchenmodell.getId());
  assertNotNull(tranchenmodell.getX());
  assertEquals(xNew.getId(),tranchenmodell.getX().getId());
  assertEquals(1,tranchenmodell.getTranchen().size());
  assertEquals(trancheNew.getId(),tranchenmodell.getTranchen().get(0).getId());
  assertEquals(yNew.getId(),tranchenmodell.getTranchen().get(0).getY().getId());
  tranchenmodellNew=new Tranchenmodell();
  preisregelung.setTranchenmodell(tranchenmodellNew);
  tranchenmodellNew.setPreisregelung(preisregelung);
  session.getTransaction().commit();
  session.close();
  session=openSession();
  session.beginTransaction();
  results=session.createQuery("from Tranchenmodell").list();
  assertEquals(1,results.size());
  tranchenmodell=(Tranchenmodell)results.get(0);
  assertEquals(tranchenmodellNew.getId(),tranchenmodell.getId());
  results=session.createQuery("from Preisregelung").list();
  assertEquals(1,results.size());
  preisregelung=(Preisregelung)results.get(0);
  assertEquals(tranchenmodell,preisregelung.getTranchenmodell());
  results=session.createQuery("from Tranche").list();
  assertEquals(0,results.size());
  results=session.createQuery("from X").list();
  assertEquals(0,results.size());
  results=session.createQuery("from Y").list();
  assertEquals(0,results.size());
  session.getTransaction().commit();
  session.close();
  cleanupData();
}
