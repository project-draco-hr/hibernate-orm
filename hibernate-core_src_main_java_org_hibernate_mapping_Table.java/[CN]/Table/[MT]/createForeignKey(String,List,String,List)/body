{
  Object key=new ForeignKeyKey(keyColumns,referencedEntityName,referencedColumns);
  ForeignKey fk=(ForeignKey)foreignKeys.get(key);
  if (fk == null) {
    fk=new ForeignKey();
    fk.setTable(this);
    fk.setReferencedEntityName(referencedEntityName);
    fk.addColumns(keyColumns.iterator());
    if (referencedColumns != null) {
      fk.addReferencedColumns(referencedColumns.iterator());
    }
    if (keyName != null) {
      fk.setName(keyName);
    }
 else {
      fk.setName(Constraint.generateName(fk.generatedConstraintNamePrefix(),this,keyColumns));
    }
    foreignKeys.put(key,fk);
  }
  if (keyName != null) {
    fk.setName(keyName);
  }
  return fk;
}
