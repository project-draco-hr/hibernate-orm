{
  final ForeignKeyKey key=new ForeignKeyKey(keyColumns,referencedEntityName,referencedColumns);
  ForeignKey fk=foreignKeys.get(key);
  if (fk == null) {
    fk=new ForeignKey();
    fk.setTable(this);
    fk.setReferencedEntityName(referencedEntityName);
    fk.setKeyDefinition(keyDefinition);
    fk.addColumns(keyColumns.iterator());
    if (referencedColumns != null) {
      fk.addReferencedColumns(referencedColumns.iterator());
    }
    fk.setName(keyName);
    foreignKeys.put(key,fk);
  }
  if (keyName != null) {
    fk.setName(keyName);
  }
  return fk;
}
