{
  if (DefaultIvyService.class.isInstance(ivyService)) {
    return (DefaultIvyService)ivyService;
  }
  if (ErrorHandlingIvyService.class.isInstance(ivyService)) {
    return unwrap(((ErrorHandlingIvyService)ivyService).getIvyService());
  }
  if (ShortcircuitEmptyConfigsIvyService.class.isInstance(ivyService)) {
    return unwrap(((ShortcircuitEmptyConfigsIvyService)ivyService).getIvyService());
  }
  throw new BuildException("Do not know how to extract needed ivy config from ivy service of type " + ivyService.getClass().getName());
}
