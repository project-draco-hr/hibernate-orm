{
  Session s=getFactory().openSession();
  s.beginTransaction();
  Entity entity=s.get(Entity.class,entityId);
  Assert.assertFalse(Hibernate.isPropertyInitialized(entity,"description"));
  EnhancerTestUtils.checkDirtyTracking(entity);
  Assert.assertEquals("desc",entity.getDescription());
  Assert.assertTrue(Hibernate.isPropertyInitialized(entity,"description"));
  s.getTransaction().commit();
  s.close();
  s=getFactory().openSession();
  s.beginTransaction();
  entity.setDescription("desc1");
  s.update(entity);
  EnhancerTestUtils.checkDirtyTracking(entity,"description");
  Assert.assertEquals("desc1",entity.getDescription());
  Assert.assertTrue(Hibernate.isPropertyInitialized(entity,"description"));
  s.getTransaction().commit();
  s.close();
  s=getFactory().openSession();
  s.beginTransaction();
  entity=s.get(Entity.class,entityId);
  Assert.assertEquals("desc1",entity.getDescription());
  s.getTransaction().commit();
  s.close();
  s=getFactory().openSession();
  s.beginTransaction();
  entity.setDescription("desc2");
  entity=(Entity)s.merge(entity);
  EnhancerTestUtils.checkDirtyTracking(entity,"description");
  Assert.assertEquals("desc2",entity.getDescription());
  Assert.assertTrue(Hibernate.isPropertyInitialized(entity,"description"));
  s.getTransaction().commit();
  s.close();
  s=getFactory().openSession();
  s.beginTransaction();
  entity=s.get(Entity.class,entityId);
  Assert.assertEquals("desc2",entity.getDescription());
  s.getTransaction().commit();
  s.close();
}
