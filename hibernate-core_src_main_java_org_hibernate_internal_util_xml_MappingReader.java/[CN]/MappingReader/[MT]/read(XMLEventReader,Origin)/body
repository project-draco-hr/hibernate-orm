{
  XMLEvent event;
  try {
    event=staxEventReader.peek();
    while (event != null && !event.isStartElement()) {
      staxEventReader.nextEvent();
      event=staxEventReader.peek();
    }
  }
 catch (  Exception e) {
    throw new InvalidMappingException("Error accessing stax stream",origin,e);
  }
  if (event == null) {
    throw new InvalidMappingException("Could not locate root element",origin);
  }
  final String rootElementName=event.asStartElement().getName().getLocalPart();
  if ("entity-mappings".equals(rootElementName)) {
    final Attribute attribute=event.asStartElement().getAttributeByName(ORM_VERSION_ATTRIBUTE_QNAME);
    final String explicitVersion=attribute == null ? null : attribute.getValue();
    validateMapping(SupportedOrmXsdVersion.parse(explicitVersion,origin),staxEventReader,origin);
  }
  return new XmlDocumentImpl(toDom4jDocument(staxEventReader,origin),origin);
}
