{
  if (begun) {
    return;
  }
  if (commitFailed) {
    throw new TransactionException("cannot re-start transaction after failed commit");
  }
  LOG.debugf("Begin");
  try {
    toggleAutoCommit=jdbcContext.connection().getAutoCommit();
    LOG.debugf("current autocommit status: %s",toggleAutoCommit);
    if (toggleAutoCommit) {
      LOG.debugf("Disabling autocommit");
      jdbcContext.connection().setAutoCommit(false);
    }
  }
 catch (  SQLException e) {
    LOG.error(LOG.jdbcBeginFailed(),e);
    throw new TransactionException(LOG.jdbcBeginFailed(),e);
  }
  callback=jdbcContext.registerCallbackIfNecessary();
  begun=true;
  committed=false;
  rolledBack=false;
  if (timeout > 0) {
    jdbcContext.getConnectionManager().setTransactionTimeout(timeout);
  }
  jdbcContext.afterTransactionBegin(this);
}
