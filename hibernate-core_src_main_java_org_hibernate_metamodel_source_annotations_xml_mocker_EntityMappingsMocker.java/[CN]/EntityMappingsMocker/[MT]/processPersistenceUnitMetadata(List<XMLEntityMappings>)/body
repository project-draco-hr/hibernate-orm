{
  for (  XMLEntityMappings entityMappings : entityMappingsList) {
    XMLPersistenceUnitMetadata pum=entityMappings.getPersistenceUnitMetadata();
    if (globalDefaults != null) {
      LOG.duplicateMetadata();
      return;
    }
    if (pum == null) {
      continue;
    }
    globalDefaults=new Default();
    if (pum.getXmlMappingMetadataComplete() != null) {
      globalDefaults.setMetadataComplete(true);
      indexBuilder.mappingMetadataComplete();
    }
    XMLPersistenceUnitDefaults pud=pum.getPersistenceUnitDefaults();
    if (pud == null) {
      return;
    }
    globalDefaults.setSchema(pud.getSchema());
    globalDefaults.setCatalog(pud.getCatalog());
    globalDefaults.setAccess(pud.getAccess());
    globalDefaults.setCascadePersist(pud.getCascadePersist() != null);
    new PersistenceMetadataMocker(indexBuilder,pud).process();
  }
}
