{
  final Map map;
  if ("net.sf.ehcache.hibernate.strategy.AbstractReadWriteEhcacheAccessStrategy$Item".equals(entry.getClass().getName())) {
    try {
      Field field=entry.getClass().getDeclaredField("value");
      field.setAccessible(true);
      map=(Map)field.get(entry);
    }
 catch (    NoSuchFieldException e) {
      throw new RuntimeException(e);
    }
catch (    IllegalAccessException e) {
      throw new RuntimeException(e);
    }
  }
 else {
    map=(Map)entry;
  }
  return map;
}
