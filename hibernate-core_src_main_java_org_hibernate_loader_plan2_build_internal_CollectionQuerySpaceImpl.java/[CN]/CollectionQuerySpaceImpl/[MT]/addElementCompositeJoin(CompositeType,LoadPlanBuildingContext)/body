{
  final String compositeQuerySpaceUid=getQuerySpaces().generateImplicitUid();
  final CompositeQuerySpaceImpl compositeQuerySpace=new CompositeQuerySpaceImpl(CollectionQuerySpaceImpl.this.getUid(),compositeType,compositeQuerySpaceUid,Disposition.COMPOSITE,getQuerySpaces(),sessionFactory());
  ((QuerySpacesImpl)context.getQuerySpaces()).registerQuerySpace(compositeQuerySpace);
  final CollectionElementCompositeJoin join=new CollectionElementCompositeJoin(){
    @Override public CollectionQuerySpaceImpl getCollectionQuerySpace(){
      return CollectionQuerySpaceImpl.this;
    }
    @Override public CollectionQuerySpaceImpl getLeftHandSide(){
      return CollectionQuerySpaceImpl.this;
    }
    @Override public CompositeQuerySpaceImpl getRightHandSide(){
      return compositeQuerySpace;
    }
    @Override public boolean isRightHandSideOptional(){
      return false;
    }
  }
;
  internalGetJoins().add(join);
  return join;
}
