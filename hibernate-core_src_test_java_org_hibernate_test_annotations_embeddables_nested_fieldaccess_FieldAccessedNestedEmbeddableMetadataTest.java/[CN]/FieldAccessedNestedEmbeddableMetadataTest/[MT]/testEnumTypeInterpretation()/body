{
  Configuration cfg=new Configuration().addAnnotatedClass(Customer.class);
  cfg.buildMappings();
  Mapping mapping=cfg.buildMapping();
  PersistentClass classMetadata=cfg.getClassMapping(Customer.class.getName());
  Property investmentsProperty=classMetadata.getProperty("investments");
  Collection investmentsValue=(Collection)investmentsProperty.getValue();
  Component investmentMetadata=(Component)investmentsValue.getElement();
  Value descriptionValue=investmentMetadata.getProperty("description").getValue();
  assertEquals(1,descriptionValue.getColumnSpan());
  Column selectable=(Column)descriptionValue.getColumnIterator().next();
  assertEquals(500,selectable.getLength());
  Component amountMetadata=(Component)investmentMetadata.getProperty("amount").getValue();
  SimpleValue currencyMetadata=(SimpleValue)amountMetadata.getProperty("currency").getValue();
  CustomType currencyType=(CustomType)currencyMetadata.getType();
  int[] currencySqlTypes=currencyType.sqlTypes(mapping);
  assertEquals(1,currencySqlTypes.length);
  assertJdbcTypeCode(Types.VARCHAR,currencySqlTypes[0]);
}
