{
  final List<ParsedPersistenceXmlDescriptor> persistenceUnits=new ArrayList<ParsedPersistenceXmlDescriptor>();
  final List<URL> xmlUrls=classLoaderService.locateResources("META-INF/persistence.xml");
  if (xmlUrls.isEmpty()) {
    LOG.unableToFindPersistenceXmlInClasspath();
  }
 else {
    for (    URL xmlUrl : xmlUrls) {
      persistenceUnits.addAll(parsePersistenceXml(xmlUrl,integration));
    }
  }
  return persistenceUnits;
}
