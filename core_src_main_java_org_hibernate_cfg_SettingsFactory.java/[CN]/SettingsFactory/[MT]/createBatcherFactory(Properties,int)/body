{
  String batcherClass=properties.getProperty(Environment.BATCH_STRATEGY);
  if (batcherClass == null) {
    return batchSize == 0 ? new NonBatchingBatcherFactory() : new BatchingBatcherFactory();
  }
 else {
    log.info("Batcher factory: " + batcherClass);
    try {
      return (BatcherFactory)ReflectHelper.classForName(batcherClass).newInstance();
    }
 catch (    Exception cnfe) {
      throw new HibernateException("could not instantiate BatcherFactory: " + batcherClass,cnfe);
    }
  }
}
