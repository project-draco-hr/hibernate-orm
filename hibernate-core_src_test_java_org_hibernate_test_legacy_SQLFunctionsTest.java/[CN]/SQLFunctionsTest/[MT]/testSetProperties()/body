{
  Session s=openSession();
  Transaction t=s.beginTransaction();
  Simple simple=new Simple(Long.valueOf(10));
  simple.setName("Simple 1");
  s.save(simple);
  Query q=s.createQuery("from Simple s where s.name=:name and s.count=:count");
  q.setProperties(simple);
  assertTrue(q.list().get(0) == simple);
  Single single=new Single(){
    String[] getStuff(){
      return (String[])getSeveral().toArray(new String[getSeveral().size()]);
    }
    void setStuff(    String[] stuff){
      setSeveral(Arrays.asList(stuff));
    }
  }
;
  List l=new ArrayList();
  l.add("Simple 1");
  l.add("Slimeball");
  single.setSeveral(l);
  q=s.createQuery("from Simple s where s.name in (:several)");
  q.setProperties(single);
  assertTrue(q.list().get(0) == simple);
  q=s.createQuery("from Simple s where s.name in :several");
  q.setProperties(single);
  assertTrue(q.list().get(0) == simple);
  q=s.createQuery("from Simple s where s.name in (:stuff)");
  q.setProperties(single);
  assertTrue(q.list().get(0) == simple);
  q=s.createQuery("from Simple s where s.name in :stuff");
  q.setProperties(single);
  assertTrue(q.list().get(0) == simple);
  s.delete(simple);
  t.commit();
  s.close();
}
