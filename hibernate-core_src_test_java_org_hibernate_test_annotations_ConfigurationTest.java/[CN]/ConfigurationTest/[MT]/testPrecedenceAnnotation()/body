{
  AnnotationConfiguration cfg=new AnnotationConfiguration();
  cfg.configure("org/hibernate/test/annotations/hibernate.cfg.xml");
  cfg.setProperty(Environment.HBM2DDL_AUTO,"create-drop");
  cfg.setProperty(AnnotationConfiguration.ARTEFACT_PROCESSING_ORDER,"class, hbm");
  cfg.addAnnotatedClass(Boat.class);
  SessionFactory sf=cfg.buildSessionFactory(serviceRegistryHolder.getServiceRegistry());
  assertNotNull(sf);
  Session s=sf.openSession();
  s.getTransaction().begin();
  Boat boat=new Boat();
  boat.setSize(12);
  boat.setWeight(34);
  s.persist(boat);
  s.getTransaction().commit();
  s.clear();
  Transaction tx=s.beginTransaction();
  boat=(Boat)s.get(Boat.class,boat.getId());
  assertTrue("Annotation has precedence",34 == boat.getWeight());
  s.delete(boat);
  tx.commit();
  s.close();
  sf.close();
}
