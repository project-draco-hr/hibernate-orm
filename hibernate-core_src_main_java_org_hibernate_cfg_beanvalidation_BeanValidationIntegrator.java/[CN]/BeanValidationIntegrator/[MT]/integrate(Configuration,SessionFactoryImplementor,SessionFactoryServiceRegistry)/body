{
  final Set<ValidationMode> modes=ValidationMode.getModes(configuration.getProperties().get(MODE_PROPERTY));
  final ClassLoaderService classLoaderService=serviceRegistry.getService(ClassLoaderService.class);
  Dialect dialect=serviceRegistry.getService(JdbcServices.class).getDialect();
  boolean isBeanValidationAvailable;
  try {
    classLoaderService.classForName(BV_CHECK_CLASS);
    isBeanValidationAvailable=true;
  }
 catch (  Exception e) {
    isBeanValidationAvailable=false;
  }
  final Class typeSafeActivatorClass=loadTypeSafeActivatorClass(serviceRegistry);
  applyRelationalConstraints(modes,isBeanValidationAvailable,typeSafeActivatorClass,configuration,dialect);
  applyHibernateListeners(modes,isBeanValidationAvailable,typeSafeActivatorClass,configuration,sessionFactory,serviceRegistry);
}
