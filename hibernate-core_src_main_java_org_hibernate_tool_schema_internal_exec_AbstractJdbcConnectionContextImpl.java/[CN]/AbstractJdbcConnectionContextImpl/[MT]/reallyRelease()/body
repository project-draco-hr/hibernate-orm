{
  if (jdbcConnection != null) {
    try {
      if (!jdbcConnection.getAutoCommit()) {
        jdbcConnection.commit();
      }
 else {
        if (needsAutoCommit && !wasInitiallyAutoCommit) {
          jdbcConnection.setAutoCommit(false);
        }
      }
    }
 catch (    SQLException e) {
      throw new SchemaManagementException("Unable to reset auto-commit after schema management;  may or may not be a problem",e);
    }
    try {
      jdbcConnectionAccess.releaseConnection(jdbcConnection);
    }
 catch (    SQLException e) {
      throw new SchemaManagementException("Unable to release JDBC Connection",e);
    }
  }
}
