{
  try {
    final Class beanManagerListenerFactoryClass=getClass().getClassLoader().loadClass(CDI_LISTENER_FACTORY_CLASS);
    final Method beanManagerListenerFactoryBuilderMethod=beanManagerListenerFactoryClass.getMethod("fromBeanManagerReference",Object.class);
    try {
      return (ListenerFactory)beanManagerListenerFactoryBuilderMethod.invoke(null,beanManagerRef);
    }
 catch (    InvocationTargetException e) {
      throw e.getTargetException();
    }
  }
 catch (  ClassNotFoundException e) {
    throw new HibernateException("Could not locate BeanManagerListenerFactory class to handle CDI extensions",e);
  }
catch (  HibernateException e) {
    throw e;
  }
catch (  Throwable e) {
    throw new HibernateException("Could not access BeanManagerListenerFactory class to handle CDI extensions",e);
  }
}
