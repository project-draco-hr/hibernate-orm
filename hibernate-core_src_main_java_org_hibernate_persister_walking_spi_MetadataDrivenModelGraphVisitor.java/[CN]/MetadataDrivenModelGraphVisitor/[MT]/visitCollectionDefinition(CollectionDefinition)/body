{
  strategy.startingCollection(collectionDefinition);
  try {
    visitCollectionIndex(collectionDefinition.getIndexDefinition());
    final CollectionElementDefinition elementDefinition=collectionDefinition.getElementDefinition();
    if (elementDefinition.getType().isComponentType()) {
      visitCompositeDefinition(elementDefinition.toCompositeDefinition());
    }
 else {
      visitEntityDefinition(elementDefinition.toEntityDefinition());
    }
  }
  finally {
    strategy.finishingCollection(collectionDefinition);
  }
}
