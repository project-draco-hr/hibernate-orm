{
  if (!expectation.canBeBatched()) {
    throw new HibernateException("attempting to batch an operation which cannot be batched");
  }
  PreparedStatement batchUpdate=getStatement();
  batchUpdate.addBatch();
  expectations[batchSize++]=expectation;
  if (batchSize == getFactory().getSettings().getJdbcBatchSize()) {
    doExecuteBatch(batchUpdate);
  }
}
