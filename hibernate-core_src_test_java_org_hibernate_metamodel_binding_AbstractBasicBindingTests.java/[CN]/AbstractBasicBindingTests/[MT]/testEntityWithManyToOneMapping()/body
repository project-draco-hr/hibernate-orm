{
  MetadataImplementor metadata=buildMetadataWithManyToOne();
  EntityBinding entityWithManyToOneBinding=metadata.getEntityBinding(EntityWithManyToOne.class.getName());
  EntityBinding simpleEntityBinding=metadata.getEntityBinding(SimpleEntity.class.getName());
  checkSimpleEntityMapping(simpleEntityBinding);
  assertTrue(1 == simpleEntityBinding.getAttributeBinding("id").getEntityReferencingAttributeBindings().size());
  Iterator<EntityReferencingAttributeBinding> it=entityWithManyToOneBinding.getEntityReferencingAttributeBindings().iterator();
  assertTrue(it.hasNext());
  assertSame(entityWithManyToOneBinding.getAttributeBinding("simpleEntity"),it.next());
  assertFalse(it.hasNext());
}
