{
  List<File> javaFiles=new ArrayList<File>();
  String packageDirName=baseDir;
  if (packageName != null) {
    packageDirName=packageDirName + DIRECTORY_SEPARATOR + packageName.replace(".",DIRECTORY_SEPARATOR);
  }
  File packageDir=new File(packageDirName);
  FilenameFilter javaFileFilter=new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return name.endsWith(".java") && !name.endsWith("Test.java");
    }
  }
;
  final File[] files=packageDir.listFiles(javaFileFilter);
  if (files == null) {
    throw new RuntimeException("Cannot find package directory (is your base dir correct?): " + packageDirName);
  }
  javaFiles.addAll(Arrays.asList(files));
  return javaFiles;
}
