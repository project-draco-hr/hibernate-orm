{
  List<String> options=createJavaOptions();
  JavaCompiler compiler=ToolProvider.getSystemJavaCompiler();
  DiagnosticCollector<JavaFileObject> diagnostics=new DiagnosticCollector<JavaFileObject>();
  StandardJavaFileManager fileManager=compiler.getStandardFileManager(diagnostics,null,null);
  Iterable<? extends JavaFileObject> compilationUnits=fileManager.getJavaFileObjectsFromFiles(getCompilationUnits(sourceBaseDir));
  compileSources(options,compiler,diagnostics,fileManager,compilationUnits);
  compilationUnits=fileManager.getJavaFileObjectsFromFiles(getCompilationUnits(outBaseDir));
  compileSources(options,compiler,diagnostics,fileManager,compilationUnits);
  fileManager.close();
}
