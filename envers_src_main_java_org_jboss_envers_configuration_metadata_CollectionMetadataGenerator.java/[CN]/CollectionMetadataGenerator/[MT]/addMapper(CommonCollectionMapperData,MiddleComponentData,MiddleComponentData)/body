{
  Type type=propertyValue.getType();
  if (type instanceof SortedSetType) {
    currentMapper.addComposite(propertyName,new BasicCollectionMapper<Set>(commonCollectionMapperData,TreeSet.class,SortedSetProxy.class,elementComponentData));
  }
 else   if (type instanceof SetType) {
    currentMapper.addComposite(propertyName,new BasicCollectionMapper<Set>(commonCollectionMapperData,HashSet.class,SetProxy.class,elementComponentData));
  }
 else   if (type instanceof SortedMapType) {
    currentMapper.addComposite(propertyName,new MapCollectionMapper<Map>(commonCollectionMapperData,TreeMap.class,SortedMapProxy.class,elementComponentData,indexComponentData));
  }
 else   if (type instanceof MapType) {
    currentMapper.addComposite(propertyName,new MapCollectionMapper<Map>(commonCollectionMapperData,HashMap.class,MapProxy.class,elementComponentData,indexComponentData));
  }
 else   if (type instanceof BagType) {
    currentMapper.addComposite(propertyName,new BasicCollectionMapper<List>(commonCollectionMapperData,ArrayList.class,ListProxy.class,elementComponentData));
  }
 else   if (type instanceof ListType) {
    currentMapper.addComposite(propertyName,new ListCollectionMapper(commonCollectionMapperData,elementComponentData,indexComponentData));
  }
 else {
    mainGenerator.throwUnsupportedTypeException(type,referencingEntityName,propertyName);
  }
}
