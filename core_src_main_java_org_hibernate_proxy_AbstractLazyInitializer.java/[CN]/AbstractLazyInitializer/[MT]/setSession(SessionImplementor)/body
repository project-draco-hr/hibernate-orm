{
  if (s != session) {
    readOnly=false;
    if (s == null) {
      session=null;
    }
 else     if (isConnectedToSession()) {
      throw new HibernateException("illegally attempted to associate a proxy with two open Sessions");
    }
 else {
      session=s;
    }
  }
}
