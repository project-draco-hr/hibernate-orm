{
  if (connection.getConnectionReleaseMode() == ConnectionReleaseMode.AFTER_STATEMENT) {
    return true;
  }
 else   if (connection.getConnectionReleaseMode() == ConnectionReleaseMode.AFTER_TRANSACTION) {
    boolean inAutoCommitState;
    try {
      inAutoCommitState=isAutoCommit() && !callback.isTransactionInProgress();
    }
 catch (    SQLException e) {
      inAutoCommitState=true;
    }
    return inAutoCommitState;
  }
  return false;
}
