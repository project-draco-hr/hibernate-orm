{
  LOG.debugf("Caching: %s",key);
  try {
    cache.lock(key);
    Lockable lockable=(Lockable)cache.get(key);
    boolean puttable=lockable == null || lockable.isPuttable(txTimestamp,version,versionComparator);
    if (puttable) {
      cache.put(key,new Item(value,version,cache.nextTimestamp()));
      LOG.debugf("Cached: %s",key);
      return true;
    }
    if (lockable.isLock())     LOG.debugf("Cached item was locked: %s",key);
 else     LOG.debugf("Item already cached: %s",key);
    return false;
  }
  finally {
    cache.unlock(key);
  }
}
