{
  LOG.debugf("Invalidating: %s",key);
  try {
    cache.lock(key);
    Lockable lockable=(Lockable)cache.get(key);
    long timeout=cache.nextTimestamp() + cache.getTimeout();
    final Lock lock=(lockable == null) ? new Lock(timeout,nextLockId(),version) : lockable.lock(timeout,nextLockId());
    cache.update(key,lock);
    return lock;
  }
  finally {
    cache.unlock(key);
  }
}
