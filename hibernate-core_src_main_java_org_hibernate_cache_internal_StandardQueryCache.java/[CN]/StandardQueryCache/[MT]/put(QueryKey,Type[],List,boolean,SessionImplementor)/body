{
  if (isNaturalKeyLookup && result.isEmpty()) {
    return false;
  }
  final long ts=cacheRegion.nextTimestamp();
  if (DEBUGGING) {
    LOG.debugf("Caching query results in region: %s; timestamp=%s",cacheRegion.getName(),ts);
  }
  final List cacheable=new ArrayList(result.size() + 1);
  logCachedResultDetails(key,null,returnTypes,cacheable);
  cacheable.add(ts);
  final boolean isSingleResult=returnTypes.length == 1;
  for (  Object aResult : result) {
    final Serializable cacheItem=isSingleResult ? returnTypes[0].disassemble(aResult,session,null) : TypeHelper.disassemble((Object[])aResult,returnTypes,null,session,null);
    cacheable.add(cacheItem);
    logCachedResultRowDetails(returnTypes,aResult);
  }
  try {
    session.getEventListenerManager().cachePutStart();
    cacheRegion.put(key,cacheable);
  }
  finally {
    session.getEventListenerManager().cachePutEnd();
  }
  return true;
}
