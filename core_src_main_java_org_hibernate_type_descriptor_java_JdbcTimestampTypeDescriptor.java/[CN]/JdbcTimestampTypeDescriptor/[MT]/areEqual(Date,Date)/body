{
  if (one == another) {
    return true;
  }
  if (one == null || another == null) {
    return false;
  }
  long t1=one.getTime();
  long t2=another.getTime();
  boolean oneIsTimestamp=Timestamp.class.isInstance(one);
  boolean anotherIsTimestamp=Timestamp.class.isInstance(another);
  int n1=oneIsTimestamp ? ((Timestamp)one).getNanos() : 0;
  int n2=anotherIsTimestamp ? ((Timestamp)another).getNanos() : 0;
  if (!Environment.jvmHasJDK14Timestamp()) {
    t1+=n1 / 1000000;
    t2+=n2 / 1000000;
  }
  if (t1 != t2) {
    return false;
  }
  if (oneIsTimestamp && anotherIsTimestamp) {
    int nn1=n1 % 1000000;
    int nn2=n2 % 1000000;
    return nn1 == nn2;
  }
 else {
    return true;
  }
}
