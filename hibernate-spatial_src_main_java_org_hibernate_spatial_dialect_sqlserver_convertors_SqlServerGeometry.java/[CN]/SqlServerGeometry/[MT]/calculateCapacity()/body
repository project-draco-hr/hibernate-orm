{
  int numPoints=getNumPoints();
  int prefixSize=6;
  if (isSinglePoint() || isSingleLineSegment()) {
    int capacity=prefixSize + 16 * numPoints;
    if (hasZValues()) {
      capacity+=8 * numPoints;
    }
    if (hasMValues()) {
      capacity+=8 * numPoints;
    }
    return capacity;
  }
  int pointSize=getPointByteSize();
  int size=prefixSize + 3 * 4;
  size+=getNumPoints() * pointSize;
  size+=getNumFigures() * Figure.getByteSize();
  size+=getNumShapes() * Shape.getByteSize();
  return size;
}
