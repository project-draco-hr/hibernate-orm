{
  final ClassLoader loader=Thread.currentThread().getContextClassLoader();
  final String propfileLoc=getClass().getCanonicalName() + ".properties";
  final URL propfile=loader.getResource(propfileLoc);
  if (propfile != null) {
    InputStream is=null;
    LOG.info("properties file found: " + propfile);
    try {
      loader.getResource(getClass().getCanonicalName());
      is=propfile.openStream();
      final PropertyFileReader reader=new PropertyFileReader(is);
      final Properties props=reader.getProperties();
      final String ccn=props.getProperty(CONNECTION_FINDER_PROPERTY);
      if (ccn != null) {
        try {
          final Class clazz=Thread.currentThread().getContextClassLoader().loadClass(ccn);
          final ConnectionFinder cf=(ConnectionFinder)clazz.newInstance();
          OracleJDBCTypeFactory.setConnectionFinder(cf);
          LOG.info("Setting ConnectionFinder to " + ccn);
        }
 catch (        ClassNotFoundException e) {
          LOG.warn("Tried to set ConnectionFinder to " + ccn + ", but class not found.");
        }
catch (        InstantiationException e) {
          LOG.warn("Tried to set ConnectionFinder to " + ccn + ", but couldn't instantiate.");
        }
catch (        IllegalAccessException e) {
          LOG.warn("Tried to set ConnectionFinder to " + ccn + ", but got IllegalAcessException on instantiation.");
        }
      }
    }
 catch (    IOException e) {
      LOG.warn("Problem reading properties file " + e);
    }
 finally {
      try {
        is.close();
      }
 catch (      Exception e) {
      }
    }
  }
}
