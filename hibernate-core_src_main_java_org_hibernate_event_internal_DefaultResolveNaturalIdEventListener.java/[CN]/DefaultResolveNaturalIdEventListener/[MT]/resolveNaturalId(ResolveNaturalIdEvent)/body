{
  final EntityPersister persister=event.getEntityPersister();
  if (LOG.isTraceEnabled()) {
    LOG.trace("Attempting to resolve: " + MessageHelper.infoString(persister,event.getNaturalIdValues(),event.getSession().getFactory()));
  }
  Serializable entityId=resolveFromSessionCache(event);
  if (entityId != null) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Resolved object in session cache: " + MessageHelper.infoString(persister,event.getNaturalIdValues(),event.getSession().getFactory()));
    }
    return entityId;
  }
  entityId=loadFromSecondLevelCache(event);
  if (entityId != null) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Resolved object in second-level cache: " + MessageHelper.infoString(persister,event.getNaturalIdValues(),event.getSession().getFactory()));
    }
    return entityId;
  }
  if (LOG.isTraceEnabled()) {
    LOG.trace("Object not resolved in any cache: " + MessageHelper.infoString(persister,event.getNaturalIdValues(),event.getSession().getFactory()));
  }
  return loadFromDatasource(event);
}
