{
  final SourceMock sequence=new SourceMock(1000,3,5);
  final Optimizer optimizer=OptimizerFactory.buildOptimizer(OptimizerFactory.POOL,Long.class,3,1);
  assertEquals(5,sequence.getTimesCalled());
  assertEquals(1000,sequence.getCurrentValue());
  Long next=(Long)optimizer.generate(sequence);
  assertEquals(1000,next.intValue());
  assertEquals((5 + 1),sequence.getTimesCalled());
  assertEquals((1000 + 3),sequence.getCurrentValue());
  next=(Long)optimizer.generate(sequence);
  assertEquals(1001,next.intValue());
  assertEquals((5 + 1),sequence.getTimesCalled());
  assertEquals((1000 + 3),sequence.getCurrentValue());
  next=(Long)optimizer.generate(sequence);
  assertEquals(1002,next.intValue());
  assertEquals((5 + 1),sequence.getTimesCalled());
  assertEquals((1000 + 3),sequence.getCurrentValue());
  next=(Long)optimizer.generate(sequence);
  assertEquals(1003,next.intValue());
  assertEquals((5 + 2),sequence.getTimesCalled());
  assertEquals((1000 + 6),sequence.getCurrentValue());
}
