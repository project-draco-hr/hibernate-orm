{
  Session session=openSession();
  Transaction transaction=session.beginTransaction();
  lastMonth=new GregorianCalendar();
  lastMonth.add(Calendar.MONTH,-1);
  nextMonth=new GregorianCalendar();
  nextMonth.add(Calendar.MONTH,1);
  sixMonthsAgo=new GregorianCalendar();
  sixMonthsAgo.add(Calendar.MONTH,-6);
  fourMonthsAgo=new GregorianCalendar();
  fourMonthsAgo.add(Calendar.MONTH,-4);
  Department dept=new Department();
  dept.setName("Sales");
  session.save(dept);
  deptId=dept.getId();
  entitiesToCleanUp.add(dept);
  Salesperson steve=new Salesperson();
  steve.setName("steve");
  steve.setRegion("APAC");
  steve.setHireDate(sixMonthsAgo.getTime());
  steve.setDepartment(dept);
  dept.getSalespersons().add(steve);
  Salesperson max=new Salesperson();
  max.setName("max");
  max.setRegion("EMEA");
  max.setHireDate(nextMonth.getTime());
  max.setDepartment(dept);
  dept.getSalespersons().add(max);
  session.save(steve);
  session.save(max);
  entitiesToCleanUp.add(steve);
  entitiesToCleanUp.add(max);
  steveId=steve.getId();
  Category cat1=new Category("test cat 1",lastMonth.getTime(),nextMonth.getTime());
  Category cat2=new Category("test cat 2",sixMonthsAgo.getTime(),fourMonthsAgo.getTime());
  Product product1=new Product();
  product1.setName("Acme Hair Gel");
  product1.setStockNumber(123);
  product1.setEffectiveStartDate(lastMonth.getTime());
  product1.setEffectiveEndDate(nextMonth.getTime());
  product1.addCategory(cat1);
  product1.addCategory(cat2);
  session.save(product1);
  entitiesToCleanUp.add(product1);
  prod1Id=product1.getId();
  Order order1=new Order();
  order1.setBuyer("gavin");
  order1.setRegion("APAC");
  order1.setPlacementDate(sixMonthsAgo.getTime());
  order1.setFulfillmentDate(fourMonthsAgo.getTime());
  order1.setSalesperson(steve);
  order1.addLineItem(product1,500);
  session.save(order1);
  entitiesToCleanUp.add(order1);
  Product product2=new Product();
  product2.setName("Acme Super-Duper DTO Factory");
  product2.setStockNumber(124);
  product2.setEffectiveStartDate(sixMonthsAgo.getTime());
  product2.setEffectiveEndDate(new Date());
  Category cat3=new Category("test cat 2",sixMonthsAgo.getTime(),new Date());
  product2.addCategory(cat3);
  session.save(product2);
  entitiesToCleanUp.add(product2);
  Product product3=new Product();
  product3.setName("Uncategorized product");
  session.save(product3);
  entitiesToCleanUp.add(product3);
  Order order2=new Order();
  order2.setBuyer("christian");
  order2.setRegion("EMEA");
  order2.setPlacementDate(lastMonth.getTime());
  order2.setSalesperson(steve);
  order2.addLineItem(product2,-1);
  session.save(order2);
  entitiesToCleanUp.add(order2);
  transaction.commit();
  session.close();
}
