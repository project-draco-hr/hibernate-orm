{
  PersistentCollection collection=event.getCollection();
  SessionImplementor source=event.getSession();
  CollectionEntry ce=source.getPersistenceContext().getCollectionEntry(collection);
  if (ce == null)   throw new HibernateException("collection was evicted");
  if (!collection.wasInitialized()) {
    if (LOG.isTraceEnabled())     LOG.initializingCollection(MessageHelper.collectionInfoString(ce.getLoadedPersister(),ce.getLoadedKey(),source.getFactory()));
    LOG.checkingSecondLevelCache();
    final boolean foundInCache=initializeCollectionFromCache(ce.getLoadedKey(),ce.getLoadedPersister(),collection,source);
    if (foundInCache)     LOG.collectionInitializedFromCache();
 else {
      LOG.collectionNotCached();
      ce.getLoadedPersister().initialize(ce.getLoadedKey(),source);
      LOG.collectionInitialized();
      if (source.getFactory().getStatistics().isStatisticsEnabled()) {
        source.getFactory().getStatisticsImplementor().fetchCollection(ce.getLoadedPersister().getRole());
      }
    }
  }
}
