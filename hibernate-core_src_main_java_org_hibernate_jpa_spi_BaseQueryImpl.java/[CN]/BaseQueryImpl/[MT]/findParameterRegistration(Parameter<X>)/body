{
  if (ParameterRegistration.class.isInstance(parameter)) {
    final ParameterRegistration<X> reg=(ParameterRegistration<X>)parameter;
    if (reg.getQuery() != this) {
      throw new IllegalArgumentException("Passed Parameter was from different Query");
    }
    return reg;
  }
 else {
    if (parameter.getName() != null) {
      return findParameterRegistration(parameter.getName());
    }
 else     if (parameter.getPosition() != null) {
      return findParameterRegistration(parameter.getPosition());
    }
  }
  throw new IllegalArgumentException("Unable to resolve incoming parameter [" + parameter + "] to registration");
}
