{
  if (transactionManager == null) {
    transactionManager=new UserTransactionManager();
    try {
      transactionManager.init();
    }
 catch (    Exception e) {
      throw new JtaPlatformException("Unable to init Atomikos UserTransactionManager",e);
    }
  }
  if (dataSourceBean == null) {
    dataSourceBean=new AtomikosNonXADataSourceBean();
    dataSourceBean.setUniqueResourceName("h2");
    dataSourceBean.setDriverClassName(ConnectionProviderBuilder.DRIVER);
    dataSourceBean.setUrl(ConnectionProviderBuilder.URL);
    dataSourceBean.setUser(ConnectionProviderBuilder.USER);
    dataSourceBean.setPassword(ConnectionProviderBuilder.PASS);
    dataSourceBean.setPoolSize(3);
    try {
      dataSourceBean.init();
    }
 catch (    Exception e) {
      throw new JtaPlatformException("Unable to init Atomikos DataSourceBean",e);
    }
  }
}
