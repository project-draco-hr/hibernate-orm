{
  Configuration cfg=CacheTestUtil.buildConfiguration("",JBossCacheRegionFactory.class,true,true);
  JBossCacheRegionFactory regionFactory=CacheTestUtil.startRegionFactory(cfg,getCacheTestSupport());
  CacheInstanceManager mgr=regionFactory.getCacheInstanceManager();
  assertTrue("Correct default CacheInstanceManager type",mgr instanceof SharedCacheInstanceManager);
  Cache cache=mgr.getEntityCacheInstance();
  assertTrue("entity cache exists",cache != null);
  assertEquals("Used correct config","TestSharedCache",cache.getConfiguration().getClusterName());
  assertEquals("Cache started",CacheStatus.STARTED,cache.getCacheStatus());
  CacheTestUtil.stopRegionFactory(regionFactory,getCacheTestSupport());
  assertEquals("Cache destroyed",CacheStatus.DESTROYED,cache.getCacheStatus());
}
