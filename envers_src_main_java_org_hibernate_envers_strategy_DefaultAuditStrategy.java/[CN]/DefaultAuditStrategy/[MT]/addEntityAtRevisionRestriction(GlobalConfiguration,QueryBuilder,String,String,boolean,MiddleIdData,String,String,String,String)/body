{
  Parameters rootParameters=rootQueryBuilder.getRootParameters();
  QueryBuilder maxERevQb=rootQueryBuilder.newSubQueryBuilder(idData.getAuditEntityName(),alias2);
  maxERevQb.addProjection("max",revisionPropertyPath,false);
  Parameters maxERevQbParameters=maxERevQb.getRootParameters();
  maxERevQbParameters.addWhereWithNamedParam(revisionPropertyPath,"<=","revision");
  idData.getOriginalMapper().addIdsEqualToQuery(maxERevQbParameters,alias1 + "." + originalIdPropertyName,alias2 + "." + originalIdPropertyName);
  String subqueryOperator=globalCfg.getCorrelatedSubqueryOperator();
  rootParameters.addWhere(revisionProperty,addAlias,subqueryOperator,maxERevQb);
}
