{
  if (session.getFactory().getSessionFactoryOptions().isWrapResultSetsEnabled()) {
    try {
      if (log.isDebugEnabled()) {
        log.debugf("Wrapping result set [%s]",rs);
      }
      ResultSetWrapper wrapper=session.getFactory().getServiceRegistry().getService(JdbcServices.class).getResultSetWrapper();
synchronized (this) {
        return wrapper.wrap(rs,retreiveColumnNameToIndexCache(rs));
      }
    }
 catch (    SQLException e) {
      log.unableToWrapResultSet(e);
      return rs;
    }
  }
 else {
    return rs;
  }
}
