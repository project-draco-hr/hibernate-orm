{
  config=new Configuration();
  URL url=Thread.currentThread().getContextClassLoader().getResource(getHibernateConfigurationFileName());
  config.configure(new File(url.toURI()));
  if (auditStrategy != null && !"".equals(auditStrategy)) {
    config.setProperty("org.hibernate.envers.audit_strategy",auditStrategy);
  }
  this.initMappings();
  serviceRegistryHolder=new ServiceRegistryHolder(Environment.getProperties());
  sessionFactory=config.buildSessionFactory(serviceRegistryHolder.getServiceRegistry());
}
