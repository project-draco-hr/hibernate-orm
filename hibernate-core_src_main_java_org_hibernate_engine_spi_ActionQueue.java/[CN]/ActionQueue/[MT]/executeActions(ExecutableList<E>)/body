{
  try {
    for (    E e : list) {
      try {
        e.execute();
      }
  finally {
        if (e.getBeforeTransactionCompletionProcess() != null) {
          if (beforeTransactionProcesses == null) {
            beforeTransactionProcesses=new BeforeTransactionCompletionProcessQueue(session);
          }
          beforeTransactionProcesses.register(e.getBeforeTransactionCompletionProcess());
        }
        if (e.getAfterTransactionCompletionProcess() != null) {
          if (afterTransactionProcesses == null) {
            afterTransactionProcesses=new AfterTransactionCompletionProcessQueue(session);
          }
          afterTransactionProcesses.register(e.getAfterTransactionCompletionProcess());
        }
      }
    }
  }
  finally {
    if (session.getFactory().getSessionFactoryOptions().isQueryCacheEnabled()) {
      Set<Serializable> propertySpaces=list.getQuerySpaces();
      invalidateSpaces(propertySpaces.toArray(new Serializable[propertySpaces.size()]));
    }
  }
  list.clear();
  session.getJdbcCoordinator().executeBatch();
}
