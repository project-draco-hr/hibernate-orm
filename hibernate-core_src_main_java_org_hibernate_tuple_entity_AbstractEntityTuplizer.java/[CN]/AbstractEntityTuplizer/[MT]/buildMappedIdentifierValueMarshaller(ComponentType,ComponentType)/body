{
  boolean wereAllEquivalent=true;
  for (int i=0; i < virtualIdComponent.getSubtypes().length; i++) {
    if (virtualIdComponent.getSubtypes()[i].isEntityType() && !mappedIdClassComponentType.getSubtypes()[i].isEntityType()) {
      wereAllEquivalent=false;
      break;
    }
  }
  return wereAllEquivalent ? new NormalMappedIdentifierValueMarshaller(virtualIdComponent,mappedIdClassComponentType) : new IncrediblySillyJpaMapsIdMappedIdentifierValueMarshaller(virtualIdComponent,mappedIdClassComponentType);
}
