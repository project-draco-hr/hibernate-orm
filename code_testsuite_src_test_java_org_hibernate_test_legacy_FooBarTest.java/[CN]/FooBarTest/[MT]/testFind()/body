{
  Session s=openSession();
  Transaction txn=s.beginTransaction();
  Bar bar=new Bar();
  s.save(bar);
  bar.setBarString("bar bar");
  bar.setString("xxx");
  Foo foo=new Foo();
  s.save(foo);
  foo.setString("foo bar");
  s.save(new Foo());
  s.save(new Bar());
  List list1=s.find("select foo from Foo foo where foo.string='foo bar'");
  assertTrue("find size",list1.size() == 1);
  assertTrue("find ==",list1.get(0) == foo);
  List list2=s.find("from Foo foo order by foo.string, foo.date");
  assertTrue("find size",list2.size() == 4);
  list1=s.find("from Foo foo where foo.class='B'");
  assertTrue("class special property",list1.size() == 2);
  list1=s.find("from Foo foo where foo.class=Bar");
  assertTrue("class special property",list1.size() == 2);
  list1=s.find("from Foo foo where foo.class=Bar");
  list2=s.find("select bar from Bar bar, Foo foo where bar.string = foo.string and not bar=foo");
  assertTrue("class special property",list1.size() == 2);
  assertTrue("select from a subclass",list2.size() == 1);
  Trivial t=new Trivial();
  s.save(t);
  txn.commit();
  s.close();
  s=openSession();
  txn=s.beginTransaction();
  list1=s.find("from Foo foo where foo.string='foo bar'");
  assertTrue("find size",list1.size() == 1);
  assertTrue("find equals",((Foo)list1.get(0)).equalsFoo(foo));
  list2=s.find("select foo from Foo foo");
  assertTrue("find size",list2.size() == 5);
  List list3=s.find("from Bar bar where bar.barString='bar bar'");
  assertTrue("find size",list3.size() == 1);
  assertTrue("find same instance",list2.contains(list1.get(0)) && list2.contains(list2.get(0)));
  assertTrue(s.find("from Trivial").size() == 1);
  s.delete("from Trivial");
  list2=s.find("from Foo foo where foo.date = ?",new java.sql.Date(123),Hibernate.DATE);
  assertTrue("find by date",list2.size() == 4);
  Iterator iter=list2.iterator();
  while (iter.hasNext()) {
    s.delete(iter.next());
  }
  list2=s.find("from Foo foo");
  assertTrue("find deleted",list2.size() == 0);
  txn.commit();
  s.close();
}
