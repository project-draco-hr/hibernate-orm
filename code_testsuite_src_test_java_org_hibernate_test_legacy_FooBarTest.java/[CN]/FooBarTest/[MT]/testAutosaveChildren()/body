{
  Session s=openSession();
  Transaction t=s.beginTransaction();
  Baz baz=new Baz();
  Set bars=new HashSet();
  baz.setCascadingBars(bars);
  s.save(baz);
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  baz=(Baz)s.load(Baz.class,baz.getCode());
  baz.getCascadingBars().add(new Bar());
  baz.getCascadingBars().add(new Bar());
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  baz=(Baz)s.load(Baz.class,baz.getCode());
  assertTrue(baz.getCascadingBars().size() == 2);
  assertTrue(baz.getCascadingBars().iterator().next() != null);
  baz.getCascadingBars().clear();
  s.flush();
  assertTrue(s.find("from Bar bar").size() == 0);
  s.delete(baz);
  t.commit();
  s.close();
}
