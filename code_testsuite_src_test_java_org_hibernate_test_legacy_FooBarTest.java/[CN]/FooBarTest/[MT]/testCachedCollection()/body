{
  Session s=openSession();
  Baz baz=new Baz();
  baz.setDefaults();
  s.save(baz);
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  baz=(Baz)s.load(Baz.class,baz.getCode());
  ((FooComponent)baz.getTopComponents().get(0)).setCount(99);
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  baz=(Baz)s.load(Baz.class,baz.getCode());
  assertTrue(((FooComponent)baz.getTopComponents().get(0)).getCount() == 99);
  s.delete(baz);
  s.flush();
  s.connection().commit();
  s.close();
}
