{
  if (object == null) {
    return null;
  }
  try {
    if (object instanceof Blob) {
      return WKB.fromWKB(toByteArray((Blob)object),getGeometryFactory());
    }
 else     if (object instanceof byte[]) {
      return geometryFromByteArray((byte[])object);
    }
 else     if (object instanceof Envelope) {
      return getGeometryFactory().toGeometry((Envelope)object);
    }
 else {
      throw new IllegalArgumentException("Can't convert database object of type " + object.getClass().getCanonicalName());
    }
  }
 catch (  Exception e) {
    LOG.warn("Could not convert database object to a JTS Geometry.");
    throw new HibernateException(e);
  }
}
