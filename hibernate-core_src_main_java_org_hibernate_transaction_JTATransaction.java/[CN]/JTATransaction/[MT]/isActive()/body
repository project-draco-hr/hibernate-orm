{
  if (!begun || commitFailed || commitSucceeded) {
    return false;
  }
  final int status;
  try {
    status=userTransaction.getStatus();
  }
 catch (  SystemException se) {
    LOG.error(LOG.unableToDetermineTransactionStatus(),se);
    throw new TransactionException("Could not determine transaction status: ",se);
  }
  if (status == Status.STATUS_UNKNOWN)   throw new TransactionException("Could not determine transaction status");
  return status == Status.STATUS_ACTIVE;
}
