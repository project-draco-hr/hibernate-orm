{
  try {
    entityManagerFactory.unwrap(EntityManagerFactoryImpl.class);
    fail("It should not be possible to unwrap to an internal type.");
  }
 catch (  PersistenceException e) {
  }
  EntityManagerFactoryImpl entityManager=entityManagerFactory.unwrap(EntityManagerFactoryImpl.class);
  assertNotNull("Unwrapping to EntityManagerFactoryImpl should be ok",entityManager);
}
