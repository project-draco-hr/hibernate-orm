{
  if (targetDescriptor.getTargetTypes().isEmpty()) {
    return;
  }
  final JdbcContext jdbcContext=tool.resolveJdbcContext(options.getConfigurationValues());
  final JdbcConnectionContextSharedImpl connectionContext=new JdbcConnectionContextSharedImpl(jdbcContext.getJdbcConnectionAccess(),jdbcContext.getSqlStatementLogger(),targetDescriptor.getTargetTypes().contains(TargetType.DATABASE));
  try {
    final DatabaseInformation databaseInformation=Helper.buildDatabaseInformation(tool.getServiceRegistry(),connectionContext,metadata.getDatabase().getDefaultNamespace().getName());
    final GenerationTarget[] targets=tool.buildGenerationTargets(targetDescriptor,connectionContext,options.getConfigurationValues());
    try {
      doMigration(metadata,databaseInformation,options,jdbcContext.getDialect(),targets);
    }
  finally {
      try {
        databaseInformation.cleanup();
      }
 catch (      Exception e) {
        log.debug("Problem releasing DatabaseInformation : " + e.getMessage());
      }
    }
  }
  finally {
    connectionContext.reallyRelease();
  }
}
