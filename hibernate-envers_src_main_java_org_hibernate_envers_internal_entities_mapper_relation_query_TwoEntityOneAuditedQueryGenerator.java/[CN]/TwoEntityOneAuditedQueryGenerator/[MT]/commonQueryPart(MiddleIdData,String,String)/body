{
  final String eeOriginalIdPropertyPath=MIDDLE_ENTITY_ALIAS + "." + originalIdPropertyName;
  final QueryBuilder qb=new QueryBuilder(versionsMiddleEntityName,MIDDLE_ENTITY_ALIAS);
  qb.addFrom(referencedIdData.getEntityName(),REFERENCED_ENTITY_ALIAS);
  qb.addProjection("new list",MIDDLE_ENTITY_ALIAS + ", " + REFERENCED_ENTITY_ALIAS,false,false);
  final Parameters rootParameters=qb.getRootParameters();
  referencedIdData.getPrefixedMapper().addIdsEqualToQuery(rootParameters,eeOriginalIdPropertyPath,referencedIdData.getOriginalMapper(),REFERENCED_ENTITY_ALIAS);
  referencingIdData.getPrefixedMapper().addNamedIdEqualsToQuery(rootParameters,originalIdPropertyName,true);
  return qb;
}
