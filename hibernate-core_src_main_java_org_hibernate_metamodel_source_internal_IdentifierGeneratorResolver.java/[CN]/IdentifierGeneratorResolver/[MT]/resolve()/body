{
  for (  EntityBinding entityBinding : metadata.getEntityBindings()) {
    if (entityBinding.isRoot()) {
      Properties properties=new Properties();
      properties.putAll(metadata.getServiceRegistry().getService(ConfigurationService.class).getSettings());
      if (!properties.contains(AvailableSettings.PREFER_POOLED_VALUES_LO)) {
        properties.put(AvailableSettings.PREFER_POOLED_VALUES_LO,"false");
      }
      if (!properties.contains(PersistentIdentifierGenerator.IDENTIFIER_NORMALIZER)) {
        properties.put(PersistentIdentifierGenerator.IDENTIFIER_NORMALIZER,new ObjectNameNormalizerImpl(metadata));
      }
      entityBinding.getHierarchyDetails().getEntityIdentifier().createIdentifierGenerator(metadata.getIdentifierGeneratorFactory(),properties);
    }
  }
}
