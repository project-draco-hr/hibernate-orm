{
  try {
    return JTAHelper.isTransactionInProgress(DummyTransactionManager.INSTANCE.getCurrent()) && !JTAHelper.isMarkedForRollback(DummyTransactionManager.INSTANCE.getCurrent());
  }
 catch (  SystemException e) {
    throw new HibernateException(e);
  }
}
