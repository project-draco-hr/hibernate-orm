{
  if (!proxy.getHibernateLazyInitializer().isUninitialized() || activeProxySession(proxy)) {
    return proxy.getHibernateLazyInitializer().getImplementation();
  }
  final SessionImplementor sessionImplementor=proxy.getHibernateLazyInitializer().getSession();
  final Session tempSession=sessionImplementor == null ? sessionFactoryImplementor.openTemporarySession() : sessionImplementor.getFactory().openTemporarySession();
  try {
    return tempSession.get(proxy.getHibernateLazyInitializer().getEntityName(),proxy.getHibernateLazyInitializer().getIdentifier());
  }
  finally {
    tempSession.close();
  }
}
