{
  final Type type=expectedType == null ? heuristicType : Number.class.isAssignableFrom(heuristicType.getReturnedClass()) ? heuristicType : expectedType;
  try {
    final LiteralType literalType=(LiteralType)type;
    final Dialect dialect=factory.getDialect();
    return literalType.objectToSQLString(constantValue,dialect);
  }
 catch (  Exception t) {
    throw new QueryException(QueryTranslator.ERROR_CANNOT_FORMAT_LITERAL + constantExpression,t);
  }
}
