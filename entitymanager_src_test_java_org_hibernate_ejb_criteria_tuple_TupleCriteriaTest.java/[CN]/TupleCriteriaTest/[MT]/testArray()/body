{
  EntityManager em=factory.createEntityManager();
  Customer c1=new Customer();
  c1.setAge(18);
  c1.setName("Bob");
  em.getTransaction().begin();
  em.persist(c1);
  em.flush();
  final CriteriaBuilder cb=em.getCriteriaBuilder();
  CriteriaQuery<Object[]> q=cb.createQuery(Object[].class);
  Root<Customer> c=q.from(Customer.class);
  q.select(cb.array(c.get(Customer_.name),c.get(Customer_.age)));
  List<Object[]> result=em.createQuery(q).getResultList();
  assertEquals(1,result.size());
  assertEquals(c1.getName(),result.get(0)[0]);
  assertEquals(c1.getAge(),result.get(0)[1]);
  em.getTransaction().rollback();
  em.close();
}
