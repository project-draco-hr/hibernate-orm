{
  SQLExceptionConversionDelegate delegate=super.buildSQLExceptionConversionDelegate();
  if (delegate == null) {
    delegate=new SQLExceptionConversionDelegate(){
      @Override public JDBCException convert(      SQLException sqlException,      String message,      String sql){
        final int errorCode=JdbcExceptionHelper.extractErrorCode(sqlException);
        if (40001 == errorCode) {
          return new LockAcquisitionException(message,sqlException,sql);
        }
        if (50200 == errorCode) {
          return new PessimisticLockException(message,sqlException,sql);
        }
        if (90006 == errorCode) {
          final String constraintName=getViolatedConstraintNameExtracter().extractConstraintName(sqlException);
          return new ConstraintViolationException(message,sqlException,sql,constraintName);
        }
        return null;
      }
    }
;
  }
  return delegate;
}
