{
  IdGenerator idGen=new IdGenerator();
  if (mappings.getSchemaName() != null) {
    idGen.addParam(PersistentIdentifierGenerator.SCHEMA,mappings.getSchemaName());
  }
  if (mappings.getCatalogName() != null) {
    idGen.addParam(PersistentIdentifierGenerator.CATALOG,mappings.getCatalogName());
  }
  if (ann == null) {
    idGen=null;
  }
 else   if (ann instanceof TableGenerator) {
    TableGenerator tabGen=(TableGenerator)ann;
    idGen.setName(tabGen.name());
    idGen.setIdentifierGeneratorStrategy(MultipleHiLoPerTableGenerator.class.getName());
    if (!BinderHelper.isDefault(tabGen.table())) {
      idGen.addParam(MultipleHiLoPerTableGenerator.ID_TABLE,tabGen.table());
    }
    if (!BinderHelper.isDefault(tabGen.catalog())) {
      idGen.addParam(MultipleHiLoPerTableGenerator.CATALOG,tabGen.catalog());
    }
    if (!BinderHelper.isDefault(tabGen.schema())) {
      idGen.addParam(MultipleHiLoPerTableGenerator.SCHEMA,tabGen.schema());
    }
    if (!BinderHelper.isDefault(tabGen.pkColumnName())) {
      idGen.addParam(MultipleHiLoPerTableGenerator.PK_COLUMN_NAME,tabGen.pkColumnName());
    }
    if (!BinderHelper.isDefault(tabGen.valueColumnName())) {
      idGen.addParam(MultipleHiLoPerTableGenerator.VALUE_COLUMN_NAME,tabGen.valueColumnName());
    }
    if (!BinderHelper.isDefault(tabGen.pkColumnValue())) {
      idGen.addParam(MultipleHiLoPerTableGenerator.PK_VALUE_NAME,tabGen.pkColumnValue());
    }
    idGen.addParam(TableHiLoGenerator.MAX_LO,String.valueOf(tabGen.allocationSize() - 1));
    log.debug("Add table generator with name: {}",idGen.getName());
  }
 else   if (ann instanceof SequenceGenerator) {
    SequenceGenerator seqGen=(SequenceGenerator)ann;
    idGen.setName(seqGen.name());
    idGen.setIdentifierGeneratorStrategy("seqhilo");
    if (!BinderHelper.isDefault(seqGen.sequenceName())) {
      idGen.addParam(org.hibernate.id.SequenceGenerator.SEQUENCE,seqGen.sequenceName());
    }
    if (seqGen.initialValue() != 1) {
      log.warn("Hibernate does not support SequenceGenerator.initialValue()");
    }
    idGen.addParam(SequenceHiLoGenerator.MAX_LO,String.valueOf(seqGen.allocationSize() - 1));
    log.debug("Add sequence generator with name: {}",idGen.getName());
  }
 else   if (ann instanceof GenericGenerator) {
    GenericGenerator genGen=(GenericGenerator)ann;
    idGen.setName(genGen.name());
    idGen.setIdentifierGeneratorStrategy(genGen.strategy());
    Parameter[] params=genGen.parameters();
    for (    Parameter parameter : params) {
      idGen.addParam(parameter.name(),parameter.value());
    }
    log.debug("Add generic generator with name: {}",idGen.getName());
  }
 else {
    throw new AssertionFailure("Unknown Generator annotation: " + ann);
  }
  return idGen;
}
