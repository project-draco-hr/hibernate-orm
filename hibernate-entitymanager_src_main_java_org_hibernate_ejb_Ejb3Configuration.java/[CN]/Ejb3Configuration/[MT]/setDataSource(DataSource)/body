{
  if (ds != null) {
    Map cpInjection=new HashMap();
    cpInjection.put("dataSource",ds);
    ((InjectionSettingsFactory)settingsFactory).setConnectionProviderInjectionData(cpInjection);
    this.setProperty(Environment.CONNECTION_PROVIDER,InjectedDataSourceConnectionProvider.class.getName());
  }
}
