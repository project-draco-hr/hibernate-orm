{
  clearCounts();
  Session s=openSession();
  Transaction tx=s.beginTransaction();
  Employer emp=new Employer();
  s.persist(emp);
  Node node=new Node("foo");
  Node parent=new Node("bar");
  parent.addChild(node);
  s.persist(parent);
  tx.commit();
  s.close();
  s=openSession();
  tx=s.beginTransaction();
  emp=(Employer)s.get(Employer.class,emp.getId());
  assertTrue(Hibernate.isInitialized(emp));
  assertFalse(Hibernate.isInitialized(emp.getEmployees()));
  node=(Node)s.get(Node.class,node.getName());
  assertTrue(Hibernate.isInitialized(node));
  assertFalse(Hibernate.isInitialized(node.getChildren()));
  assertFalse(Hibernate.isInitialized(node.getParent()));
  assertNull(s.get(Node.class,"xyz"));
  tx.commit();
  s.close();
  s=openSession();
  tx=s.beginTransaction();
  emp=(Employer)s.load(Employer.class,emp.getId());
  emp.getId();
  assertFalse(Hibernate.isInitialized(emp));
  node=(Node)s.load(Node.class,node.getName());
  assertEquals(node.getName(),"foo");
  assertFalse(Hibernate.isInitialized(node));
  tx.commit();
  s.close();
  s=openSession();
  tx=s.beginTransaction();
  emp=(Employer)s.get("org.hibernate.test.ops.Employer",emp.getId());
  assertTrue(Hibernate.isInitialized(emp));
  node=(Node)s.get("org.hibernate.test.ops.Node",node.getName());
  assertTrue(Hibernate.isInitialized(node));
  tx.commit();
  s.close();
  s=openSession();
  tx=s.beginTransaction();
  emp=(Employer)s.load("org.hibernate.test.ops.Employer",emp.getId());
  emp.getId();
  assertFalse(Hibernate.isInitialized(emp));
  node=(Node)s.load("org.hibernate.test.ops.Node",node.getName());
  assertEquals(node.getName(),"foo");
  assertFalse(Hibernate.isInitialized(node));
  tx.commit();
  s.close();
  assertFetchCount(0);
}
