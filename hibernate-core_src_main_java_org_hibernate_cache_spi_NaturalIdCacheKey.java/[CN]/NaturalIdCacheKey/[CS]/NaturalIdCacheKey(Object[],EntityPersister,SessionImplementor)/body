{
  this.entityName=persister.getRootEntityName();
  this.tenantId=session.getTenantIdentifier();
  final Serializable[] disassembledNaturalId=new Serializable[naturalIdValues.length];
  final StringBuilder toStringBuilder=new StringBuilder(entityName).append("##NaturalId[");
  final SessionFactoryImplementor factory=session.getFactory();
  final int[] naturalIdPropertyIndexes=persister.getNaturalIdentifierProperties();
  final Type[] propertyTypes=persister.getPropertyTypes();
  final int prime=31;
  int result=1;
  result=prime * result + ((this.entityName == null) ? 0 : this.entityName.hashCode());
  result=prime * result + ((this.tenantId == null) ? 0 : this.tenantId.hashCode());
  for (int i=0; i < naturalIdValues.length; i++) {
    final Type type=propertyTypes[naturalIdPropertyIndexes[i]];
    final Object value=naturalIdValues[i];
    result=prime * result + type.getHashCode(value,factory);
    disassembledNaturalId[i]=type.disassemble(value,session,null);
    toStringBuilder.append(type.toLoggableString(value,factory));
    if (i + 1 < naturalIdValues.length) {
      toStringBuilder.append(", ");
    }
  }
  toStringBuilder.append("]");
  this.naturalIdValues=disassembledNaturalId;
  this.hashCode=result;
  this.toString=toStringBuilder.toString();
}
