{
  Session s=openSession();
  Transaction t=s.beginTransaction();
  final double HEIGHT_INCHES=73;
  final double HEIGHT_CENTIMETERS=HEIGHT_INCHES * 2.54d;
  Person p=new Person();
  p.setName("Emmanuel");
  p.setSex('M');
  p.setHeightInches(HEIGHT_INCHES);
  s.persist(p);
  final double PASSWORD_EXPIRY_WEEKS=4;
  final double PASSWORD_EXPIRY_DAYS=PASSWORD_EXPIRY_WEEKS * 7d;
  Employee e=new Employee();
  e.setName("Steve");
  e.setSex('M');
  e.setTitle("Mr");
  e.setPasswordExpiryDays(PASSWORD_EXPIRY_DAYS);
  s.persist(e);
  s.flush();
  Double heightViaSql=(Double)s.createSQLQuery("select height_centimeters from JPerson where name='Emmanuel'").uniqueResult();
  assertEquals(HEIGHT_CENTIMETERS,heightViaSql,0.01d);
  Double expiryViaSql=(Double)s.createSQLQuery("select pwd_expiry_weeks from JEmployee where person_id=?").setLong(0,e.getId()).uniqueResult();
  assertEquals(PASSWORD_EXPIRY_WEEKS,expiryViaSql,0.01d);
  Double heightViaHql=(Double)s.createQuery("select p.heightInches from Person p where p.name = 'Emmanuel'").uniqueResult();
  assertEquals(HEIGHT_INCHES,heightViaHql,0.01d);
  Double expiryViaHql=(Double)s.createQuery("select e.passwordExpiryDays from Employee e where e.name = 'Steve'").uniqueResult();
  assertEquals(PASSWORD_EXPIRY_DAYS,expiryViaHql,0.01d);
  p=(Person)s.createCriteria(Person.class).add(Restrictions.between("heightInches",HEIGHT_INCHES - 0.01d,HEIGHT_INCHES + 0.01d)).uniqueResult();
  assertEquals(HEIGHT_INCHES,p.getHeightInches(),0.01d);
  e=(Employee)s.createCriteria(Employee.class).add(Restrictions.between("passwordExpiryDays",PASSWORD_EXPIRY_DAYS - 0.01d,PASSWORD_EXPIRY_DAYS + 0.01d)).uniqueResult();
  assertEquals(PASSWORD_EXPIRY_DAYS,e.getPasswordExpiryDays(),0.01d);
  p=(Person)s.createQuery("from Person p where p.heightInches between ? and ?").setDouble(0,HEIGHT_INCHES - 0.01d).setDouble(1,HEIGHT_INCHES + 0.01d).uniqueResult();
  assertEquals(HEIGHT_INCHES,p.getHeightInches(),0.01d);
  e=(Employee)s.createQuery("from Employee e where e.passwordExpiryDays between ? and ?").setDouble(0,PASSWORD_EXPIRY_DAYS - 0.01d).setDouble(1,PASSWORD_EXPIRY_DAYS + 0.01d).uniqueResult();
  assertEquals(PASSWORD_EXPIRY_DAYS,e.getPasswordExpiryDays(),0.01d);
  p.setHeightInches(1);
  e.setPasswordExpiryDays(7);
  s.flush();
  heightViaSql=(Double)s.createSQLQuery("select height_centimeters from JPerson where name='Emmanuel'").uniqueResult();
  assertEquals(2.54d,heightViaSql,0.01d);
  expiryViaSql=(Double)s.createSQLQuery("select pwd_expiry_weeks from JEmployee where person_id=?").setLong(0,e.getId()).uniqueResult();
  assertEquals(1d,expiryViaSql,0.01d);
  s.delete(p);
  s.delete(e);
  t.commit();
  s.close();
}
