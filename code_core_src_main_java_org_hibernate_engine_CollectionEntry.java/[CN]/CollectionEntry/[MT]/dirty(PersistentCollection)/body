{
  boolean forceDirty=collection.wasInitialized() && !collection.isDirty() && getLoadedPersister() != null && getLoadedPersister().isMutable() && (collection.isDirectlyAccessible() || getLoadedPersister().getElementType().isMutable()) && !collection.equalsSnapshot(getLoadedPersister());
  if (forceDirty) {
    collection.dirty();
  }
}
