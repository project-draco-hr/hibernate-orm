{
  if (maxBatchSize > 1) {
    int[] batchSizesToCreate=ArrayHelper.getBatchSizes(maxBatchSize);
    Loader[] loadersToCreate=new Loader[batchSizesToCreate.length];
    for (int i=0; i < batchSizesToCreate.length; i++) {
      loadersToCreate[i]=new EntityLoader(persister,batchSizesToCreate[i],lockMode,factory,enabledFilters);
    }
    return new BatchingEntityLoader(persister,batchSizesToCreate,loadersToCreate);
  }
 else {
    return new EntityLoader(persister,lockMode,factory,enabledFilters);
  }
}
