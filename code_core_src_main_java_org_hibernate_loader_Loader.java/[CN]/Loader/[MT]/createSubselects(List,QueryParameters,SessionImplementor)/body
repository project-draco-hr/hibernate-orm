{
  if (keys.size() > 1) {
    Set[] keySets=transpose(keys);
    Map namedParameterLocMap=buildNamedParameterLocMap(queryParameters);
    final Loadable[] loadables=getEntityPersisters();
    final String[] aliases=getAliases();
    final Iterator iter=keys.iterator();
    while (iter.hasNext()) {
      final EntityKey[] rowKeys=(EntityKey[])iter.next();
      for (int i=0; i < rowKeys.length; i++) {
        if (rowKeys[i] != null && loadables[i].hasSubselectLoadableCollections()) {
          SubselectFetch subselectFetch=new SubselectFetch(aliases[i],loadables[i],queryParameters,keySets[i],namedParameterLocMap);
          session.getPersistenceContext().getBatchFetchQueue().addSubselect(rowKeys[i],subselectFetch);
        }
      }
    }
  }
}
