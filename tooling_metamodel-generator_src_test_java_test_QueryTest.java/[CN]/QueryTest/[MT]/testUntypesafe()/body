{
  CriteriaQuery<Tuple> q=qb.createTupleQuery();
  Root<Order> order=q.from(Order.class);
  Join<Item,Product> product=order.join("items").join("product");
  Path<BigDecimal> price=product.get("price");
  Path<Boolean> filled=order.get("filled");
  Path<Date> date=order.get("date");
  q.select(qb.tuple(order,product)).where(qb.and(qb.gt(price,100.00),qb.not(filled))).orderBy(qb.asc(price),qb.desc(date));
}
