{
  generateTestFiles();
  if (!workPackageDir.exists()) {
    System.err.println(workPackageDir.getAbsoluteFile() + " not found");
    return;
  }
  long start=System.currentTimeMillis();
  Configuration configuration=buildConfigurationFromCacheableFiles(workPackageDir,workPackageDir.list(new FilenameFilter(){
    public boolean accept(    File dir,    String name){
      return name.endsWith(".hbm.xml");
    }
  }
));
  SessionFactory factory=configuration.buildSessionFactory();
  long initial=System.currentTimeMillis() - start;
  factory.close();
  start=System.currentTimeMillis();
  configuration=buildConfigurationFromCacheableFiles(workPackageDir,workPackageDir.list(new FilenameFilter(){
    public boolean accept(    File dir,    String name){
      return name.endsWith(".hbm.xml");
    }
  }
));
  factory=configuration.buildSessionFactory();
  long subsequent=System.currentTimeMillis() - start;
  Session session=factory.openSession();
  session.beginTransaction();
  session.createQuery("from Test1").list();
  session.getTransaction().commit();
  session.close();
  factory.close();
  System.err.println("Initial SessionFactory load time : " + initial);
  System.err.println("Subsequent SessionFactory load time : " + subsequent);
}
