{
  Map.Entry<Integer,AtomicInteger> first=familyIds.firstEntry();
  Map.Entry<Integer,AtomicInteger> last=familyIds.lastEntry();
  if (first == null || last == null)   return 0;
  Map.Entry<Integer,AtomicInteger> ceiling=familyIds.ceilingEntry(random.nextInt(first.getKey(),last.getKey() + 1));
  return ceiling == null ? 0 : ceiling.getKey();
}
