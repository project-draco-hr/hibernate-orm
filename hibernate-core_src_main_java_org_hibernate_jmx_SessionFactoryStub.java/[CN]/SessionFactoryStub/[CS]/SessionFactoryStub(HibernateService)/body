{
  this.service=service;
  this.name=service.getJndiName();
  try {
    uuid=(String)UUID_GENERATOR.generate(null,null);
  }
 catch (  Exception e) {
    throw new AssertionFailure("Could not generate UUID");
  }
  SessionFactoryRegistry.INSTANCE.addSessionFactory(uuid,name,ConfigurationHelper.getBoolean(AvailableSettings.SESSION_FACTORY_NAME_IS_JNDI,service.getProperties(),true),this,new JndiServiceImpl(service.getProperties()));
}
