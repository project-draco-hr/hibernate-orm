{
  if (this.session != null || this.persister != null) {
    throw new IllegalStateException("already attached to a session.");
  }
  if (session != null) {
    this.session=session;
    this.persister=session.getFactory().getMetamodel().entityPersister(entityName);
    this.instance=session.getPersistenceContext().getEntity(session.generateEntityKey(id,persister));
  }
}
