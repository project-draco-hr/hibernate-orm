{
  this.owner=owner;
  this.connectionManager=new ConnectionManagerImpl(owner.getFactory(),this,owner.getConnectionReleaseMode(),connection,interceptor);
  final boolean registerSynchronization=owner.isAutoCloseSessionEnabled() || owner.isFlushBeforeCompletionEnabled() || owner.getConnectionReleaseMode() == ConnectionReleaseMode.AFTER_TRANSACTION;
  if (registerSynchronization) {
    registerSynchronizationIfPossible();
  }
}
