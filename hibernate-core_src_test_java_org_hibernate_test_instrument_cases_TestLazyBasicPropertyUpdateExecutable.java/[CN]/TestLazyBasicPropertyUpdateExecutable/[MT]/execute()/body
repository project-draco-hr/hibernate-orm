{
  Session s=getFactory().openSession();
  Transaction t=s.beginTransaction();
  Owner o=new Owner();
  Document doc=new Document();
  Folder fol=new Folder();
  o.setName("gavin");
  doc.setName("Hibernate in Action");
  doc.setSummary("blah");
  doc.updateText("blah blah");
  fol.setName("books");
  doc.setOwner(o);
  doc.setFolder(fol);
  fol.getDocuments().add(doc);
  Assert.assertTrue(Hibernate.isPropertyInitialized(doc,"summary"));
  s.persist(o);
  s.persist(fol);
  t.commit();
  s.evict(doc);
  doc.setSummary("u");
  s.merge(doc);
  s.close();
}
