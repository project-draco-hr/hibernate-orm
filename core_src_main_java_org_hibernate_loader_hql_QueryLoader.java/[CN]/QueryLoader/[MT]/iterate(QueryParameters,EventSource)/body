{
  checkQuery(queryParameters);
  final boolean stats=session.getFactory().getStatistics().isStatisticsEnabled();
  long startTime=0;
  if (stats) {
    startTime=System.currentTimeMillis();
  }
  try {
    final PreparedStatement st=prepareQueryStatement(queryParameters,false,session);
    if (queryParameters.isCallable()) {
      throw new QueryException("iterate() not supported for callable statements");
    }
    final ResultSet rs=getResultSet(st,queryParameters.hasAutoDiscoverScalarTypes(),false,queryParameters.getRowSelection(),session);
    final Iterator result=new IteratorImpl(rs,st,session,queryReturnTypes,queryTranslator.getColumnNames(),buildHolderInstantiator(queryParameters.getResultTransformer()));
    if (stats) {
      session.getFactory().getStatisticsImplementor().queryExecuted(getQueryIdentifier(),0,System.currentTimeMillis() - startTime);
    }
    return result;
  }
 catch (  SQLException sqle) {
    throw JDBCExceptionHelper.convert(getFactory().getSQLExceptionConverter(),sqle,"could not execute query using iterate",getSQLString());
  }
}
