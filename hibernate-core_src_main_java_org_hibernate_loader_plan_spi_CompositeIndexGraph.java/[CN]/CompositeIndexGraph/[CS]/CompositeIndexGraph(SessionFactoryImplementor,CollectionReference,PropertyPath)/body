{
  super(sessionFactory);
  this.collectionReference=collectionReference;
  this.collectionPersister=collectionReference.getCollectionPersister();
  this.propertyPath=collectionPath.append("<index>");
  this.sqlSelectFragmentResolver=new CompositeBasedSqlSelectFragmentResolver(sessionFactory,(CompositeType)collectionPersister.getIndexType(),new CompositeBasedSqlSelectFragmentResolver.BaseSqlSelectFragmentResolver(){
    @Override public String[] toSqlSelectFragments(    String alias){
      return ((QueryableCollection)collectionPersister).getIndexColumnNames(alias);
    }
  }
);
}
