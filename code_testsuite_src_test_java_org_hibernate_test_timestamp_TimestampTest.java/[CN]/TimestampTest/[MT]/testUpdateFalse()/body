{
  getSessions().getStatistics().clear();
  Session s=openSession();
  Transaction t=s.beginTransaction();
  User u=new User("gavin","secret",new Person("Gavin King",new Date(),"Karbarook Ave"));
  s.persist(u);
  s.flush();
  u.getPerson().setName("XXXXYYYYY");
  t.commit();
  s.close();
  assertEquals(1,getSessions().getStatistics().getEntityInsertCount());
  assertEquals(0,getSessions().getStatistics().getEntityUpdateCount());
  s=openSession();
  t=s.beginTransaction();
  u=(User)s.get(User.class,"gavin");
  assertEquals(u.getPerson().getName(),"Gavin King");
  s.delete(u);
  t.commit();
  s.close();
  assertEquals(1,getSessions().getStatistics().getEntityDeleteCount());
}
