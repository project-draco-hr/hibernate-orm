{
class WorkImpl implements Work {
    private long value;
    public void execute(    Connection connection) throws SQLException {
      PreparedStatement query=session.getTransactionCoordinator().getJdbcCoordinator().getStatementPreparer().prepareStatement("select currval('" + TEST_SEQUENCE + "');");
      ResultSet resultSet=session.getTransactionCoordinator().getJdbcCoordinator().getResultSetReturn().extract(query);
      resultSet.next();
      value=resultSet.getLong(1);
    }
  }
  WorkImpl work=new WorkImpl();
  ((Session)session).doWork(work);
  return work.value;
}
