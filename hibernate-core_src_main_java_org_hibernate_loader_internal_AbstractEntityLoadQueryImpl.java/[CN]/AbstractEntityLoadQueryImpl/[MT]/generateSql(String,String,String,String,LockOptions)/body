{
  JoinFragment ojf=mergeOuterJoins();
  Select select=new Select(getDialect()).setLockOptions(lockOptions).setSelectClause(projection == null ? getPersister().selectFragment(getAlias(),entityReturn.getEntityAliases().getSuffix()) + associationSelectString() : projection).setFromClause(getDialect().appendLockHint(lockOptions,getPersister().fromTableFragment(getAlias())) + getPersister().fromJoinFragment(getAlias(),true,true)).setWhereClause(condition).setOuterJoins(ojf.toFromFragmentString(),ojf.toWhereFragmentString() + getWhereFragment()).setOrderByClause(orderBy(orderBy)).setGroupByClause(groupBy);
  if (getFactory().getSettings().isCommentsEnabled()) {
    select.setComment(getComment());
  }
  return select.toStatementString();
}
