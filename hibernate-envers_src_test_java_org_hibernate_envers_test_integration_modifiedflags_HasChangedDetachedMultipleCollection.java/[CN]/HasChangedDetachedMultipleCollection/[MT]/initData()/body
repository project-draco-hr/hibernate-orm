{
  EntityManager em=getEntityManager();
  em.getTransaction().begin();
  MultipleCollectionEntity mce1=new MultipleCollectionEntity();
  mce1.setText("MultipleCollectionEntity-1-1");
  em.persist(mce1);
  em.getTransaction().commit();
  mce1Id=mce1.getId();
  em.getTransaction().begin();
  mce1=em.find(MultipleCollectionEntity.class,mce1.getId());
  MultipleCollectionRefEntity1 mcre1=new MultipleCollectionRefEntity1();
  mcre1.setText("MultipleCollectionRefEntity1-1-1");
  mcre1.setMultipleCollectionEntity(mce1);
  mce1.addRefEntity1(mcre1);
  em.persist(mcre1);
  mce1=em.merge(mce1);
  em.getTransaction().commit();
  mcre1Id=mcre1.getId();
  em.getTransaction().begin();
  mce1=em.find(MultipleCollectionEntity.class,mce1.getId());
  mce1=em.merge(mce1);
  em.getTransaction().commit();
  em.close();
  em=getEntityManager();
  em.getTransaction().begin();
  mce1.removeRefEntity1(mcre1);
  mce1=em.merge(mce1);
  em.getTransaction().commit();
  em.close();
  em=getEntityManager();
  em.getTransaction().begin();
  mce1.setRefEntities1(new ArrayList<MultipleCollectionRefEntity1>());
  mce1.setRefEntities2(new ArrayList<MultipleCollectionRefEntity2>());
  mce1.setText("MultipleCollectionEntity-1-2");
  mce1=em.merge(mce1);
  em.getTransaction().commit();
  em.close();
  em=getEntityManager();
  em.getTransaction().begin();
  mce1.setRefEntities1(new ArrayList<MultipleCollectionRefEntity1>());
  mce1.setRefEntities2(new ArrayList<MultipleCollectionRefEntity2>());
  mce1=em.merge(mce1);
  em.getTransaction().commit();
  em.getTransaction().begin();
  MultipleCollectionEntity mce2=new MultipleCollectionEntity();
  mce2.setText("MultipleCollectionEntity-2-1");
  MultipleCollectionRefEntity2 mcre2=new MultipleCollectionRefEntity2();
  mcre2.setText("MultipleCollectionRefEntity2-1-1");
  mcre2.setMultipleCollectionEntity(mce2);
  mce2.addRefEntity2(mcre2);
  em.persist(mce2);
  em.getTransaction().commit();
  mce2Id=mce2.getId();
  mcre2Id=mcre2.getId();
  em.close();
}
