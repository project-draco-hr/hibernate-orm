{
  errorIfClosed();
  NamedQueryDefinition nqd=factory.getNamedQuery(queryName);
  final Query query;
  if (nqd != null) {
    query=createQuery(nqd);
  }
 else {
    NamedSQLQueryDefinition nsqlqd=factory.getNamedSQLQuery(queryName);
    if (nsqlqd == null) {
      throw new MappingException("Named query not known: " + queryName);
    }
    query=createSQLQuery(nsqlqd);
    nqd=nsqlqd;
  }
  initQuery(query,nqd);
  return query;
}
