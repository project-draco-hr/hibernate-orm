{
  errorIfClosed();
  NamedSQLQueryDefinition nsqlqd=factory.getNamedSQLQuery(queryName);
  if (nsqlqd == null) {
    throw new MappingException("Named SQL query not known: " + queryName);
  }
  Query query=new SQLQueryImpl(nsqlqd,this,factory.getQueryPlanCache().getSQLParameterMetadata(nsqlqd.getQueryString()));
  query.setComment(nsqlqd.getComment() != null ? nsqlqd.getComment() : nsqlqd.getName());
  initQuery(query,nsqlqd);
  return query;
}
