{
  if (parameterStrategy == ParameterStrategy.POSITIONAL) {
    throw new QueryException("Cannot mix named and positional parameters");
  }
  if (parameterStrategy == null) {
    final ExtractedDatabaseMetaData databaseMetaData=getSession().getTransactionCoordinator().getJdbcCoordinator().getLogicalConnection().getJdbcServices().getExtractedMetaDataSupport();
    if (!databaseMetaData.supportsNamedParameters()) {
      throw new NamedParametersNotSupportedException("Named stored procedure parameters used, but JDBC driver does not support named parameters");
    }
    parameterStrategy=ParameterStrategy.NAMED;
  }
}
