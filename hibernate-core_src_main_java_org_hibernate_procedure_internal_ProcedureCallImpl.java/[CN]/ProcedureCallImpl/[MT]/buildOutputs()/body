{
  final String call=session().getFactory().getDialect().getCallableStatementSupport().renderCallableStatement(procedureName,parameterStrategy,registeredParameters,session());
  try {
    final CallableStatement statement=(CallableStatement)getSession().getTransactionCoordinator().getJdbcCoordinator().getStatementPreparer().prepareStatement(call,true);
    int i=1;
    for (    ParameterRegistrationImplementor parameter : registeredParameters) {
      parameter.prepare(statement,i);
      if (parameter.getMode() == ParameterMode.REF_CURSOR) {
        i++;
      }
 else {
        i+=parameter.getSqlTypes().length;
      }
    }
    return new ProcedureOutputsImpl(this,statement);
  }
 catch (  SQLException e) {
    throw getSession().getFactory().getSQLExceptionHelper().convert(e,"Error preparing CallableStatement",getProcedureName());
  }
}
