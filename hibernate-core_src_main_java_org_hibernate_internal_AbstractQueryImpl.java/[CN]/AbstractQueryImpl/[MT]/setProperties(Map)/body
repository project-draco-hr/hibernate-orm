{
  String[] params=getNamedParameters();
  for (int i=0; i < params.length; i++) {
    String namedParam=params[i];
    final Object object=map.get(namedParam);
    if (object == null) {
      Type type=parameterMetadata.getNamedParameterDescriptor(namedParam).getExpectedType();
      if (type == null) {
        type=StandardBasicTypes.SERIALIZABLE;
      }
      setParameter(namedParam,object,type);
    }
 else {
      Class retType=object.getClass();
      if (Collection.class.isAssignableFrom(retType)) {
        setParameterList(namedParam,(Collection)object);
      }
 else       if (retType.isArray()) {
        setParameterList(namedParam,(Object[])object);
      }
 else {
        setParameter(namedParam,object,determineType(namedParam,retType));
      }
    }
  }
  return this;
}
