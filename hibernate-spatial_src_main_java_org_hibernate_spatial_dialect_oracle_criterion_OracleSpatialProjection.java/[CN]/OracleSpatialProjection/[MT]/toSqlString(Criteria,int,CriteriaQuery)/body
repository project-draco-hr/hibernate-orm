{
  SessionFactoryImplementor factory=criteriaQuery.getFactory();
  String[] columns=criteriaQuery.getColumnsUsingProjection(criteria,this.propertyName);
  Dialect dialect=factory.getDialect();
  if (dialect instanceof SpatialDialect) {
    SpatialDialect seDialect=(SpatialDialect)dialect;
    return new StringBuffer(seDialect.getSpatialAggregateSQL(columns[0],this.aggregate)).append(" y").append(position).append("_").toString();
  }
 else {
    throw new IllegalStateException("Dialect must be spatially enabled dialect");
  }
}
