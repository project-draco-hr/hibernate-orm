{
  AuditStrategy strategy;
  try {
    Class<?> auditStrategyClass=null;
    try {
      auditStrategyClass=this.getClass().getClassLoader().loadClass(auditEntCfg.getAuditStrategyName());
    }
 catch (    Exception e) {
      auditStrategyClass=ReflectionTools.loadClass(auditEntCfg.getAuditStrategyName(),classLoaderService);
    }
    strategy=(AuditStrategy)ReflectHelper.getDefaultConstructor(auditStrategyClass).newInstance();
  }
 catch (  Exception e) {
    throw new MappingException(String.format("Unable to create AuditStrategy[%s] instance.",auditEntCfg.getAuditStrategyName()),e);
  }
  if (strategy instanceof ValidityAuditStrategy) {
    final Getter revisionTimestampGetter=ReflectionTools.getGetter(revisionInfoClass,revisionInfoTimestampData);
    ((ValidityAuditStrategy)strategy).setRevisionTimestampGetter(revisionTimestampGetter);
  }
  return strategy;
}
