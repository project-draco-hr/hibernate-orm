{
  StandardServiceRegistry ssr=new StandardServiceRegistryBuilder().applySetting(AvailableSettings.USE_SECOND_LEVEL_CACHE,true).build();
  try {
    new MetadataSources(ssr).addAnnotatedClass(It.class).getMetadataBuilder().applySharedCacheMode(SharedCacheMode.ENABLE_SELECTIVE).build().buildSessionFactory();
  }
  finally {
    StandardServiceRegistryBuilder.destroy(ssr);
  }
}
