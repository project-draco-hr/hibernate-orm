{
  Properties props=ConnectionProviderBuilder.getConnectionProviderProperties();
  ServiceRegistryImpl serviceRegistry=new ServiceRegistryImpl(props);
  JdbcServices jdbcServices=serviceRegistry.getService(JdbcServices.class);
  assertTrue(jdbcServices.getDialect() instanceof H2Dialect);
  assertTrue(jdbcServices.getConnectionProvider().isUnwrappableAs(DriverManagerConnectionProviderImpl.class));
  serviceRegistry.registerService(ConnectionProvider.class,new UserSuppliedConnectionProviderImpl());
  assertTrue(jdbcServices.getDialect() instanceof H2Dialect);
  assertTrue(jdbcServices.getConnectionProvider().isUnwrappableAs(UserSuppliedConnectionProviderImpl.class));
  serviceRegistry.destroy();
}
