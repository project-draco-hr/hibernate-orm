{
  Session s=openSession();
  Transaction t=s.beginTransaction();
  Course course=new Course();
  course.setCourseCode("HIB");
  course.setDescription("Hibernate Training");
  course.getCourseMeetings().add(new CourseMeeting(course,"Monday",1,"1313 Mockingbird Lane"));
  s.save(course);
  s.flush();
  s.clear();
  List data=(List)s.createCriteria(CourseMeeting.class).setProjection(Projections.id()).list();
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  try {
    s.createCriteria(CourseMeeting.class).setProjection(Projections.count("id")).list();
    fail("should have thrown SQLGrammarException");
  }
 catch (  SQLGrammarException ex) {
  }
 finally {
    t.rollback();
    s.close();
  }
  s=openSession();
  t=s.beginTransaction();
  try {
    s.createCriteria(CourseMeeting.class).setProjection(Projections.countDistinct("id")).list();
    if (!getDialect().supportsTupleDistinctCounts()) {
      fail("expected SQLGrammarException");
    }
  }
 catch (  SQLGrammarException ex) {
    if (!getDialect().supportsTupleDistinctCounts()) {
    }
 else {
      throw ex;
    }
  }
 finally {
    t.rollback();
    s.close();
  }
  s=openSession();
  t=s.beginTransaction();
  s.delete(course);
  t.commit();
  s.close();
}
