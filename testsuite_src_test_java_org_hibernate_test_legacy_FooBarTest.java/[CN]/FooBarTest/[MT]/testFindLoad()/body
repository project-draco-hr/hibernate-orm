{
  Session s=openSession();
  FooProxy foo=new Foo();
  s.save(foo);
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  foo=(FooProxy)s.find("from Foo foo").get(0);
  FooProxy foo2=(FooProxy)s.load(Foo.class,foo.getKey());
  assertTrue("find returns same object as load",foo == foo2);
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  foo2=(FooProxy)s.load(Foo.class,foo.getKey());
  foo=(FooProxy)s.find("from Foo foo").get(0);
  assertTrue("find returns same object as load",foo == foo2);
  s.delete("from Foo foo");
  s.flush();
  s.connection().commit();
  s.close();
}
