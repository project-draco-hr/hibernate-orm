{
  Foo foo1=new Foo();
  Foo foo2=new Foo();
  Baz baz=new Baz();
  Foo[] arr=new Foo[10];
  arr[0]=foo1;
  arr[9]=foo2;
  Session s=openSession();
  s.beginTransaction();
  s.save(foo1);
  s.save(foo2);
  baz.setFooArray(arr);
  s.save(baz);
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.beginTransaction();
  baz=(Baz)s.load(Baz.class,baz.getCode());
  assertTrue(baz.getFooArray().length == 1);
  assertTrue(s.createQuery("from Baz baz join baz.fooArray foo").list().size() == 1);
  assertTrue(s.createQuery("from Foo foo").list().size() == 2);
  assertTrue(s.createFilter(baz.getFooArray(),"").list().size() == 1);
  doDelete(s,"from Foo foo");
  String bazid=baz.getCode();
  s.delete(baz);
  int rows=s.connection().createStatement().executeUpdate("delete from FOO_ARRAY where id_='" + bazid + "' and i>=8");
  assertTrue(rows == 1);
  s.getTransaction().commit();
  s.close();
}
