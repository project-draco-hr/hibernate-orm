{
  Session s=openSession();
  Baz baz=new Baz();
  Serializable id=s.save(baz);
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  baz=(Baz)s.load(Baz.class,id);
  baz.getFooBag().add(new Foo());
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  baz=(Baz)s.load(Baz.class,id);
  assertTrue(!Hibernate.isInitialized(baz.getFooBag()));
  assertTrue(baz.getFooBag().size() == 1);
  if (!(getDialect() instanceof HSQLDialect))   assertTrue(Hibernate.isInitialized(baz.getFooBag().iterator().next()));
  s.delete(baz);
  s.flush();
  s.connection().commit();
  s.close();
}
