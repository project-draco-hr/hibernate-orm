{
  if (session == null) {
    LOG.trace("Incoming session was null; using current jvm time");
    return super.seed(session);
  }
 else   if (!session.getFactory().getDialect().supportsCurrentTimestampSelection()) {
    LOG.debugf("Falling back to vm-based timestamp, as dialect does not support current timestamp selection");
    return super.seed(session);
  }
 else {
    return getCurrentTimestamp(session);
  }
}
