{
  if (!(Blob.class.isAssignableFrom(type) || BinaryStream.class.isAssignableFrom(type))) {
    throw unknownUnwrap(type);
  }
  if (value == null) {
    return null;
  }
  if (BinaryStream.class.isAssignableFrom(type)) {
    try {
      return (X)new BinaryStreamImpl(DataHelper.extractBytes(value.getBinaryStream()));
    }
 catch (    SQLException e) {
      throw new HibernateException("Unable to access blob stream",e);
    }
  }
  final Blob blob=WrappedBlob.class.isInstance(value) ? ((WrappedBlob)value).getWrappedBlob() : value;
  return (X)blob;
}
