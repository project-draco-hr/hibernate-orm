{
  SessionFactoryImplementor factory=criteriaQuery.getFactory();
  String[] columns=criteriaQuery.getColumnsUsingProjection(criteria,this.propertyName);
  Dialect dialect=factory.getDialect();
  if (dialect instanceof SpatialDialect) {
    SpatialDialect seDialect=(SpatialDialect)dialect;
    return seDialect.getSpatialFilterExpression(columns[0]);
  }
 else {
    throw new IllegalStateException("Dialect must be spatially enabled dialect");
  }
}
