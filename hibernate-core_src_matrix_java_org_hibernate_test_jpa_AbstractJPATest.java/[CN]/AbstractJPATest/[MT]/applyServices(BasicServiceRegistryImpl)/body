{
  super.applyServices(serviceRegistry);
  serviceRegistry.getService(IntegratorService.class).addIntegrator(new Integrator(){
    @Override public void integrate(    Configuration configuration,    SessionFactoryImplementor sessionFactory,    SessionFactoryServiceRegistry serviceRegistry){
      integrate(serviceRegistry);
    }
    @Override public void integrate(    MetadataImplementor metadata,    SessionFactoryImplementor sessionFactory,    SessionFactoryServiceRegistry serviceRegistry){
      integrate(serviceRegistry);
    }
    private void integrate(    SessionFactoryServiceRegistry serviceRegistry){
      EventListenerRegistry eventListenerRegistry=serviceRegistry.getService(EventListenerRegistry.class);
      eventListenerRegistry.setListeners(EventType.PERSIST,buildPersistEventListeners());
      eventListenerRegistry.setListeners(EventType.PERSIST_ONFLUSH,buildPersisOnFlushEventListeners());
      eventListenerRegistry.setListeners(EventType.AUTO_FLUSH,buildAutoFlushEventListeners());
      eventListenerRegistry.setListeners(EventType.FLUSH,buildFlushEventListeners());
      eventListenerRegistry.setListeners(EventType.FLUSH_ENTITY,buildFlushEntityEventListeners());
    }
    @Override public void disintegrate(    SessionFactoryImplementor sessionFactory,    SessionFactoryServiceRegistry serviceRegistry){
    }
  }
);
}
