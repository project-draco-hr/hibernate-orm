{
  checkOpen();
  final SessionFactoryImplementor sfi=entityManagerFactory.getSessionFactory();
{
    final NamedQueryDefinition namedQueryDefinition=sfi.getNamedQueryRepository().getNamedQueryDefinition(name);
    if (namedQueryDefinition != null) {
      return createNamedJpqlQuery(namedQueryDefinition,resultType);
    }
  }
{
    final NamedSQLQueryDefinition namedQueryDefinition=sfi.getNamedQueryRepository().getNamedSQLQueryDefinition(name);
    if (namedQueryDefinition != null) {
      return createNamedSqlQuery(namedQueryDefinition,resultType);
    }
  }
  throw convert(new IllegalArgumentException("No query defined for that name [" + name + "]"));
}
