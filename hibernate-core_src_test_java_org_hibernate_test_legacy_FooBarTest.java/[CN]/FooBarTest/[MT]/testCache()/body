{
  Session s=openSession();
  s.beginTransaction();
  Immutable im=new Immutable();
  s.save(im);
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.beginTransaction();
  s.load(im,im.getId());
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.beginTransaction();
  s.load(im,im.getId());
  assertEquals("cached object identity",im,s.createQuery("from Immutable im where im = ?").setParameter(0,im,s.getTypeHelper().entity(Immutable.class)).uniqueResult());
  s.doWork(new AbstractWork(){
    @Override public void execute(    Connection connection) throws SQLException {
      connection.createStatement().executeUpdate("delete from immut");
    }
  }
);
  s.getTransaction().commit();
  s.close();
}
