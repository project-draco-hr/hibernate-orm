{
  Session s=openSession();
  Transaction t=s.beginTransaction();
  Bar bar=new Bar();
  String id=(String)s.save(bar);
  MoreStuff more=new MoreStuff();
  more.setName("More Stuff");
  more.setIntId(12);
  more.setStringId("id");
  Stuff stuf=new Stuff();
  stuf.setMoreStuff(more);
  more.setStuffs(new ArrayList());
  more.getStuffs().add(stuf);
  stuf.setFoo(bar);
  stuf.setId(1234);
  stuf.setProperty(TimeZone.getDefault());
  s.save(more);
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  List results=s.createQuery("from Stuff as s where s.foo.id = ? and s.id.id = ? and s.moreStuff.id.intId = ? and s.moreStuff.id.stringId = ?").setParameter(0,bar,s.getTypeHelper().entity(Foo.class)).setParameter(1,new Long(1234),StandardBasicTypes.LONG).setParameter(2,new Integer(12),StandardBasicTypes.INTEGER).setParameter(3,"id",StandardBasicTypes.STRING).list();
  assertEquals(1,results.size());
  results=s.createQuery("from Stuff as s where s.foo.id = ? and s.id.id = ? and s.moreStuff.name = ?").setParameter(0,bar,s.getTypeHelper().entity(Foo.class)).setParameter(1,new Long(1234),StandardBasicTypes.LONG).setParameter(2,"More Stuff",StandardBasicTypes.STRING).list();
  assertEquals(1,results.size());
  s.createQuery("from Stuff as s where s.foo.string is not null").list();
  assertTrue(s.createQuery("from Stuff as s where s.foo > '0' order by s.foo").list().size() == 1);
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  FooProxy foo=(FooProxy)s.load(Foo.class,id);
  s.load(more,more);
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  Stuff stuff=new Stuff();
  stuff.setFoo(foo);
  stuff.setId(1234);
  stuff.setMoreStuff(more);
  s.load(stuff,stuff);
  assertTrue(stuff.getProperty().equals(TimeZone.getDefault()));
  assertTrue(stuff.getMoreStuff().getName().equals("More Stuff"));
  doDelete(s,"from MoreStuff");
  doDelete(s,"from Foo foo");
  t.commit();
  s.close();
}
