{
  EntityPersister meta=criteriaQuery.getFactory().getEntityPersister(criteriaQuery.getEntityName(criteria));
  EntityMode result=meta.guessEntityMode(entity);
  if (result == null) {
    throw new ClassCastException(entity.getClass().getName());
  }
  return result;
}
