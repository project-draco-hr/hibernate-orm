{
  for (  XMLFetchProfileElement fetchProfile : fetchProfiles) {
    String profileName=fetchProfile.getName();
    Set<Fetch> fetches=new HashSet<Fetch>();
    for (    XMLFetch fetch : fetchProfile.getFetch()) {
      String entityName=fetch.getEntity() == null ? containingEntityName : fetch.getEntity();
      if (entityName == null) {
        throw new MappingException("could not determine entity for fetch-profile fetch [" + profileName + "]:["+ fetch.getAssociation()+ "]",jaxbRoot.getOrigin());
      }
      fetches.add(new Fetch(entityName,fetch.getAssociation(),fetch.getStyle()));
    }
    metadata.addFetchProfile(new FetchProfile(profileName,fetches));
  }
}
