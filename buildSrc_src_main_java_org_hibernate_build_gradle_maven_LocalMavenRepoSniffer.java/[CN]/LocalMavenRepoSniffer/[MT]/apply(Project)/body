{
  File mavenLocal=new File(new File(userHome,".m2"),"repository");
  File userSettings=new File(new File(System.getProperty("user.home"),".m2"),"settings.xml");
  if (userSettings.exists()) {
    File overriddenMavenLocal=extractMavenLocal(userSettings);
    if (overriddenMavenLocal != null) {
      mavenLocal=overriddenMavenLocal;
    }
  }
  try {
    project.getLogger().trace("Adding local maven repo [" + mavenLocal.toString() + "]");
    project.getRepositories().mavenRepo(Collections.singletonMap("urls",mavenLocal.toURI().toURL().toExternalForm()));
  }
 catch (  MalformedURLException e) {
    project.getLogger().warn("Unable to process local maven repo url",e);
  }
}
