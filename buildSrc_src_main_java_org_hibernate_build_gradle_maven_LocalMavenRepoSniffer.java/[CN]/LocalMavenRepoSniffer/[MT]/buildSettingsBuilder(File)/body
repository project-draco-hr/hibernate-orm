{
  final String userSettingsPath=userSettings.getAbsolutePath();
  DefaultMavenSettingsBuilder builder=new DefaultMavenSettingsBuilder();
  builder.enableLogging(new PlexusLoggerAdapter(log));
  Field userSettingsPathField=DefaultMavenSettingsBuilder.class.getDeclaredField("userSettingsPath");
  userSettingsPathField.setAccessible(true);
  userSettingsPathField.set(builder,userSettingsPath);
  Field globalSettingsPathField=DefaultMavenSettingsBuilder.class.getDeclaredField("globalSettingsPath");
  globalSettingsPathField.setAccessible(true);
  globalSettingsPathField.set(builder,userSettingsPath);
  builder.initialize();
  return builder;
}
