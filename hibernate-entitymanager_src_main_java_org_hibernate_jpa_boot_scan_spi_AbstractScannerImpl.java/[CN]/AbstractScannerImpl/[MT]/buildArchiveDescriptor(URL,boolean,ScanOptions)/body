{
  final ArchiveDescriptor descriptor;
  final ArchiveDescriptorInfo descriptorInfo=archiveDescriptorCache.get(url);
  if (descriptorInfo == null) {
    descriptor=archiveDescriptorFactory.buildArchiveDescriptor(url);
    archiveDescriptorCache.put(url,new ArchiveDescriptorInfo(descriptor,isRootUrl,scanOptions));
  }
 else {
    validateReuse(descriptorInfo,isRootUrl,scanOptions);
    descriptor=descriptorInfo.archiveDescriptor;
  }
  return descriptor;
}
