{
  Session s;
  Transaction tx;
  s=sessionFactory().openSession();
  tx=s.beginTransaction();
  s.persist(new Document("HiA","Hibernate book","Hibernate is...."));
  tx.commit();
  s.close();
  s=sessionFactory().openSession();
  tx=s.beginTransaction();
  s.createQuery("from Document fetch all properties").uniqueResult();
  tx.commit();
  s.close();
  sessionFactory().getStatistics().clear();
  s=sessionFactory().openSession();
  tx=s.beginTransaction();
  Document d=(Document)s.createCriteria(Document.class).uniqueResult();
  assertFalse(Hibernate.isPropertyInitialized(d,"text"));
  assertFalse(Hibernate.isPropertyInitialized(d,"summary"));
  assertEquals("Hibernate is....",d.getText());
  assertTrue(Hibernate.isPropertyInitialized(d,"text"));
  assertTrue(Hibernate.isPropertyInitialized(d,"summary"));
  tx.commit();
  s.close();
  assertEquals(2,sessionFactory().getStatistics().getPrepareStatementCount());
  s=sessionFactory().openSession();
  tx=s.beginTransaction();
  d=(Document)s.get(Document.class,d.getId());
  assertFalse(Hibernate.isPropertyInitialized(d,"text"));
  assertFalse(Hibernate.isPropertyInitialized(d,"summary"));
  tx.commit();
  s.close();
}
