{
  String queryName=queryElem.attributeValue("name");
  if (path != null)   queryName=path + '.' + queryName;
  String query=queryElem.getText();
  LOG.debugf("Named query: %s -> %s",queryName,query);
  boolean cacheable="true".equals(queryElem.attributeValue("cacheable"));
  String region=queryElem.attributeValue("cache-region");
  Attribute tAtt=queryElem.attribute("timeout");
  Integer timeout=tAtt == null ? null : Integer.valueOf(tAtt.getValue());
  Attribute fsAtt=queryElem.attribute("fetch-size");
  Integer fetchSize=fsAtt == null ? null : Integer.valueOf(fsAtt.getValue());
  Attribute roAttr=queryElem.attribute("read-only");
  boolean readOnly=roAttr != null && "true".equals(roAttr.getValue());
  Attribute cacheModeAtt=queryElem.attribute("cache-mode");
  String cacheMode=cacheModeAtt == null ? null : cacheModeAtt.getValue();
  Attribute cmAtt=queryElem.attribute("comment");
  String comment=cmAtt == null ? null : cmAtt.getValue();
  NamedQueryDefinition namedQuery=new NamedQueryDefinitionBuilder().setName(queryName).setQuery(query).setCacheable(cacheable).setCacheRegion(region).setTimeout(timeout).setFetchSize(fetchSize).setFlushMode(FlushMode.interpretExternalSetting(queryElem.attributeValue("flush-mode"))).setCacheMode(CacheMode.interpretExternalSetting(cacheMode)).setReadOnly(readOnly).setComment(comment).setParameterTypes(getParameterTypes(queryElem)).createNamedQueryDefinition();
  mappings.addQuery(namedQuery.getName(),namedQuery);
}
