{
  final TypeFactory typeFactory=metadata.getTypeResolver().getTypeFactory();
switch (attributeBinding.getAttribute().getNature()) {
case SET:
{
      return typeFactory.set(attributeBinding.getAttribute().getName(),attributeBinding.getReferencedPropertyName(),attributeBinding.getCollectionElement().getCollectionElementNature() == CollectionElementNature.COMPOSITE);
    }
case BAG:
{
    return typeFactory.bag(attributeBinding.getAttribute().getName(),attributeBinding.getReferencedPropertyName(),attributeBinding.getCollectionElement().getCollectionElementNature() == CollectionElementNature.COMPOSITE);
  }
default :
{
  throw new UnsupportedOperationException("Collection type not supported yet:" + attributeBinding.getAttribute().getNature());
}
}
}
