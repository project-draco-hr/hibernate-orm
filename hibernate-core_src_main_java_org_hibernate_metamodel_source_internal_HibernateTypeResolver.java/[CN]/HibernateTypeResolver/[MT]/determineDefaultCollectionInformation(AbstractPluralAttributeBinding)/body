{
  final TypeFactory typeFactory=metadata.getTypeResolver().getTypeFactory();
switch (attributeBinding.getAttribute().getNature()) {
case SET:
{
      return typeFactory.set(attributeBinding.getAttribute().getName(),attributeBinding.getReferencedPropertyName(),attributeBinding.isEmbedded());
    }
case BAG:
{
    return typeFactory.set(attributeBinding.getAttribute().getName(),attributeBinding.getReferencedPropertyName(),attributeBinding.isEmbedded());
  }
default :
{
  throw new UnsupportedOperationException("Collection type not supported yet:" + attributeBinding.getAttribute().getNature());
}
}
}
