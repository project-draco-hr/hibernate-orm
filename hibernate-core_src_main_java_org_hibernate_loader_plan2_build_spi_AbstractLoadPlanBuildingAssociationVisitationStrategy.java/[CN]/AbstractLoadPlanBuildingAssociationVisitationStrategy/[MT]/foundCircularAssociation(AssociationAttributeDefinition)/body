{
  final FetchStrategy fetchStrategy=determineFetchStrategy(attributeDefinition);
  if (fetchStrategy.getStyle() != FetchStyle.JOIN) {
    return;
  }
  if (attributeDefinition.getAssociationNature() == AssociationAttributeDefinition.AssociationNature.ENTITY) {
    final Joinable currentEntityPersister=(Joinable)currentSource().resolveEntityReference().getEntityPersister();
    final AssociationKey currentEntityReferenceAssociationKey=new AssociationKey(currentEntityPersister.getTableName(),currentEntityPersister.getKeyColumnNames());
    final Joinable fetchSourceEntityPersister=(Joinable)registeredFetchSource(attributeDefinition.getAssociationKey()).resolveEntityReference().getEntityPersister();
    final AssociationKey fetchSourceEntityReferenceAssociationKey=new AssociationKey(fetchSourceEntityPersister.getTableName(),fetchSourceEntityPersister.getKeyColumnNames());
    if (!attributeDefinition.getAssociationKey().equals(currentEntityReferenceAssociationKey) && !attributeDefinition.getAssociationKey().equals(fetchSourceEntityReferenceAssociationKey)) {
      currentSource().buildBidirectionalEntityFetch(attributeDefinition,fetchStrategy,fetchedAssociationKeySourceMap.get(attributeDefinition.getAssociationKey()).resolveEntityReference(),this);
    }
  }
 else {
    currentSource().buildCollectionFetch(attributeDefinition,fetchStrategy,this);
  }
}
