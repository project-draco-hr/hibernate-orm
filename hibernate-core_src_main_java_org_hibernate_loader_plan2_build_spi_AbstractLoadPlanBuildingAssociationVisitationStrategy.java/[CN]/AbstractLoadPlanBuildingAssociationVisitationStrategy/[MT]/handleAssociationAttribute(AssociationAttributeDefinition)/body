{
  final FetchStrategy fetchStrategy=determineFetchStrategy(attributeDefinition);
  if (fetchStrategy.getTiming() != FetchTiming.IMMEDIATE) {
    return false;
  }
  final ExpandingFetchSource currentSource=currentSource();
  currentSource.validateFetchPlan(fetchStrategy,attributeDefinition);
  final AssociationAttributeDefinition.AssociationNature nature=attributeDefinition.getAssociationNature();
  if (nature == AssociationAttributeDefinition.AssociationNature.ANY) {
    return false;
  }
  if (nature == AssociationAttributeDefinition.AssociationNature.ENTITY) {
    EntityFetch fetch=currentSource.buildEntityFetch(attributeDefinition,fetchStrategy);
    if (fetchStrategy.getStyle() == FetchStyle.JOIN) {
      pushToStack((ExpandingFetchSource)fetch);
    }
  }
 else {
    CollectionFetch fetch=currentSource.buildCollectionFetch(attributeDefinition,fetchStrategy);
    if (fetchStrategy.getStyle() == FetchStyle.JOIN) {
      pushToCollectionStack(fetch);
    }
  }
  if (fetchStrategy.getStyle() == FetchStyle.JOIN) {
    pushedAttributes.add(attributeDefinition);
  }
  return fetchStrategy.getStyle() == FetchStyle.JOIN;
}
