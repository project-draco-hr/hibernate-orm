{
  if (isLrs) {
    throw new UnsupportedOperationException();
  }
  if (dim > 4) {
    throw new IllegalArgumentException("Dim parameter value cannot be greater than 4");
  }
  final Double[] converted=new Double[coordinates.length * dim];
  for (int i=0; i < coordinates.length; i++) {
    final Coordinate c=coordinates[i];
    converted[i * dim]=toDouble(c.x);
    converted[i * dim + 1]=toDouble(c.y);
    if (dim == 3) {
      converted[i * dim + 2]=toDouble(c.z);
    }
  }
  return converted;
}
