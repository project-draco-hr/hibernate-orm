{
  if (queryAnn == null)   return;
  if (BinderHelper.isEmptyAnnotationValue(queryAnn.name())) {
    throw new AnnotationException("A named query must have a name when used in class or package level");
  }
  NamedSQLQueryDefinition query;
  String resultSetMapping=queryAnn.resultSetMapping();
  if (!BinderHelper.isEmptyAnnotationValue(resultSetMapping)) {
    query=new NamedSQLQueryDefinition(queryAnn.name(),queryAnn.query(),resultSetMapping,null,queryAnn.cacheable(),BinderHelper.isEmptyAnnotationValue(queryAnn.cacheRegion()) ? null : queryAnn.cacheRegion(),queryAnn.timeout() < 0 ? null : queryAnn.timeout(),queryAnn.fetchSize() < 0 ? null : queryAnn.fetchSize(),getFlushMode(queryAnn.flushMode()),getCacheMode(queryAnn.cacheMode()),queryAnn.readOnly(),BinderHelper.isEmptyAnnotationValue(queryAnn.comment()) ? null : queryAnn.comment(),null,queryAnn.callable());
  }
 else   if (!void.class.equals(queryAnn.resultClass())) {
    final NativeSQLQueryRootReturn entityQueryReturn=new NativeSQLQueryRootReturn("alias1",queryAnn.resultClass().getName(),new HashMap(),LockMode.READ);
    query=new NamedSQLQueryDefinition(queryAnn.name(),queryAnn.query(),new NativeSQLQueryReturn[]{entityQueryReturn},null,queryAnn.cacheable(),BinderHelper.isEmptyAnnotationValue(queryAnn.cacheRegion()) ? null : queryAnn.cacheRegion(),queryAnn.timeout() < 0 ? null : queryAnn.timeout(),queryAnn.fetchSize() < 0 ? null : queryAnn.fetchSize(),getFlushMode(queryAnn.flushMode()),getCacheMode(queryAnn.cacheMode()),queryAnn.readOnly(),BinderHelper.isEmptyAnnotationValue(queryAnn.comment()) ? null : queryAnn.comment(),null,queryAnn.callable());
  }
 else {
    throw new NotYetImplementedException("Pure native scalar queries are not yet supported");
  }
  mappings.addSQLQuery(query.getName(),query);
  if (LOG.isDebugEnabled()) {
    LOG.debugf("Binding named native query: %s => %s",query.getName(),queryAnn.query());
  }
}
