{
  JarInputStream jis;
  try {
    jis=new JarInputStream(jarUrl.openStream());
  }
 catch (  Exception ze) {
    LOG.warn(LOG.unableToFindFile(jarUrl),ze);
    return;
  }
  if (entry != null && entry.length() == 1)   entry=null;
  if (entry != null && entry.startsWith("/"))   entry=entry.substring(1);
  JarEntry jarEntry;
  while ((jarEntry=jis.getNextJarEntry()) != null) {
    String name=jarEntry.getName();
    if (entry != null && !name.startsWith(entry))     continue;
    if (!jarEntry.isDirectory()) {
      if (name.equals(entry)) {
        JarInputStream subJis=null;
        try {
          subJis=new JarInputStream(jis);
          ZipEntry subZipEntry=jis.getNextEntry();
          while (subZipEntry != null) {
            if (!subZipEntry.isDirectory()) {
              byte[] entryBytes=JarVisitorFactory.getBytesFromInputStream(jis);
              String subname=subZipEntry.getName();
              if (subname.startsWith("/"))               subname=subname.substring(1);
              addElement(subname,new ByteArrayInputStream(entryBytes),new ByteArrayInputStream(entryBytes));
            }
            subZipEntry=jis.getNextJarEntry();
          }
        }
  finally {
          if (subJis != null)           subJis.close();
        }
      }
 else {
        byte[] entryBytes=JarVisitorFactory.getBytesFromInputStream(jis);
        if (entry != null)         name=name.substring(entry.length());
        if (name.startsWith("/"))         name=name.substring(1);
        addElement(name,new ByteArrayInputStream(entryBytes),new ByteArrayInputStream(entryBytes));
      }
    }
  }
  jis.close();
}
