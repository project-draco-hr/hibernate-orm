{
  if (isClosed) {
    throw new HibernateException("connection manager has been closed");
  }
  if (connection == null) {
    openConnection();
  }
  return connection;
}
