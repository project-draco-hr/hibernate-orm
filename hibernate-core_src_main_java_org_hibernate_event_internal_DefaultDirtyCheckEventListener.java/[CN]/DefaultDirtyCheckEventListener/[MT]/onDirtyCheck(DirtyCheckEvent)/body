{
  int oldSize=event.getSession().getActionQueue().numberOfCollectionRemovals();
  try {
    flushEverythingToExecutions(event);
    boolean wasNeeded=event.getSession().getActionQueue().hasAnyQueuedActions();
    if (wasNeeded)     LOG.debugf("Session dirty");
 else     LOG.debugf("Session not dirty");
    event.setDirty(wasNeeded);
  }
  finally {
    event.getSession().getActionQueue().clearFromFlushNeededCheck(oldSize);
  }
}
