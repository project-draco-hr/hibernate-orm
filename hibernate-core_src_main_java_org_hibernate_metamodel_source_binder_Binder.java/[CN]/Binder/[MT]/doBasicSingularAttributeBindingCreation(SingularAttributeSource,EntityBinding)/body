{
  final SingularAttribute attribute=attributeSource.isVirtualAttribute() ? entityBinding.getEntity().locateOrCreateVirtualAttribute(attributeSource.getName()) : entityBinding.getEntity().locateOrCreateSingularAttribute(attributeSource.getName());
  final SimpleSingularAttributeBinding attributeBinding;
  if (attributeSource.getNature() == SingularAttributeNature.BASIC) {
    attributeBinding=entityBinding.makeSimpleAttributeBinding(attribute);
    resolveTypeInformation(attributeSource.getTypeInformation(),attributeBinding);
  }
 else   if (attributeSource.getNature() == SingularAttributeNature.MANY_TO_ONE) {
    attributeBinding=entityBinding.makeManyToOneAttributeBinding(attribute);
    resolveTypeInformation(attributeSource.getTypeInformation(),attributeBinding);
    resolveToOneInformation((ToOneAttributeSource)attributeSource,(ManyToOneAttributeBinding)attributeBinding);
  }
 else {
    throw new NotYetImplementedException();
  }
  attributeBinding.setGeneration(attributeSource.getGeneration());
  attributeBinding.setLazy(attributeSource.isLazy());
  attributeBinding.setIncludedInOptimisticLocking(attributeSource.isIncludedInOptimisticLocking());
  attributeBinding.setPropertyAccessorName(Helper.getPropertyAccessorName(attributeSource.getPropertyAccessorName(),false,currentBindingContext.getMappingDefaults().getPropertyAccessorName()));
  bindRelationalValues(attributeSource,attributeBinding);
  attributeBinding.setMetaAttributeContext(buildMetaAttributeContext(attributeSource.metaAttributes(),entityBinding.getMetaAttributeContext()));
  return attributeBinding;
}
