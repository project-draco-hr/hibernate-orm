{
  Session session=openSession();
  session.getTransaction().begin();
  Tiger tiger1=new Tiger();
  tiger1.setName(null);
  Tiger tiger2=new Tiger();
  tiger2.setName("Max");
  Monkey monkey1=new Monkey();
  monkey1.setName("Michael");
  Monkey monkey2=new Monkey();
  monkey2.setName(null);
  Zoo zoo=new Zoo("Warsaw ZOO");
  zoo.getTigers().add(tiger1);
  zoo.getTigers().add(tiger2);
  zoo.getMonkeys().add(monkey1);
  zoo.getMonkeys().add(monkey2);
  session.persist(zoo);
  session.persist(tiger1);
  session.persist(tiger2);
  session.persist(monkey1);
  session.persist(monkey2);
  session.getTransaction().commit();
  session.clear();
  session.getTransaction().begin();
  zoo=(Zoo)session.get(Zoo.class,zoo.getId());
  Iterator<Tiger> iterator1=zoo.getTigers().iterator();
  Assert.assertEquals(tiger2.getName(),iterator1.next().getName());
  Assert.assertNull(iterator1.next().getName());
  Iterator<Monkey> iterator2=zoo.getMonkeys().iterator();
  Assert.assertEquals(monkey1.getName(),iterator2.next().getName());
  Assert.assertNull(iterator2.next().getName());
  session.getTransaction().commit();
  session.clear();
  session.getTransaction().begin();
  session.delete(tiger1);
  session.delete(tiger2);
  session.delete(monkey1);
  session.delete(monkey2);
  session.delete(zoo);
  session.getTransaction().commit();
  session.close();
}
