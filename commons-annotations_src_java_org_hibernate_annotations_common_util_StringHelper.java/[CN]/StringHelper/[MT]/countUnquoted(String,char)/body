{
  if ('\'' == character) {
    throw new IllegalArgumentException("Unquoted count of quotes is invalid");
  }
  if (string == null)   return 0;
  int count=0;
  int stringLength=string.length();
  boolean inQuote=false;
  for (int indx=0; indx < stringLength; indx++) {
    char c=string.charAt(indx);
    if (inQuote) {
      if ('\'' == c) {
        inQuote=false;
      }
    }
 else     if ('\'' == c) {
      inQuote=true;
    }
 else     if (c == character) {
      count++;
    }
  }
  return count;
}
