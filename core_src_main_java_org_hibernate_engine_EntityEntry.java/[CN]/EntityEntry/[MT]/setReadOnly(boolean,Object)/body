{
  if ((readOnly && status == Status.READ_ONLY) || ((!readOnly) && status == Status.MANAGED)) {
    return;
  }
  if (status != Status.MANAGED && status != Status.READ_ONLY) {
    throw new HibernateException("instance was not in a valid state");
  }
  if (readOnly) {
    setStatus(Status.READ_ONLY);
    loadedState=null;
  }
 else {
    setStatus(Status.MANAGED);
    loadedState=getPersister().getPropertyValues(entity,entityMode);
  }
}
