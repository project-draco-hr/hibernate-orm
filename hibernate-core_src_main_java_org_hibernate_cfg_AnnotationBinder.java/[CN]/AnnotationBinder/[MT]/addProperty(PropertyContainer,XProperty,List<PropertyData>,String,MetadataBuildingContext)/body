{
  final XClass declaringClass=propertyContainer.getDeclaringClass();
  final XClass entity=propertyContainer.getEntityAtStake();
  int idPropertyCounter=0;
  PropertyData propertyAnnotatedElement=new PropertyInferredData(declaringClass,property,propertyAccessor,context.getBuildingOptions().getReflectionManager());
  final XAnnotatedElement element=propertyAnnotatedElement.getProperty();
  if (element.isAnnotationPresent(Id.class) || element.isAnnotationPresent(EmbeddedId.class)) {
    annElts.add(0,propertyAnnotatedElement);
    if (context.getBuildingOptions().isSpecjProprietarySyntaxEnabled()) {
      if (element.isAnnotationPresent(Id.class) && element.isAnnotationPresent(Column.class)) {
        String columnName=element.getAnnotation(Column.class).name();
        for (        XProperty prop : declaringClass.getDeclaredProperties(AccessType.FIELD.getType())) {
          if (!prop.isAnnotationPresent(MapsId.class)) {
            boolean isRequiredAnnotationPresent=false;
            JoinColumns groupAnnotation=prop.getAnnotation(JoinColumns.class);
            if ((prop.isAnnotationPresent(JoinColumn.class) && prop.getAnnotation(JoinColumn.class).name().equals(columnName))) {
              isRequiredAnnotationPresent=true;
            }
 else             if (prop.isAnnotationPresent(JoinColumns.class)) {
              for (              JoinColumn columnAnnotation : groupAnnotation.value()) {
                if (columnName.equals(columnAnnotation.name())) {
                  isRequiredAnnotationPresent=true;
                  break;
                }
              }
            }
            if (isRequiredAnnotationPresent) {
              PropertyData specJPropertyData=new PropertyInferredData(declaringClass,prop,propertyAccessor,context.getBuildingOptions().getReflectionManager());
              context.getMetadataCollector().addPropertyAnnotatedWithMapsIdSpecj(entity,specJPropertyData,element.toString());
            }
          }
        }
      }
    }
    if (element.isAnnotationPresent(ManyToOne.class) || element.isAnnotationPresent(OneToOne.class)) {
      context.getMetadataCollector().addToOneAndIdProperty(entity,propertyAnnotatedElement);
    }
    idPropertyCounter++;
  }
 else {
    annElts.add(propertyAnnotatedElement);
  }
  if (element.isAnnotationPresent(MapsId.class)) {
    context.getMetadataCollector().addPropertyAnnotatedWithMapsId(entity,propertyAnnotatedElement);
  }
  return idPropertyCounter;
}
