{
  org.hibernate.mapping.ManyToOne value=new org.hibernate.mapping.ManyToOne(context.getMetadataCollector(),columns[0].getTable());
  if (unique) {
    value.markAsLogicalOneToOne();
  }
  value.setReferencedEntityName(ToOneBinder.getReferenceEntityName(inferredData,targetEntity,context));
  final XProperty property=inferredData.getProperty();
  defineFetchingStrategy(value,property);
  value.setIgnoreNotFound(ignoreNotFound);
  value.setCascadeDeleteEnabled(cascadeOnDelete);
  if (!optional) {
    for (    Ejb3JoinColumn column : columns) {
      column.setNullable(false);
    }
  }
  if (property.isAnnotationPresent(MapsId.class)) {
    for (    Ejb3JoinColumn column : columns) {
      column.setInsertable(false);
      column.setUpdatable(false);
    }
  }
  final JoinColumn joinColumn=property.getAnnotation(JoinColumn.class);
  boolean hasSpecjManyToOne=false;
  if (context.getBuildingOptions().isSpecjProprietarySyntaxEnabled()) {
    String columnName="";
    for (    XProperty prop : inferredData.getDeclaringClass().getDeclaredProperties(AccessType.FIELD.getType())) {
      if (prop.isAnnotationPresent(Id.class) && prop.isAnnotationPresent(Column.class)) {
        columnName=prop.getAnnotation(Column.class).name();
      }
      if (property.isAnnotationPresent(ManyToOne.class) && joinColumn != null && !BinderHelper.isEmptyAnnotationValue(joinColumn.name()) && joinColumn.name().equals(columnName) && !property.isAnnotationPresent(MapsId.class)) {
        hasSpecjManyToOne=true;
        for (        Ejb3JoinColumn column : columns) {
          column.setInsertable(false);
          column.setUpdatable(false);
        }
      }
    }
  }
  value.setTypeName(inferredData.getClassOrElementName());
  final String propertyName=inferredData.getPropertyName();
  value.setTypeUsingReflection(propertyHolder.getClassName(),propertyName);
  String fkName=null;
  if (joinColumn != null && joinColumn.foreignKey() != null) {
    fkName=joinColumn.foreignKey().name();
  }
  if (StringHelper.isEmpty(fkName)) {
    ForeignKey fk=property.getAnnotation(ForeignKey.class);
    fkName=fk != null ? fk.name() : "";
  }
  if (!StringHelper.isEmpty(fkName)) {
    value.setForeignKeyName(fkName);
  }
  String path=propertyHolder.getPath() + "." + propertyName;
  FkSecondPass secondPass=new ToOneFkSecondPass(value,columns,!optional && unique,propertyHolder.getEntityOwnerClassName(),path,context);
  if (inSecondPass) {
    secondPass.doSecondPass(context.getMetadataCollector().getEntityBindingMap());
  }
 else {
    context.getMetadataCollector().addSecondPass(secondPass);
  }
  Ejb3Column.checkPropertyConsistency(columns,propertyHolder.getEntityName() + "." + propertyName);
  propertyBinder.setName(propertyName);
  propertyBinder.setValue(value);
  if (isIdentifierMapper) {
    propertyBinder.setInsertable(false);
    propertyBinder.setUpdatable(false);
  }
 else   if (hasSpecjManyToOne) {
    propertyBinder.setInsertable(false);
    propertyBinder.setUpdatable(false);
  }
 else {
    propertyBinder.setInsertable(columns[0].isInsertable());
    propertyBinder.setUpdatable(columns[0].isUpdatable());
  }
  propertyBinder.setColumns(columns);
  propertyBinder.setAccessType(inferredData.getDefaultAccess());
  propertyBinder.setCascade(cascadeStrategy);
  propertyBinder.setProperty(property);
  propertyBinder.setXToMany(true);
  propertyBinder.makePropertyAndBind();
}
