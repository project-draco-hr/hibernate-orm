{
  boolean embeddedElements=eventSource.getEntityMode() != EntityMode.DOM4J || ((EntityType)collectionType.getElementType(eventSource.getFactory())).isEmbeddedInXML();
  boolean reallyDoCascade=style.reallyDoCascade(action) && embeddedElements && child != CollectionType.UNFETCHED_COLLECTION;
  if (reallyDoCascade) {
    LOG.cascadeActionForCollection(action,collectionType.getRole());
    Iterator iter=action.getCascadableChildrenIterator(eventSource,collectionType,child);
    while (iter.hasNext()) {
      cascadeProperty(parent,iter.next(),elemType,style,null,anything,isCascadeDeleteEnabled);
    }
    LOG.cascadeActionForColectionEnded(action,collectionType.getRole());
  }
  final boolean deleteOrphans=style.hasOrphanDelete() && action.deleteOrphans() && elemType.isEntityType()&& child instanceof PersistentCollection;
  if (deleteOrphans) {
    LOG.deletingOrphansForCollection(collectionType.getRole());
    final String entityName=collectionType.getAssociatedEntityName(eventSource.getFactory());
    deleteOrphans(entityName,(PersistentCollection)child);
    LOG.deletingOrphansForCollectionEnded(collectionType.getRole());
  }
}
