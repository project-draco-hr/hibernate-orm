{
  final StrategySelector strategySelector=ssr.getService(StrategySelector.class);
  final Object sessionFactoryInterceptorSetting=configurationValues.remove(org.hibernate.cfg.AvailableSettings.INTERCEPTOR);
  if (sessionFactoryInterceptorSetting != null) {
    final Interceptor sessionFactoryInterceptor=strategySelector.resolveStrategy(Interceptor.class,sessionFactoryInterceptorSetting);
    sfBuilder.applyInterceptor(sessionFactoryInterceptor);
  }
  final Object sessionFactoryObserverSetting=configurationValues.remove(AvailableSettings.SESSION_FACTORY_OBSERVER);
  if (sessionFactoryObserverSetting != null) {
    final SessionFactoryObserver suppliedSessionFactoryObserver=strategySelector.resolveStrategy(SessionFactoryObserver.class,sessionFactoryObserverSetting);
    sfBuilder.addSessionFactoryObservers(suppliedSessionFactoryObserver);
  }
  sfBuilder.addSessionFactoryObservers(ServiceRegistryCloser.INSTANCE);
  sfBuilder.applyEntityNotFoundDelegate(JpaEntityNotFoundDelegate.INSTANCE);
  if (this.validatorFactory != null) {
    sfBuilder.applyValidatorFactory(validatorFactory);
  }
  if (this.cdiBeanManager != null) {
    sfBuilder.applyBeanManager(cdiBeanManager);
  }
}
