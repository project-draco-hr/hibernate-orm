{
  this.loadedState=updatedState;
  setLockMode(LockMode.WRITE);
  if (getPersister().isVersioned()) {
    this.version=nextVersion;
    getPersister().setPropertyValue(entity,getPersister().getVersionProperty(),nextVersion);
  }
  if (getPersister().getInstrumentationMetadata().isInstrumented()) {
    final FieldInterceptor interceptor=getPersister().getInstrumentationMetadata().extractInterceptor(entity);
    if (interceptor != null) {
      interceptor.clearDirty();
    }
  }
  if (entity instanceof SelfDirtinessTracker) {
    ((SelfDirtinessTracker)entity).$$_hibernate_clearDirtyAttributes();
  }
  persistenceContext.getSession().getFactory().getCustomEntityDirtinessStrategy().resetDirty(entity,getPersister(),(Session)persistenceContext.getSession());
}
