{
  DocumentBuilderFactory docBuilderFactory=DocumentBuilderFactory.newInstance();
  DocumentBuilder builder=docBuilderFactory.newDocumentBuilder();
  Document doc=builder.newDocument();
  Element root=doc.createElement(DOCUMENT_ROOT);
  doc.appendChild(root);
  Node imported=doc.importNode(config,true);
  root.appendChild(imported);
  DOMImplementation domImpl=doc.getImplementation();
  DOMImplementationLS impl=(DOMImplementationLS)domImpl.getFeature("LS","3.0");
  LSSerializer writer=impl.createLSSerializer();
  LSOutput output=impl.createLSOutput();
  output.setEncoding("UTF-8");
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  output.setByteStream(baos);
  writer.write(doc,output);
  ByteArrayInputStream is=new ByteArrayInputStream(baos.toByteArray());
  return parseStream(is);
}
