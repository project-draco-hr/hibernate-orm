{
synchronized (checkouts) {
    Integer count=(Integer)checkouts.get(configName);
    if (count == null || count.intValue() < 1)     throw new IllegalStateException("invalid count of " + count + " for "+ configName);
    Integer newVal=new Integer(count.intValue() - 1);
    checkouts.put(configName,newVal);
    return newVal.intValue();
  }
}
