{
  final Object KEY=TestingKeyFactory.generateEntityCacheKey(KEY_BASE + testCount++);
  long txTimestamp=System.currentTimeMillis();
  BatchModeTransactionManager.getInstance().begin();
  assertNull(localAccessStrategy.get(localSession,KEY,System.currentTimeMillis()));
  if (minimal)   localAccessStrategy.putFromLoad(localSession,KEY,VALUE1,txTimestamp,1,true);
 else   localAccessStrategy.putFromLoad(localSession,KEY,VALUE1,txTimestamp,1);
  sleep(250);
  Object expected=isUsingInvalidation() ? null : VALUE1;
  assertEquals(expected,remoteAccessStrategy.get(remoteSession,KEY,System.currentTimeMillis()));
  BatchModeTransactionManager.getInstance().commit();
  assertEquals(VALUE1,localAccessStrategy.get(localSession,KEY,System.currentTimeMillis()));
  assertEquals(expected,remoteAccessStrategy.get(remoteSession,KEY,System.currentTimeMillis()));
}
