{
  if (querySpaceByUid.containsKey(uid)) {
    throw new IllegalStateException("Encountered duplicate QuerySpace uid : " + uid);
  }
  final EntityQuerySpaceImpl space=new EntityQuerySpaceImpl(entityPersister,uid,this,true,sessionFactory);
  registerQuerySpace(space);
  roots.add(space);
  return space;
}
