{
  final String utName=getUserTransactionName();
  log.trace("Attempting to locate UserTransaction via JNDI [{}]",utName);
  try {
    UserTransaction ut=(UserTransaction)getInitialContext().lookup(utName);
    if (ut == null) {
      throw new TransactionException("Naming service lookup for UserTransaction returned null [" + utName + "]");
    }
    log.trace("Obtained UserTransaction");
    return ut;
  }
 catch (  NamingException ne) {
    throw new TransactionException("Could not find UserTransaction in JNDI [" + utName + "]",ne);
  }
}
