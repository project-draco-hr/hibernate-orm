{
  boolean skipCacheStore=false;
  if (!isValid()) {
    skipCacheStore=true;
  }
  if (!checkValid()) {
    return null;
  }
  Object result=null;
  Map map=transactionContext.get(session);
  if (map != null) {
    result=map.get(key);
  }
  if (result == null) {
    if (skipCacheStore) {
      result=getCache.withFlags(Flag.SKIP_CACHE_STORE).get(key);
    }
 else {
      result=getCache.get(key);
    }
  }
  return result;
}
