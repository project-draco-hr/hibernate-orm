{
  boolean skipCacheStore=false;
  if (!isValid()) {
    skipCacheStore=true;
  }
  if (!checkValid()) {
    return null;
  }
  Object result;
  if (skipCacheStore) {
    result=getCache.withFlags(Flag.SKIP_CACHE_STORE).get(key);
  }
 else {
    result=getCache.get(key);
  }
  if (result == null) {
    Map map=transactionContext.get(session);
    if (map != null) {
      result=map.get(key);
    }
  }
  return result;
}
