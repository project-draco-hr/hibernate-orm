{
  if (StringHelper.isEmpty(typeSource.getName())) {
    return null;
  }
  String typeName=typeSource.getName();
  Properties typeParameters=new Properties();
  ;
  final TypeDefinition typeDefinition=sourceDocument.getMetadataCollector().getTypeDefinition(typeName);
  if (typeDefinition != null) {
    typeName=typeDefinition.getTypeImplementorClass().getName();
    if (typeDefinition.getParameters() != null) {
      typeParameters.putAll(typeDefinition.getParameters());
    }
  }
  if (typeSource.getParameters() != null) {
    typeParameters.putAll(typeSource.getParameters());
  }
  return new TypeResolution(typeName,typeParameters);
}
