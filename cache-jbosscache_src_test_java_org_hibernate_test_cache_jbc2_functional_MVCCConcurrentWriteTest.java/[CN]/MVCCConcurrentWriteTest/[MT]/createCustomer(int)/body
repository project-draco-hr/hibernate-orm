{
  Customer customer=null;
  beginTx();
  try {
    customer=new Customer();
    customer.setName("customer_" + nameSuffix);
    customer.setContacts(new HashSet<Contact>());
    getEnvironment().getSessionFactory().getCurrentSession().persist(customer);
  }
 catch (  Exception e) {
    setRollbackOnly();
    throw e;
  }
 finally {
    commitTx();
  }
  return customer;
}
