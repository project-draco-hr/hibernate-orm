{
  if (!proxy.getHibernateLazyInitializer().isUninitialized()) {
    return proxy.getHibernateLazyInitializer().getImplementation();
  }
  SessionImplementor sessionImplementor=proxy.getHibernateLazyInitializer().getSession();
  Session tempSession=sessionImplementor == null ? sessionFactoryImplementor.openTemporarySession() : sessionImplementor.getFactory().openTemporarySession();
  try {
    proxy.getHibernateLazyInitializer().setSession((SessionImplementor)tempSession);
    proxy.getHibernateLazyInitializer().initialize();
    return proxy.getHibernateLazyInitializer().getImplementation();
  }
  finally {
    tempSession.close();
  }
}
