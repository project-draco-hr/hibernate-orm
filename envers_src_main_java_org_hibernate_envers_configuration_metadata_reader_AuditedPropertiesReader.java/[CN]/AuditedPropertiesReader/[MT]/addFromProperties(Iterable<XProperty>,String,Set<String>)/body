{
  for (  XProperty property : properties) {
    if (persistentProperties.contains(property.getName())) {
      Value propertyValue=persistentPropertiesSource.getProperty(property.getName()).getValue();
      PropertyAuditingData propertyData;
      boolean isAudited;
      if (propertyValue instanceof Component) {
        ComponentAuditingData componentData=new ComponentAuditingData();
        isAudited=fillPropertyData(property,componentData,accessType);
        PersistentPropertiesSource componentPropertiesSource=new ComponentPropertiesSource((Component)propertyValue);
        new AuditedPropertiesReader(ModificationStore.FULL,componentPropertiesSource,componentData,globalCfg,reflectionManager,propertyNamePrefix + MappingTools.createComponentPrefix(property.getName())).read();
        propertyData=componentData;
      }
 else {
        propertyData=new PropertyAuditingData();
        isAudited=fillPropertyData(property,propertyData,accessType);
      }
      if (isAudited) {
        auditedPropertiesHolder.addPropertyAuditingData(property.getName(),propertyData);
      }
    }
  }
}
