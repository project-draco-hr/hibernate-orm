{
  if (attributeNode.getAttribute().isAssociation()) {
    if (attributeNode.getAttribute().isCollection()) {
      return new CollectionFetch((SessionFactoryImplementor)attributeNode.entityManagerFactory().getSessionFactory(),LockMode.NONE,fetchOwner,new FetchStrategy(FetchTiming.IMMEDIATE,FetchStyle.SELECT),attributeNode.getAttributeName());
    }
 else {
      EntityType entityType=(EntityType)Helper.resolveType((SessionFactoryImplementor)attributeNode.entityManagerFactory().getSessionFactory(),attributeNode.getAttribute());
      return new EntityFetch((SessionFactoryImplementor)attributeNode.entityManagerFactory().getSessionFactory(),LockMode.NONE,fetchOwner,attributeNode.getAttributeName(),entityType,new FetchStrategy(FetchTiming.IMMEDIATE,FetchStyle.SELECT));
    }
  }
 else {
    return new CompositeFetch((SessionFactoryImplementor)attributeNode.entityManagerFactory().getSessionFactory(),fetchOwner,attributeNode.getAttributeName());
  }
}
