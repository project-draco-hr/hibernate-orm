{
  Department department=new Department();
  department.name="Sales";
  Employee employee1=new Employee();
  employee1.department=department;
  Employee employee2=new Employee();
  employee2.department=department;
  Session s=openSession();
  s.getTransaction().begin();
  s.persist(department);
  s.persist(employee1);
  s.persist(employee2);
  s.getTransaction().commit();
  s.clear();
  s.getTransaction().begin();
  Query query=s.createQuery("FROM QueryHintTest$Employee e WHERE e.department.name = :departmentName").addQueryHint("ALL_ROWS").setParameter("departmentName","Sales");
  List results=query.list();
  s.getTransaction().commit();
  s.clear();
  assertEquals(results.size(),2);
  assertTrue(QueryHintTestDialect.getProcessedSql().contains("select /*+ ALL_ROWS */"));
  QueryHintTestDialect.resetProcessedSql();
  s.getTransaction().begin();
  query=s.createQuery("FROM QueryHintTest$Employee e WHERE e.department.name = :departmentName").addQueryHint("ALL_ROWS").addQueryHint("USE_CONCAT").setParameter("departmentName","Sales");
  results=query.list();
  s.getTransaction().commit();
  s.clear();
  assertEquals(results.size(),2);
  assertTrue(QueryHintTestDialect.getProcessedSql().contains("select /*+ ALL_ROWS, USE_CONCAT */"));
  QueryHintTestDialect.resetProcessedSql();
  s.getTransaction().begin();
  query=s.createQuery("FROM QueryHintTest$Employee e WHERE e.department.name = :departmentName").setComment("this is a test").addQueryHint("ALL_ROWS").setParameter("departmentName","Sales");
  results=query.list();
  s.getTransaction().commit();
  s.clear();
  assertEquals(results.size(),2);
  assertTrue(QueryHintTestDialect.getProcessedSql().contains("select /*+ ALL_ROWS */"));
  QueryHintTestDialect.resetProcessedSql();
  s.getTransaction().begin();
  Criteria criteria=s.createCriteria(Employee.class).addQueryHint("ALL_ROWS").createCriteria("department").add(Restrictions.eq("name","Sales"));
  results=criteria.list();
  s.getTransaction().commit();
  s.close();
  assertEquals(results.size(),2);
  assertTrue(QueryHintTestDialect.getProcessedSql().contains("select /*+ ALL_ROWS */"));
}
