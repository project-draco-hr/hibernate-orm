{
  LOG.tracef("Starting transaction afterCompletion callback [status=%s]",status);
  if (!transactionCoordinator.isActive()) {
    return;
  }
  try {
    afterCompletionAction.doAction(transactionCoordinator,status);
    transactionCoordinator.afterTransaction(null,status);
  }
  finally {
    reset();
    if (transactionContext().shouldAutoClose() && !transactionContext().isClosed()) {
      LOG.trace("Automatically closing session");
      transactionContext().managedClose();
    }
  }
}
