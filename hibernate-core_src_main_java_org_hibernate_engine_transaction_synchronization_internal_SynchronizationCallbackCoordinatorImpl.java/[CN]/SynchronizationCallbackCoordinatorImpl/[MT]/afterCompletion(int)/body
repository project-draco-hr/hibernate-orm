{
  if (!settings.isJtaTrackByThread() || isRegistrationThread()) {
    doAfterCompletion(status);
  }
 else   if (JtaStatusHelper.isRollback(status)) {
    LOG.warnv("Transaction afterCompletion called by a background thread! Delaying action until the original thread can handle it. [status={0}]",status);
    delayedCompletionHandlingStatus=status;
  }
}
