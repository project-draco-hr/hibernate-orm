{
  Session session=openSession();
  session.getTransaction().begin();
  Assert.assertEquals(Arrays.asList(new NumValue(1,"Line 1"),new NumValue(2,"Line 2")),session.getNamedQuery("NumValue.getSomeValues").list());
  JdbcCoordinator jdbcCoordinator=((SessionImplementor)session).getTransactionCoordinator().getJdbcCoordinator();
  Assert.assertFalse("Prepared statement and result set should be released after query execution.",jdbcCoordinator.hasRegisteredResources());
  session.getTransaction().commit();
  session.close();
}
