{
  final AggregatedCollectionEventListener.EventEntry eventEntry=collectionListenerIntegrator.getListener().getEventEntryList().get(eventIndex);
  final AbstractCollectionEvent event=eventEntry.getEvent();
  assertTyping(expectedEventType,event);
  assertEquals(expectedOwner.getClass().getName(),event.getAffectedOwnerEntityName());
  assertEquals(expectedOwner.getId(),event.getAffectedOwnerIdOrNull());
  if (event instanceof PreCollectionUpdateEvent || event instanceof PreCollectionRemoveEvent || event instanceof PostCollectionRecreateEvent) {
    List<Identifiable> snapshot=(List)eventEntry.getSnapshotAtTimeOfEventHandling();
    assertEquals(expectedCollectionEntrySnapshot.size(),snapshot.size());
    for (int i=0; i < expectedCollectionEntrySnapshot.size(); i++) {
      Identifiable expected=expectedCollectionEntrySnapshot.get(i);
      Identifiable found=snapshot.get(i);
      assertEquals(expected.getClass().getName(),found.getClass().getName());
      assertEquals(expected.getId(),found.getId());
    }
  }
}
