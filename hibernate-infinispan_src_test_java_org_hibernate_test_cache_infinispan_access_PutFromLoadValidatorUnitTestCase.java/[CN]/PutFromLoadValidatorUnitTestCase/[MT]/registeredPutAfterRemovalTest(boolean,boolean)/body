{
  PutFromLoadValidator testee=new PutFromLoadValidator(new DefaultCacheManager(),transactional ? tm : null,PutFromLoadValidator.NAKED_PUT_INVALIDATION_PERIOD);
  if (removeRegion) {
    testee.invalidateRegion();
  }
 else {
    testee.invalidateKey(KEY1);
  }
  if (transactional) {
    tm.begin();
  }
  testee.registerPendingPut(KEY1);
  boolean lockable=testee.acquirePutFromLoadLock(KEY1);
  try {
    assertTrue(lockable);
  }
  finally {
    if (lockable) {
      testee.releasePutFromLoadLock(KEY1);
    }
  }
}
