{
  for (  ClassInfo ci : index.getKnownClasses()) {
    DotName name=ci.name();
    if (indexedClassInfoAnnotationsMap.containsKey(name)) {
      continue;
    }
    if (ci.annotations() != null && !ci.annotations().isEmpty()) {
      Map<DotName,List<AnnotationInstance>> tmp=new HashMap<DotName,List<AnnotationInstance>>(ci.annotations());
      DefaultConfigurationHelper.INSTANCE.applyDefaults(tmp,globalDefaults);
      mergeAnnotationMap(tmp,annotations);
      classes.put(name,ci);
      if (ci.superName() != null) {
        addSubClasses(ci.superName(),ci);
      }
      if (ci.interfaces() != null && ci.interfaces().length > 0) {
        addImplementors(ci.interfaces(),ci);
      }
    }
  }
  return Index.create(annotations,subclasses,implementors,classes);
}
