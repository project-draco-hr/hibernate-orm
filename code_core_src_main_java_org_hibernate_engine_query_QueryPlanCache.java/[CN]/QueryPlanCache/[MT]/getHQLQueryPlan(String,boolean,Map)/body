{
  HQLQueryPlanKey key=new HQLQueryPlanKey(queryString,shallow,enabledFilters);
  HQLQueryPlan plan=(HQLQueryPlan)planCache.get(key);
  if (plan == null) {
    if (log.isTraceEnabled()) {
      log.trace("unable to locate HQL query plan in cache; generating (" + queryString + ")");
    }
    plan=new HQLQueryPlan(queryString,shallow,enabledFilters,factory);
  }
 else {
    if (log.isTraceEnabled()) {
      log.trace("located HQL query plan in cache (" + queryString + ")");
    }
  }
  planCache.put(key,plan);
  return plan;
}
