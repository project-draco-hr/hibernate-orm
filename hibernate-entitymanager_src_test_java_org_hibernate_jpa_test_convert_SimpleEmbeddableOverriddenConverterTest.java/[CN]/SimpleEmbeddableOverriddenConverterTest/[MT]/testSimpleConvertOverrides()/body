{
  final PersistenceUnitDescriptorAdapter pu=new PersistenceUnitDescriptorAdapter(){
    @Override public List<String> getManagedClassNames(){
      return Arrays.asList(Person.class.getName());
    }
  }
;
  final Map settings=new HashMap();
  EntityManagerFactory emf=Bootstrap.getEntityManagerFactoryBuilder(pu,settings).build();
  final SessionFactoryImplementor sfi=emf.unwrap(SessionFactoryImplementor.class);
  try {
    final EntityPersister ep=sfi.getEntityPersister(Person.class.getName());
    CompositeType homeAddressType=assertTyping(CompositeType.class,ep.getPropertyType("homeAddress"));
    Type homeAddressCityType=findCompositeAttributeType(homeAddressType,"city");
    assertTyping(StringType.class,homeAddressCityType);
  }
  finally {
    emf.close();
  }
}
