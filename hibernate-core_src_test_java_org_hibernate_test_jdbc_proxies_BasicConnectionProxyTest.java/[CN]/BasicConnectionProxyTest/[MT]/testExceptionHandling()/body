{
  LogicalConnectionImpl logicalConnection=new LogicalConnectionImpl(null,ConnectionReleaseMode.AFTER_TRANSACTION,services,new JdbcConnectionAccessImpl(services.getConnectionProvider()));
  Connection proxiedConnection=ProxyBuilder.buildConnection(logicalConnection);
  try {
    proxiedConnection.prepareStatement("select count(*) from NON_EXISTENT").executeQuery();
  }
 catch (  SQLException e) {
    fail("incorrect exception type : sqlexception");
  }
catch (  JDBCException ok) {
  }
 finally {
    logicalConnection.close();
  }
}
