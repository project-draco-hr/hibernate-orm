{
  PersistenceMetadata metadata=new PersistenceMetadata();
{
    Ejb3Configuration cfg=new Ejb3Configuration();
    Ejb3Configuration configured=cfg.configure(metadata,Collections.singletonMap(AvailableSettings.VALIDATION_MODE,ValidationMode.CALLBACK));
    assertEquals(ValidationMode.CALLBACK.name(),configured.getProperties().get(AvailableSettings.VALIDATION_MODE));
  }
{
    Ejb3Configuration cfg=new Ejb3Configuration();
    Ejb3Configuration configured=cfg.configure(metadata,Collections.singletonMap(AvailableSettings.VALIDATION_MODE,ValidationMode.CALLBACK.name()));
    assertEquals(ValidationMode.CALLBACK.name(),configured.getProperties().get(AvailableSettings.VALIDATION_MODE));
  }
  metadata.setValidationMode(ValidationMode.AUTO.name());
{
    Ejb3Configuration cfg=new Ejb3Configuration();
    Ejb3Configuration configured=cfg.configure(metadata,null);
    assertEquals(ValidationMode.AUTO.name(),configured.getProperties().get(AvailableSettings.VALIDATION_MODE));
  }
{
    Ejb3Configuration cfg=new Ejb3Configuration();
    Ejb3Configuration configured=cfg.configure(metadata,Collections.singletonMap(AvailableSettings.VALIDATION_MODE,ValidationMode.NONE));
    assertEquals(ValidationMode.NONE.name(),configured.getProperties().get(AvailableSettings.VALIDATION_MODE));
  }
}
