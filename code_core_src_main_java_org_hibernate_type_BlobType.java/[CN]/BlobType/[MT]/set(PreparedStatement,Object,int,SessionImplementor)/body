{
  if (value == null) {
    st.setNull(index,Types.BLOB);
  }
 else {
    if (value instanceof SerializableBlob) {
      value=((SerializableBlob)value).getWrappedBlob();
    }
    final boolean useInputStream=session.getFactory().getDialect().useInputStreamToInsertBlob() && (value instanceof BlobImpl);
    if (useInputStream) {
      BlobImpl blob=(BlobImpl)value;
      st.setBinaryStream(index,blob.getBinaryStream(),(int)blob.length());
    }
 else {
      st.setBlob(index,(Blob)value);
    }
  }
}
