{
  Session session=openSession();
  session.beginTransaction();
  EmployeeGroup employeegroup=new EmployeeGroup(new EmployeeGroupId("a","b"));
  employeegroup.addEmployee(new Employee("stliu"));
  employeegroup.addEmployee(new Employee("david"));
  session.save(employeegroup);
  employeegroup=new EmployeeGroup(new EmployeeGroupId("c","d"));
  employeegroup.addEmployee(new Employee("gail"));
  employeegroup.addEmployee(new Employee("steve"));
  session.save(employeegroup);
  session.getTransaction().commit();
  session.close();
  session=openSession();
  session.beginTransaction();
  List<EmployeeGroupId> parameters=new ArrayList<EmployeeGroupId>();
  parameters.add(new EmployeeGroupId("a","b"));
  parameters.add(new EmployeeGroupId("c","d"));
  parameters.add(new EmployeeGroupId("e","f"));
  List result=session.createQuery("select eg from EmployeeGroup eg where eg.id in (:employeegroupIds)").setParameterList("employeegroupIds",parameters).list();
  Assert.assertEquals(2,result.size());
  employeegroup=(EmployeeGroup)result.get(0);
  Assert.assertEquals("a",employeegroup.getId().getGroupName());
  Assert.assertNotNull(employeegroup.getEmployees());
  Assert.assertEquals(2,employeegroup.getEmployees().size());
  session.getTransaction().commit();
  session.close();
  session=openSession();
  session.beginTransaction();
  List<EmployeeGroup> egs=session.createQuery("from EmployeeGroup").list();
  for (  EmployeeGroup eg : egs) {
    eg.getEmployees().clear();
  }
  session.flush();
  session.createQuery("delete from EmployeeGroup").executeUpdate();
  session.createQuery("delete from Employee").executeUpdate();
  session.getTransaction().commit();
  session.close();
}
