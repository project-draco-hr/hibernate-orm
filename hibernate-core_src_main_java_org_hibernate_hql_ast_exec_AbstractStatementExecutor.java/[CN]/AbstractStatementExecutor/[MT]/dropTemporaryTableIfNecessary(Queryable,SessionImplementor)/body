{
  if (getFactory().getDialect().dropTemporaryTableAfterUse()) {
    IsolatedWork work=new IsolatedWork(){
      public void doWork(      Connection connection) throws HibernateException {
        final String command=session.getFactory().getDialect().getDropTemporaryTableString() + ' ' + persister.getTemporaryIdTableName();
        try {
          Statement statement=connection.createStatement();
          try {
            statement=connection.createStatement();
            statement.executeUpdate(command);
          }
  finally {
            try {
              statement.close();
            }
 catch (            Throwable ignore) {
            }
          }
        }
 catch (        Exception e) {
          log.warn("unable to drop temporary id table after use [" + e.getMessage() + "]");
        }
      }
    }
;
    if (shouldIsolateTemporaryTableDDL()) {
      if (getFactory().getSettings().isDataDefinitionInTransactionSupported()) {
        Isolater.doIsolatedWork(work,session);
      }
 else {
        Isolater.doNonTransactedWork(work,session);
      }
    }
 else {
      work.doWork(session.getJDBCContext().getConnectionManager().getConnection());
      session.getJDBCContext().getConnectionManager().afterStatement();
    }
  }
 else {
    PreparedStatement ps=null;
    try {
      ps=session.getBatcher().prepareStatement("delete from " + persister.getTemporaryIdTableName());
      ps.executeUpdate();
    }
 catch (    Throwable t) {
      log.warn("unable to cleanup temporary id table after use [" + t + "]");
    }
 finally {
      if (ps != null) {
        try {
          session.getBatcher().closeStatement(ps);
        }
 catch (        Throwable ignore) {
        }
      }
    }
  }
}
