{
  final Object entityId=delegate.mapToIdFromMap(data);
  Object value=null;
  if (entityId != null) {
    if (versionsReader.getFirstLevelCache().contains(referencedEntityName,revision,entityId)) {
      value=versionsReader.getFirstLevelCache().get(referencedEntityName,revision,entityId);
    }
 else {
      final EntityInfo referencedEntity=getEntityInfo(verCfg,referencedEntityName);
      boolean ignoreNotFound=false;
      if (!referencedEntity.isAudited()) {
        final String referencingEntityName=verCfg.getEntCfg().getEntityNameForVersionsEntityName((String)data.get("$type$"));
        ignoreNotFound=verCfg.getEntCfg().get(referencingEntityName).getRelationDescription(getPropertyData().getName()).isIgnoreNotFound();
      }
      if (ignoreNotFound) {
        value=ToOneEntityLoader.loadImmediate(versionsReader,referencedEntity.getEntityClass(),referencedEntityName,entityId,revision,RevisionType.DEL.equals(data.get(verCfg.getAuditEntCfg().getRevisionTypePropName())),verCfg);
      }
 else {
        value=ToOneEntityLoader.createProxyOrLoadImmediate(versionsReader,referencedEntity.getEntityClass(),referencedEntityName,entityId,revision,RevisionType.DEL.equals(data.get(verCfg.getAuditEntCfg().getRevisionTypePropName())),verCfg);
      }
    }
  }
  setPropertyValue(obj,value);
}
