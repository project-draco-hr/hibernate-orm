{
  String resource1="org/hibernate/test/schemaupdate/2_Version.hbm.xml";
  String resource2="org/hibernate/test/schemaupdate/3_Version.hbm.xml";
  Configuration v1cfg=new Configuration();
  v1cfg.addResource(resource1);
  new SchemaExport(v1cfg).execute(false,true,true,false);
  Configuration v2cfg=new Configuration();
  v2cfg.getProperties().put(AvailableSettings.UNIQUE_CONSTRAINT_SCHEMA_UPDATE_STRATEGY,strategy);
  v2cfg.addResource(resource2);
  SchemaUpdate v2schemaUpdate=new SchemaUpdate(serviceRegistry,v2cfg);
  v2schemaUpdate.execute(true,true);
  assertEquals(0,v2schemaUpdate.getExceptions().size());
  Configuration v3cfg=new Configuration();
  v3cfg.getProperties().put(AvailableSettings.UNIQUE_CONSTRAINT_SCHEMA_UPDATE_STRATEGY,strategy);
  v3cfg.addResource(resource2);
  SchemaUpdate v3schemaUpdate=new SchemaUpdate(serviceRegistry,v3cfg);
  v3schemaUpdate.execute(true,true);
  assertEquals(0,v3schemaUpdate.getExceptions().size());
  new SchemaExport(serviceRegistry,v3cfg).drop(false,true);
}
