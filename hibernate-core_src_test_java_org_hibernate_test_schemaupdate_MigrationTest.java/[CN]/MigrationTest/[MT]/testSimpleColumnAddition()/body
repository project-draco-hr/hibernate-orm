{
  String resource1="org/hibernate/test/schemaupdate/1_Version.hbm.xml";
  String resource2="org/hibernate/test/schemaupdate/2_Version.hbm.xml";
  MetadataImplementor v1metadata=(MetadataImplementor)new MetadataSources(serviceRegistry).addResource(resource1).buildMetadata();
  new SchemaExport(v1metadata).drop(false,true);
  SchemaUpdate v1schemaUpdate=new SchemaUpdate(serviceRegistry,v1metadata);
  v1schemaUpdate.execute(true,true);
  assertEquals(0,v1schemaUpdate.getExceptions().size());
  MetadataImplementor v2metadata=(MetadataImplementor)new MetadataSources(serviceRegistry).addResource(resource2).buildMetadata();
  SchemaUpdate v2schemaUpdate=new SchemaUpdate(serviceRegistry,v2metadata);
  v2schemaUpdate.execute(true,true);
  assertEquals(0,v2schemaUpdate.getExceptions().size());
  new SchemaExport(serviceRegistry,v2metadata).drop(false,true);
}
