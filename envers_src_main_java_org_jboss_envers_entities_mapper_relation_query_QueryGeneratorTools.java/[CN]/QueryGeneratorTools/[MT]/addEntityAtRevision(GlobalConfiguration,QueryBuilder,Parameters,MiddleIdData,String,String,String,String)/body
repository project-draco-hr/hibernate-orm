{
  QueryBuilder maxERevQb=qb.newSubQueryBuilder(idData.getVersionsEntityName(),alias2);
  maxERevQb.addProjection("max",revisionPropertyPath,false);
  Parameters maxERevQbParameters=maxERevQb.getRootParameters();
  maxERevQbParameters.addWhereWithNamedParam(revisionPropertyPath,"<=","revision");
  idData.getOriginalMapper().addIdsEqualToQuery(maxERevQbParameters,alias1 + "." + originalIdPropertyName,alias2 + "." + originalIdPropertyName);
  rootParameters.addWhere("e." + revisionPropertyPath,false,globalCfg.getCorrelatedSubqueryOperator(),maxERevQb);
}
