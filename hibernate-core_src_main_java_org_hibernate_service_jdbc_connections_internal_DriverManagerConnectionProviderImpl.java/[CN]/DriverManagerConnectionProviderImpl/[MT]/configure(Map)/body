{
  LOG.usingHibernateBuiltInConnectionPool();
  String driverClassName=(String)configurationValues.get(AvailableSettings.DRIVER);
  if (driverClassName == null) {
    LOG.jdbcDriverNotSpecified(AvailableSettings.DRIVER);
  }
 else {
    try {
      serviceRegistry.getService(ClassLoaderService.class).classForName(driverClassName);
    }
 catch (    ClassLoadingException e) {
      throw new ClassLoadingException("Specified JDBC Driver " + driverClassName + " class not found",e);
    }
  }
  poolSize=ConfigurationHelper.getInt(AvailableSettings.POOL_SIZE,configurationValues,20);
  LOG.hibernateConnectionPoolSize(poolSize);
  autocommit=ConfigurationHelper.getBoolean(AvailableSettings.AUTOCOMMIT,configurationValues);
  LOG.autoCommitMode(autocommit);
  isolation=ConfigurationHelper.getInteger(AvailableSettings.ISOLATION,configurationValues);
  if (isolation != null)   LOG.jdbcIsolationLevel(Environment.isolationLevelToString(isolation.intValue()));
  url=(String)configurationValues.get(AvailableSettings.URL);
  if (url == null) {
    String msg=LOG.jdbcUrlNotSpecified(AvailableSettings.URL);
    LOG.error(msg);
    throw new HibernateException(msg);
  }
  connectionProps=ConnectionProviderInitiator.getConnectionProperties(configurationValues);
  LOG.usingDriver(driverClassName,url);
  if (LOG.isDebugEnabled())   LOG.connectionProperties(connectionProps);
 else   LOG.connectionProperties(ConfigurationHelper.maskOut(connectionProps,"password"));
}
