{
  Coordinate[] co=this.getCoordinates();
  if (!this.isEmpty()) {
    double d=0.0;
    MCoordinate pco=(MCoordinate)co[0];
    if (!keepBeginMeasure || Double.isNaN(pco.m)) {
      pco.m=0.0d;
    }
    MCoordinate mco;
    for (int i=1; i < co.length; i++) {
      mco=(MCoordinate)co[i];
      d+=mco.distance(pco);
      mco.m=d;
      pco=mco;
    }
    this.geometryChanged();
  }
}
