{
  Type[] types=compositeType.getSubtypes();
  String[] propertyNames=compositeType.getPropertyNames();
  int begin=0;
  for (int i=0; i < types.length; i++) {
    int length=types[i].getColumnSpan(getFactory());
    String[] lhsColumns=ArrayHelper.slice(cols,begin,length);
    if (types[i].isAssociationType()) {
      AssociationType associationType=(AssociationType)types[i];
      String[] aliasedLhsColumns=StringHelper.qualify(alias,lhsColumns);
      final PropertyPath subPath=path.append(propertyNames[i]);
      final boolean[] propertyNullability=compositeType.getPropertyNullability();
      final JoinType joinType=getJoinType(associationType,compositeType.getFetchMode(i),subPath,persister.getTableName(),lhsColumns,propertyNullability == null || propertyNullability[i],currentDepth,compositeType.getCascadeStyle(i));
      addAssociationToJoinTreeIfNecessary(associationType,aliasedLhsColumns,alias,subPath,currentDepth,joinType);
    }
 else     if (types[i].isComponentType()) {
      final PropertyPath subPath=path.append(propertyNames[i]);
      walkCompositeElementTree((CompositeType)types[i],lhsColumns,persister,alias,subPath,currentDepth);
    }
    begin+=length;
  }
}
