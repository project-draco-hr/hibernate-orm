{
  if (attributeBinding.getReferencedEntityName() == null) {
    throw new IllegalArgumentException("attributeBinding has null entityName: " + attributeBinding.getAttribute().getName());
  }
  EntityBinding entityBinding=metadata.getEntityBinding(attributeBinding.getReferencedEntityName());
  if (entityBinding == null) {
    throw new org.hibernate.MappingException("Attribute [" + attributeBinding.getAttribute().getName() + "] refers to unknown entity: ["+ attributeBinding.getReferencedEntityName()+ "]");
  }
  AttributeBinding referencedAttributeBinding=attributeBinding.isPropertyReference() ? entityBinding.locateAttributeBinding(attributeBinding.getReferencedAttributeName()) : entityBinding.getHierarchyDetails().getEntityIdentifier().getValueBinding();
  if (referencedAttributeBinding == null) {
    throw new MappingException("Attribute [" + attributeBinding.getAttribute().getName() + "] refers to unknown attribute: ["+ attributeBinding.getReferencedEntityName()+ "]");
  }
  attributeBinding.resolveReference(referencedAttributeBinding);
  referencedAttributeBinding.addEntityReferencingAttributeBinding(attributeBinding);
}
