{
  if (attributeBinding.getReferencedEntityName() == null) {
    throw new IllegalArgumentException("attributeBinding has null entityName: " + attributeBinding.getAttribute().getName());
  }
  EntityBinding entityBinding=metadata.getEntityBinding(attributeBinding.getReferencedEntityName());
  if (entityBinding == null) {
    throw new org.hibernate.MappingException(String.format("Attribute [%s] refers to unknown entity: [%s]",attributeBinding.getAttribute().getName(),attributeBinding.getReferencedEntityName()));
  }
  AttributeBinding referencedAttributeBinding=attributeBinding.isPropertyReference() ? entityBinding.locateAttributeBinding(attributeBinding.getReferencedAttributeName()) : entityBinding.getHierarchyDetails().getEntityIdentifier().getValueBinding();
  if (referencedAttributeBinding == null) {
    throw new org.hibernate.MappingException(String.format("Attribute [%s] refers to unknown attribute: [%s]",attributeBinding.getAttribute().getName(),attributeBinding.getReferencedEntityName()));
  }
  attributeBinding.resolveReference(referencedAttributeBinding);
  referencedAttributeBinding.addEntityReferencingAttributeBinding(attributeBinding);
}
