{
  StateJarVisitor stateJarVisitor=visitors.get(jar);
  if (stateJarVisitor == null) {
    Filter[] filters=new Filter[3];
    filters[PACKAGE_FILTER_INDEX]=new PackageFilter(false,null){
      public boolean accept(      String javaElementName){
        return true;
      }
    }
;
    filters[CLASS_FILTER_INDEX]=new ClassFilter(false,new Class[]{Entity.class,MappedSuperclass.class,Embeddable.class}){
      public boolean accept(      String javaElementName){
        return true;
      }
    }
;
    filters[FILE_FILTER_INDEX]=new FileFilter(true){
      public boolean accept(      String javaElementName){
        return javaElementName.endsWith("hbm.xml") || javaElementName.endsWith(META_INF_ORM_XML);
      }
    }
;
    stateJarVisitor=new StateJarVisitor(JarVisitorFactory.getVisitor(jar,filters));
    visitors.put(jar,stateJarVisitor);
  }
  return stateJarVisitor.visitor;
}
