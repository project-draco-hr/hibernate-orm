{
  this.sessionFactory=sessionFactory;
  this.transactionType=transactionType;
  this.discardOnClose=discardOnClose;
  this.sessionInterceptorClass=sessionInterceptorClass;
  @SuppressWarnings("unchecked") final Iterator<PersistentClass> classes=cfg.getClassMappings();
  this.metamodel=new MetamodelImpl(classes);
  this.criteriaQueryBuilder=new QueryBuilderImpl(this);
}
