{
  int id=5;
  Session s;
  Transaction tx;
  s=openSession();
  tx=s.beginTransaction();
  Sky sky=new Sky();
  sky.id=new Long(id++);
  sky.color="green";
  sky.day="monday";
  sky.month="March";
  s.persist(sky);
  tx.commit();
  s.close();
  Sky otherSky=new Sky();
  otherSky.id=new Long(id++);
  otherSky.color="red";
  otherSky.day="friday";
  otherSky.month="March";
  Sky sameSky=new Sky();
  sameSky.id=new Long(id++);
  sameSky.color="green";
  sameSky.day="monday";
  sameSky.month="March";
  s=openSession();
  tx=s.beginTransaction();
  try {
    s.persist(otherSky);
    tx.commit();
    fail("unique constraints not respected");
  }
 catch (  HibernateException e) {
  }
 finally {
    if (tx != null)     tx.rollback();
    s.close();
  }
  s=openSession();
  tx=s.beginTransaction();
  try {
    s.persist(sameSky);
    tx.commit();
    fail("unique constraints not respected");
  }
 catch (  HibernateException e) {
  }
 finally {
    if (tx != null)     tx.rollback();
    s.close();
  }
}
