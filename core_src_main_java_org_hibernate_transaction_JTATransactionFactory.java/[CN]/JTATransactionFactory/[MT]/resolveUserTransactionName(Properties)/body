{
  String utName=properties.getProperty(Environment.USER_TRANSACTION);
  if (utName == null) {
    TransactionManagerLookup lookup=TransactionManagerLookupFactory.getTransactionManagerLookup(properties);
    if (lookup != null) {
      utName=lookup.getUserTransactionName();
    }
  }
  return utName == null ? DEFAULT_USER_TRANSACTION_NAME : utName;
}
