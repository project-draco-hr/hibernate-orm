{
  try {
    final ServiceReference serviceReference=context.getServiceReference(SessionFactory.class.getName());
    final SessionFactoryImplementor sessionFactory=(SessionFactoryImplementor)context.getService(serviceReference);
    final ServiceRegistry serviceRegistry=sessionFactory.getServiceRegistry();
    if (!integrator.passed) {
      testResult.addFailure("Could not discover " + integrator.getClass());
    }
    if (!strategyRegistrationProvider.passed) {
      testResult.addFailure("Could not discover " + strategyRegistrationProvider.getClass());
    }
    if (!typeContributor.passed) {
      testResult.addFailure("Could not discover " + typeContributor.getClass());
    }
  }
 catch (  Exception e) {
    testResult.addFailure("Exception: " + e.getMessage(),e);
  }
}
