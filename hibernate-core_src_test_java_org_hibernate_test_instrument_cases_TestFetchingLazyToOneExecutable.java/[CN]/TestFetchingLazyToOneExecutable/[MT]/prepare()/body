{
  BootstrapServiceRegistryBuilder bsrb=new BootstrapServiceRegistryBuilder();
  ClassLoader classLoader=Thread.currentThread().getContextClassLoader();
  if (classLoader == null) {
    throw new RuntimeException("Isolated ClassLoader not yet set as TCCL");
  }
  if (!InstrumentedClassLoader.class.isInstance(classLoader)) {
    throw new RuntimeException("Isolated ClassLoader not yet set as TCCL");
  }
  bsrb.applyClassLoader(classLoader);
  serviceRegistry=new StandardServiceRegistryBuilder(bsrb.build()).applySetting(Environment.HBM2DDL_AUTO,"create-drop").applySetting(AvailableSettings.USE_SECOND_LEVEL_CACHE,"false").build();
  MetadataSources metadataSources=new MetadataSources(serviceRegistry);
  metadataSources.addAnnotatedClass(Person.class);
  metadataSources.addAnnotatedClass(Passport.class);
  factory=metadataSources.buildMetadata().buildSessionFactory();
  createData();
}
