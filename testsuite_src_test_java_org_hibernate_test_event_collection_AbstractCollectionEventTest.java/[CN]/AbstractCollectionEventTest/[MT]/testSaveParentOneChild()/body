{
  CollectionListeners listeners=new CollectionListeners(getSessions());
  ParentWithCollection parent=createParentWithOneChild("parent","child");
  int index=0;
  checkResult(listeners,listeners.getPreCollectionRecreateListener(),parent,index++);
  checkResult(listeners,listeners.getPostCollectionRecreateListener(),parent,index++);
  Child child=(Child)parent.getChildren().iterator().next();
  if (child instanceof ChildWithBidirectionalManyToMany) {
    checkResult(listeners,listeners.getPreCollectionRecreateListener(),(ChildWithBidirectionalManyToMany)child,index++);
    checkResult(listeners,listeners.getPostCollectionRecreateListener(),(ChildWithBidirectionalManyToMany)child,index++);
  }
  checkNumberOfResults(listeners,index);
}
