{
  File explodedPar=buildExplodedPar();
  addPackageToClasspath(explodedPar);
  Filter[] filters=getFilters();
  String dirPath=explodedPar.toURL().toExternalForm();
  if (dirPath.endsWith("/")) {
    dirPath=dirPath.substring(0,dirPath.length() - 1);
  }
  JarVisitor jarVisitor=new ExplodedJarVisitor(dirPath,filters);
  assertEquals("explodedpar",jarVisitor.getUnqualifiedJarName());
  Set[] entries=jarVisitor.getMatchingEntries();
  assertEquals(1,entries[1].size());
  assertEquals(1,entries[0].size());
  assertEquals(1,entries[2].size());
  Entry entry=new Entry(Carpet.class.getName(),null);
  assertTrue(entries[1].contains(entry));
  for (  Entry localEntry : (Set<Entry>)jarVisitor.getMatchingEntries()[2]) {
    assertNotNull(localEntry.getInputStream());
    localEntry.getInputStream().close();
  }
}
