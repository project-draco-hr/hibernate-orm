{
  File defaultPar=buildDefaultPar();
  File nestedEar=buildNestedEar(defaultPar);
  File nestedEarDir=buildNestedEarDir(defaultPar);
  addPackageToClasspath(nestedEar);
  String jarFileName=nestedEar.toURL().toExternalForm() + "!/defaultpar.par";
  JarProtocolArchiveDescriptor archiveDescriptor=new JarProtocolArchiveDescriptor(StandardArchiveDescriptorFactory.INSTANCE,new URL(jarFileName),"");
  AbstractScannerImpl.ResultCollector resultCollector=new AbstractScannerImpl.ResultCollector(new StandardScanOptions());
  archiveDescriptor.visitArchive(new AbstractScannerImpl.ArchiveContextImpl(new PersistenceUnitDescriptorAdapter(),true,resultCollector));
  validateResults(resultCollector,org.hibernate.jpa.test.pack.defaultpar.ApplicationServer.class,Version.class);
  jarFileName=nestedEarDir.toURL().toExternalForm() + "!/defaultpar.par";
  archiveDescriptor=new JarProtocolArchiveDescriptor(StandardArchiveDescriptorFactory.INSTANCE,new URL(jarFileName),"");
  resultCollector=new AbstractScannerImpl.ResultCollector(new StandardScanOptions());
  archiveDescriptor.visitArchive(new AbstractScannerImpl.ArchiveContextImpl(new PersistenceUnitDescriptorAdapter(),true,resultCollector));
  validateResults(resultCollector,org.hibernate.jpa.test.pack.defaultpar.ApplicationServer.class,Version.class);
}
