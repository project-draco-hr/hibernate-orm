{
  addPackageToClasspath(buildExplodedPar(),buildDefaultPar());
  URL.setURLStreamHandlerFactory(new URLStreamHandlerFactory(){
    public URLStreamHandler createURLStreamHandler(    String protocol){
      if ("vfszip".equals(protocol) || "vfsfile".equals(protocol))       return new URLStreamHandler(){
        protected URLConnection openConnection(        URL u) throws IOException {
          return null;
        }
      }
;
      return null;
    }
  }
);
  URL jarUrl=new URL("file:./target/packages/defaultpar.par");
  JarVisitor jarVisitor=JarVisitorFactory.getVisitor(jarUrl,getFilters(),null);
  assertEquals(FileZippedJarVisitor.class.getName(),jarVisitor.getClass().getName());
  jarUrl=new URL("file:./target/packages/explodedpar");
  jarVisitor=JarVisitorFactory.getVisitor(jarUrl,getFilters(),null);
  assertEquals(ExplodedJarVisitor.class.getName(),jarVisitor.getClass().getName());
  jarUrl=new URL("vfszip:./target/packages/defaultpar.par");
  jarVisitor=JarVisitorFactory.getVisitor(jarUrl,getFilters(),null);
  assertEquals(FileZippedJarVisitor.class.getName(),jarVisitor.getClass().getName());
  jarUrl=new URL("vfsfile:./target/packages/explodedpar");
  jarVisitor=JarVisitorFactory.getVisitor(jarUrl,getFilters(),null);
  assertEquals(ExplodedJarVisitor.class.getName(),jarVisitor.getClass().getName());
}
