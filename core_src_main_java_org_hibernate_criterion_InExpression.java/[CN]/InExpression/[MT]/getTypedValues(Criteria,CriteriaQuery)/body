{
  ArrayList list=new ArrayList();
  Type type=criteriaQuery.getTypeUsingProjection(criteria,propertyName);
  if (type.isComponentType()) {
    AbstractComponentType actype=(AbstractComponentType)type;
    Type[] types=actype.getSubtypes();
    for (int j=0; j < values.length; j++) {
      for (int i=0; i < types.length; i++) {
        Object subval=values[j] == null ? null : actype.getPropertyValues(values[j],EntityMode.POJO)[i];
        list.add(new TypedValue(types[i],subval,EntityMode.POJO));
      }
    }
  }
 else {
    for (int j=0; j < values.length; j++) {
      list.add(new TypedValue(type,values[j],EntityMode.POJO));
    }
  }
  return (TypedValue[])list.toArray(new TypedValue[list.size()]);
}
