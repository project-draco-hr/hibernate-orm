{
  Session s;
  Transaction tx;
  s=openSession();
  tx=s.beginTransaction();
  CompiledCode cc=new CompiledCode();
  Byte[] header=new Byte[2];
  header[0]=new Byte((byte)3);
  header[1]=new Byte((byte)0);
  cc.setHeader(header);
  int codeSize=5;
  byte[] full=new byte[codeSize];
  for (int i=0; i < codeSize; i++) {
    full[i]=(byte)(1 + i);
  }
  cc.setFullCode(full);
  s.persist(cc);
  tx.commit();
  s.close();
  s=openSession();
  tx=s.beginTransaction();
  CompiledCode recompiled=(CompiledCode)s.get(CompiledCode.class,cc.getId());
  assertEquals(recompiled.getHeader()[1],cc.getHeader()[1]);
  assertEquals(recompiled.getFullCode()[codeSize - 1],cc.getFullCode()[codeSize - 1]);
  tx.commit();
  s.close();
}
