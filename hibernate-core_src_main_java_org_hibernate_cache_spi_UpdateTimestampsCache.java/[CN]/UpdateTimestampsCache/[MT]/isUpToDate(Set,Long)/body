{
  readWriteLock.readLock().lock();
  try {
    for (    Serializable space : (Set<Serializable>)spaces) {
      Long lastUpdate=(Long)region.get(space);
      if (lastUpdate == null) {
        if (factory != null && factory.getStatistics().isStatisticsEnabled()) {
          factory.getStatisticsImplementor().updateTimestampsCacheMiss();
        }
      }
 else {
        if (LOG.isDebugEnabled()) {
          LOG.debugf("[%s] last update timestamp: %s",space,lastUpdate + ", result set timestamp: " + timestamp);
        }
        if (factory != null && factory.getStatistics().isStatisticsEnabled()) {
          factory.getStatisticsImplementor().updateTimestampsCacheHit();
        }
        if (lastUpdate >= timestamp)         return false;
      }
    }
    return true;
  }
  finally {
    readWriteLock.readLock().unlock();
  }
}
