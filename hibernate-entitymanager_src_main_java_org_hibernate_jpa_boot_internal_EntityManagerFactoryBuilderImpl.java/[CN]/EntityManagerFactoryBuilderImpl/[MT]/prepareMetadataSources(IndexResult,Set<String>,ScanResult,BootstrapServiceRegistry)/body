{
  MetadataSources metadataSources=new MetadataSources();
  for (  String className : collectedManagedClassNames) {
    final ClassInfo classInfo=jandexIndex.getClassByName(DotName.createSimple(className));
    if (classInfo == null) {
      metadataSources.annotatedMappingClassNames.add(className);
      continue;
    }
    AnnotationInstance converterAnnotation=JandexHelper.getSingleAnnotation(classInfo.annotations(),JPADotNames.CONVERTER);
    if (converterAnnotation != null) {
      metadataSources.converterDescriptors.add(new MetadataSources.ConverterDescriptor(className,JandexHelper.getValue(converterAnnotation,"autoApply",boolean.class)));
    }
 else {
      metadataSources.annotatedMappingClassNames.add(className);
    }
  }
  metadataSources.packageNames.addAll(scanResult.getPackageNames());
  metadataSources.namedMappingFileInputStreams.addAll(scanResult.getHbmFiles());
  metadataSources.mappingFileResources.addAll(scanResult.getMappingFiles());
  final String explicitHbmXmls=(String)configurationValues.remove(AvailableSettings.HBXML_FILES);
  if (explicitHbmXmls != null) {
    metadataSources.mappingFileResources.addAll(Arrays.asList(StringHelper.split(", ",explicitHbmXmls)));
  }
  final List<String> explicitOrmXml=(List<String>)configurationValues.remove(AvailableSettings.XML_FILE_NAMES);
  if (explicitOrmXml != null) {
    metadataSources.mappingFileResources.addAll(explicitOrmXml);
  }
  return metadataSources;
}
