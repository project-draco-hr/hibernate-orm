{
  final SingleRootReturnLoadPlanBuilderStrategy strategy=new SingleRootReturnLoadPlanBuilderStrategy(sessionFactory(),LoadQueryInfluencers.NONE);
  final LoadPlan plan=LoadPlanBuilder.buildRootEntityLoadPlan(strategy,entityPersister);
  final LoadQueryAliasResolutionContext aliasResolutionContext=new LoadQueryAliasResolutionContextImpl(sessionFactory(),0,Collections.singletonMap(plan.getReturns().get(0),new String[]{"abc"}));
  final EntityLoadQueryBuilderImpl queryBuilder=new EntityLoadQueryBuilderImpl(LoadQueryInfluencers.NONE,plan);
  final String sql=queryBuilder.generateSql(1,sessionFactory(),aliasResolutionContext);
  final ResultSetProcessorImpl resultSetProcessor=new ResultSetProcessorImpl(plan);
  final List results=new ArrayList();
  final Session workSession=openSession();
  workSession.beginTransaction();
  workSession.doWork(new Work(){
    @Override public void execute(    Connection connection) throws SQLException {
      PreparedStatement ps=connection.prepareStatement(sql);
      callback.bind(ps);
      ResultSet resultSet=ps.executeQuery();
      results.addAll(resultSetProcessor.extractResults(NoOpLoadPlanAdvisor.INSTANCE,resultSet,(SessionImplementor)workSession,callback.getQueryParameters(),new NamedParameterContext(){
        @Override public int[] getNamedParameterLocations(        String name){
          return new int[0];
        }
      }
,aliasResolutionContext,true,false,null,null));
      resultSet.close();
      ps.close();
    }
  }
);
  workSession.getTransaction().commit();
  workSession.close();
  return results;
}
