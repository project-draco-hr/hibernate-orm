{
  Department department=new Department();
  department.name="Sales";
  Employee employee1=new Employee();
  employee1.department=department;
  Employee employee2=new Employee();
  employee2.department=department;
  Session s=openSession();
  s.getTransaction().begin();
  s.persist(department);
  s.persist(employee1);
  s.persist(employee2);
  s.getTransaction().commit();
  s.clear();
  s.getTransaction().begin();
  Query query=s.createQuery("FROM QueryHintSQLServer2012Test$Employee e WHERE e.department.name = :departmentName").addQueryHint("MAXDOP 2").setParameter("departmentName","Sales");
  List results=query.list();
  s.getTransaction().commit();
  s.clear();
  assertEquals(results.size(),2);
  assertTrue(QueryHintTestSQLServer2012Dialect.getProcessedSql().contains("OPTION (MAXDOP 2)"));
  QueryHintTestSQLServer2012Dialect.resetProcessedSql();
  s.getTransaction().begin();
  query=s.createQuery("FROM QueryHintSQLServer2012Test$Employee e WHERE e.department.name = :departmentName").addQueryHint("MAXDOP 2").addQueryHint("CONCAT UNION").setParameter("departmentName","Sales");
  results=query.list();
  s.getTransaction().commit();
  s.clear();
  assertEquals(results.size(),2);
  assertTrue(QueryHintTestSQLServer2012Dialect.getProcessedSql().contains("MAXDOP 2"));
  assertTrue(QueryHintTestSQLServer2012Dialect.getProcessedSql().contains("CONCAT UNION"));
  QueryHintTestSQLServer2012Dialect.resetProcessedSql();
  s.getTransaction().begin();
  query=s.createQuery("FROM QueryHintSQLServer2012Test$Employee e WHERE e.department.name = :departmentName").setComment("this is a test").addQueryHint("MAXDOP 2").setParameter("departmentName","Sales");
  results=query.list();
  s.getTransaction().commit();
  s.clear();
  assertEquals(results.size(),2);
  assertTrue(QueryHintTestSQLServer2012Dialect.getProcessedSql().contains("OPTION (MAXDOP 2)"));
  QueryHintTestSQLServer2012Dialect.resetProcessedSql();
  s.getTransaction().begin();
  Criteria criteria=s.createCriteria(Employee.class).addQueryHint("MAXDOP 2").createCriteria("department").add(Restrictions.eq("name","Sales"));
  results=criteria.list();
  s.getTransaction().commit();
  s.close();
  assertEquals(results.size(),2);
  assertTrue(QueryHintTestSQLServer2012Dialect.getProcessedSql().contains("OPTION (MAXDOP 2)"));
}
