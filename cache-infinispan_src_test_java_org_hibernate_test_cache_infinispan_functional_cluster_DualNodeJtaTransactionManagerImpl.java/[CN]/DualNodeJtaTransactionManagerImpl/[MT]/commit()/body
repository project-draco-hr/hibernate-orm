{
  Transaction tx=getCurrentTransaction();
  if (tx == null) {
    throw new IllegalStateException("no current transaction to commit");
  }
  tx.commit();
}
