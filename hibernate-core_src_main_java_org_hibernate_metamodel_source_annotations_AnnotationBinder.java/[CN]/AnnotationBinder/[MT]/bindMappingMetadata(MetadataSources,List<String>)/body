{
  AnnotationBindingContext context=new AnnotationBindingContext(index,metadata.getServiceRegistry());
  Set<ConfiguredClassHierarchy<EntityClass>> hierarchies=ConfiguredClassHierarchyBuilder.createEntityHierarchies(context);
  Hierarchical parent=null;
  for (  ConfiguredClassHierarchy<EntityClass> hierarchy : hierarchies) {
    for (    EntityClass entityClass : hierarchy) {
      if (ConfiguredClassType.ENTITY.equals(entityClass.getConfiguredClassType())) {
        LOG.bindingEntityFromAnnotatedClass(entityClass.getName());
        EntityBinder entityBinder=new EntityBinder(metadata,entityClass,parent);
        EntityBinding binding=entityBinder.bind();
        parent=binding.getEntity();
      }
 else       if (ConfiguredClassType.MAPPED_SUPERCLASS.equals(entityClass.getConfiguredClassType())) {
        parent=new Superclass(entityClass.getName(),parent);
      }
 else {
        parent=new NonEntity(entityClass.getName(),parent);
      }
    }
  }
}
