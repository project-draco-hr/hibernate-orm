{
  final ResultSetProcessingContext.EntityReferenceProcessingState processingState=rootReturnReader.getIdentifierResolutionContext(context);
  if (context.shouldUseOptionalEntityInformation() && context.getQueryParameters().getOptionalId() != null) {
    final EntityKey entityKey=context.getSession().generateEntityKey(context.getQueryParameters().getOptionalId(),processingState.getEntityReference().getEntityPersister());
    processingState.registerIdentifierHydratedForm(entityKey.getIdentifier());
    processingState.registerEntityKey(entityKey);
  }
  return super.readRow(resultSet,context);
}
