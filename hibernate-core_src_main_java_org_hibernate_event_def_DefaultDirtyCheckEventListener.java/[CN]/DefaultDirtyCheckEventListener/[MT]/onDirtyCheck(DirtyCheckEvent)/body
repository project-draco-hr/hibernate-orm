{
  int oldSize=event.getSession().getActionQueue().numberOfCollectionRemovals();
  try {
    flushEverythingToExecutions(event);
    boolean wasNeeded=event.getSession().getActionQueue().hasAnyQueuedActions();
    if (wasNeeded)     LOG.sessionDirty();
 else     LOG.sessionNotDirty();
    event.setDirty(wasNeeded);
  }
  finally {
    event.getSession().getActionQueue().clearFromFlushNeededCheck(oldSize);
  }
}
