{
  if (CompositeFetch.class.isInstance(fetch)) {
    for (    Fetch subFetch : ((CompositeFetch)fetch).getFetches()) {
      collectIdentifierFetchReaders(readers,subFetch);
    }
  }
 else   if (!EntityFetch.class.isInstance(fetch)) {
    throw new IllegalStateException(String.format("non-entity (and non-composite) fetch [%s] was found as part of entity identifier : %s",fetch,entityReference.getEntityPersister().getEntityName()));
  }
 else {
    final EntityReference fetchedEntityReference=(EntityReference)fetch;
    readers.add(new EntityReferenceReader(fetchedEntityReference));
  }
}
