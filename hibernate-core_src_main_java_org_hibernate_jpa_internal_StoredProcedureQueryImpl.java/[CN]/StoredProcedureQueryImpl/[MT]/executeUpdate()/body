{
  if (!entityManager().isTransactionInProgress()) {
    throw new TransactionRequiredException("javax.persistence.Query.executeUpdate requires active transaction");
  }
  try {
    execute();
    return getUpdateCount();
  }
  finally {
    outputs().release();
  }
}
