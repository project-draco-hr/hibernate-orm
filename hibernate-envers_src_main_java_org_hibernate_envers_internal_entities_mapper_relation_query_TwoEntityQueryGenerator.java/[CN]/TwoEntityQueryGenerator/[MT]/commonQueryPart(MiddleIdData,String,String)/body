{
  final String eeOriginalIdPropertyPath=MIDDLE_ENTITY_ALIAS + "." + originalIdPropertyName;
  QueryBuilder qb=new QueryBuilder(versionsMiddleEntityName,MIDDLE_ENTITY_ALIAS);
  qb.addFrom(referencedIdData.getAuditEntityName(),REFERENCED_ENTITY_ALIAS,false);
  qb.addProjection("new list",MIDDLE_ENTITY_ALIAS + ", " + REFERENCED_ENTITY_ALIAS,null,false);
  final Parameters rootParameters=qb.getRootParameters();
  referencedIdData.getPrefixedMapper().addIdsEqualToQuery(rootParameters,eeOriginalIdPropertyPath,referencedIdData.getOriginalMapper(),REFERENCED_ENTITY_ALIAS + "." + originalIdPropertyName);
  referencingIdData.getPrefixedMapper().addNamedIdEqualsToQuery(rootParameters,originalIdPropertyName,true);
  return qb;
}
