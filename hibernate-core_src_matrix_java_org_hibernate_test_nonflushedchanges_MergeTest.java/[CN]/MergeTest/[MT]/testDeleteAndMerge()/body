{
  TestingJtaPlatformImpl.INSTANCE.getTransactionManager().begin();
  Session s=openSession();
  Employer jboss=new Employer();
  s.persist(jboss);
  TestingJtaPlatformImpl.INSTANCE.getTransactionManager().commit();
  TestingJtaPlatformImpl.INSTANCE.getTransactionManager().begin();
  s=openSession();
  Employer otherJboss;
  otherJboss=(Employer)s.get(Employer.class,jboss.getId());
  s.delete(otherJboss);
  TestingJtaPlatformImpl.INSTANCE.getTransactionManager().commit();
  jboss.setVers(Integer.valueOf(1));
  TestingJtaPlatformImpl.INSTANCE.getTransactionManager().begin();
  s=openSession();
  s.merge(jboss);
  s=applyNonFlushedChangesToNewSessionCloseOldSession(s);
  TestingJtaPlatformImpl.INSTANCE.getTransactionManager().commit();
}
