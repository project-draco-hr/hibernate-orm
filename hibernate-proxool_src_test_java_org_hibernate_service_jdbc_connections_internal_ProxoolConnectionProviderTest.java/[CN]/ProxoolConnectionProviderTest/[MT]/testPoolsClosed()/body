{
  assertDefinedPools();
  StandardServiceRegistry serviceRegistry=buildServiceRegistry("pool-one");
  ConnectionProvider providerOne=serviceRegistry.getService(ConnectionProvider.class);
  assertDefinedPools("pool-one");
  StandardServiceRegistry serviceRegistryTwo=buildServiceRegistry("pool-two");
  ConnectionProvider providerTwo=serviceRegistryTwo.getService(ConnectionProvider.class);
  assertDefinedPools("pool-one","pool-two");
  StandardServiceRegistryBuilder.destroy(serviceRegistry);
  assertDefinedPools("pool-two");
  StandardServiceRegistryBuilder.destroy(serviceRegistryTwo);
  assertDefinedPools();
}
