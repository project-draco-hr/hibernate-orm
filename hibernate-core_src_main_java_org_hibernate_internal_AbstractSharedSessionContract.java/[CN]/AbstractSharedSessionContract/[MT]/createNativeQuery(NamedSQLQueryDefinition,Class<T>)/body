{
  if (resultType != null) {
    resultClassChecking(resultType,queryDefinition);
  }
  final NativeQueryImpl query=new NativeQueryImpl(queryDefinition,this,factory.getQueryPlanCache().getSQLParameterMetadata(queryDefinition.getQueryString(),false));
  query.setHibernateFlushMode(queryDefinition.getFlushMode());
  query.setComment(queryDefinition.getComment() != null ? queryDefinition.getComment() : queryDefinition.getName());
  if (queryDefinition.getLockOptions() != null) {
    query.setLockOptions(queryDefinition.getLockOptions());
  }
  initQueryFromNamedDefinition(query,queryDefinition);
  applyQuerySettingsAndHints(query);
  return query;
}
