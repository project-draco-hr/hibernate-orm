{
  if (closed) {
    return;
  }
  if (sessionEventsManager != null) {
    sessionEventsManager.end();
  }
  if (currentHibernateTransaction != null) {
    currentHibernateTransaction.invalidate();
  }
  try {
    if (shouldCloseJdbcCoordinatorOnClose(isTransactionCoordinatorShared)) {
      jdbcCoordinator.close();
    }
  }
  finally {
    setClosed();
  }
}
