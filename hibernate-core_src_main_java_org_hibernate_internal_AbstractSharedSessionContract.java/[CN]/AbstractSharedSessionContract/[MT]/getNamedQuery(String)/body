{
  checkOpen();
  checkTransactionSynchStatus();
  delayedAfterCompletion();
  final NamedQueryDefinition queryDefinition=factory.getNamedQueryRepository().getNamedQueryDefinition(name);
  if (queryDefinition != null) {
    return createQuery(queryDefinition);
  }
  final NamedSQLQueryDefinition nativeQueryDefinition=factory.getNamedQueryRepository().getNamedSQLQueryDefinition(name);
  if (nativeQueryDefinition != null) {
    return createNativeQuery(nativeQueryDefinition);
  }
  throw exceptionConverter.convert(new IllegalArgumentException("No query defined for that name [" + name + "]"));
}
