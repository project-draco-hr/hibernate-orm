{
  Iterator iter=properties.keySet().iterator();
  Properties result=new Properties();
  while (iter.hasNext()) {
    String prop=(String)iter.next();
    if (prop.startsWith(Environment.CONNECTION_PREFIX) && !SPECIAL_PROPERTIES.contains(prop)) {
      result.setProperty(prop.substring(Environment.CONNECTION_PREFIX.length() + 1),properties.getProperty(prop));
    }
  }
  String userName=properties.getProperty(Environment.USER);
  if (userName != null) {
    result.setProperty("user",userName);
  }
  return result;
}
