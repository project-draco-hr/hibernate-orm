{
  ConfiguredClass configuredClass=entityClass;
  EntityClass superEntity=entityClass.getEntityParent();
  Hierarchical container=entityBinding.getEntity();
  Iterator<SimpleAttribute> iter=null;
  while (configuredClass != null && configuredClass != superEntity) {
    iter=configuredClass.getIdAttributes().iterator();
    if (iter.hasNext()) {
      break;
    }
    configuredClass=configuredClass.getParent();
    container=container.getSuperType();
  }
  if (iter == null || !iter.hasNext()) {
    throw new AnnotationException(String.format("Unable to find id attribute for class %s",entityClass.getName()));
  }
  MappedAttribute idAttribute=iter.next();
  Attribute attribute=container.locateOrCreateSingularAttribute(idAttribute.getName());
  SimpleAttributeBinding attributeBinding=entityBinding.makeSimpleIdAttributeBinding(attribute);
  attributeBinding.initialize(new AttributeBindingStateImpl((SimpleAttribute)idAttribute));
  attributeBinding.initialize(new ColumnRelationalStateImpl((SimpleAttribute)idAttribute,bindingContext.getMetadataImplementor()));
  bindSingleIdGeneratedValue(entityBinding,idAttribute.getName());
}
