{
  AnnotationInstance idAnnotation=JandexHelper.getSingleAnnotation(entityClass.getClassInfo(),JPADotNames.ID);
  String idName=JandexHelper.getPropertyName(idAnnotation.target());
  MappedAttribute idAttribute=entityClass.getMappedAttribute(idName);
  if (!(idAttribute instanceof SimpleAttribute)) {
    throw new AssertionFailure("Unexpected attribute type for id attribute");
  }
  Attribute attribute=entityBinding.getEntity().getOrCreateSingularAttribute(idName);
  SimpleAttributeBinding attributeBinding=entityBinding.makeSimpleIdAttributeBinding(attribute);
  attributeBinding.initialize(new AttributeBindingStateImpl((SimpleAttribute)idAttribute));
  attributeBinding.initialize(new ColumnRelationalStateImpl((SimpleAttribute)idAttribute,meta));
  bindSingleIdGeneratedValue(entityBinding,idName);
}
