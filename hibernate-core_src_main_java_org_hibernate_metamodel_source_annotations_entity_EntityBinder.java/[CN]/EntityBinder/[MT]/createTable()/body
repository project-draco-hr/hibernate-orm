{
  String schmaName=null;
  String catalogName=null;
  String tableName=null;
  AnnotationInstance tableAnnotation=JandexHelper.getSingleAnnotation(entityClass.getClassInfo(),JPADotNames.TABLE);
  if (tableAnnotation != null) {
    schmaName=JandexHelper.getValueAsString(tableAnnotation,"schema");
    catalogName=JandexHelper.getValueAsString(tableAnnotation,"catalog");
    tableName=JandexHelper.getValueAsString(tableAnnotation,"name");
  }
  if (StringHelper.isEmpty(tableName)) {
    tableName=meta.getNamingStrategy().classToTableName(entityClass.getPrimaryTableName());
  }
 else {
    tableName=meta.getNamingStrategy().tableName(tableName);
  }
  if (meta.isGloballyQuotedIdentifiers()) {
    schmaName=StringHelper.quote(schmaName);
    catalogName=StringHelper.quote(catalogName);
    tableName=StringHelper.quote(tableName);
  }
  final Identifier tableNameIdentifier=Identifier.toIdentifier(tableName);
  final Schema schema=meta.getDatabase().getSchema(new Schema.Name(schmaName,catalogName));
  Table table=schema.getTable(tableNameIdentifier);
  if (table == null) {
    table=schema.createTable(tableNameIdentifier);
  }
  return table;
}
