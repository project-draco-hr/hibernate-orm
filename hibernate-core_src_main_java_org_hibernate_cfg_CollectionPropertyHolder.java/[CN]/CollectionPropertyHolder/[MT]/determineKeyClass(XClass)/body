{
  if (keyXClass != null) {
    try {
      return getMappings().getReflectionManager().toClass(keyXClass);
    }
 catch (    Exception e) {
      log.debugf("Unable to resolve XClass [%s] to Class for collection key [%s]",keyXClass.getName(),collection.getRole());
    }
  }
  final IndexedCollection indexedCollection=(IndexedCollection)collection;
  if (indexedCollection.getIndex() != null) {
    if (indexedCollection.getIndex().getType() != null) {
      return indexedCollection.getIndex().getType().getReturnedClass();
    }
  }
  log.debugf("Unable to resolve key information for collection [%s]",collection.getRole());
  return null;
}
