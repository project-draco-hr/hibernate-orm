{
  ParamLocationRecognizer recognizer=ParamLocationRecognizer.parseLocations(query);
  final int size=recognizer.getOrdinalParameterLocationList().size();
  OrdinalParameterDescriptor[] ordinalDescriptors=new OrdinalParameterDescriptor[size];
  for (int i=0; i < size; i++) {
    final Integer position=(Integer)recognizer.getOrdinalParameterLocationList().get(i);
    ordinalDescriptors[i]=new OrdinalParameterDescriptor(i,null,position);
  }
  Iterator itr=recognizer.getNamedParameterDescriptionMap().entrySet().iterator();
  Map<String,NamedParameterDescriptor> namedParamDescriptorMap=new HashMap<String,NamedParameterDescriptor>();
  while (itr.hasNext()) {
    final Map.Entry entry=(Map.Entry)itr.next();
    final String name=(String)entry.getKey();
    final ParamLocationRecognizer.NamedParameterDescription description=(ParamLocationRecognizer.NamedParameterDescription)entry.getValue();
    namedParamDescriptorMap.put(name,new NamedParameterDescriptor(name,null,description.buildPositionsArray(),description.isJpaStyle()));
  }
  return new ParameterMetadata(ordinalDescriptors,namedParamDescriptorMap);
}
