{
  FilterQueryPlanKey key=new FilterQueryPlanKey(filterString,collectionRole,shallow,enabledFilters);
  FilterQueryPlan value=(FilterQueryPlan)queryPlanCache.get(key);
  if (value == null) {
    if (isTraceEnabled)     LOG.tracev("Unable to locate collection-filter query plan in cache; generating ({0} : {1} )",collectionRole,filterString);
    value=new FilterQueryPlan(filterString,collectionRole,shallow,enabledFilters,factory);
    queryPlanCache.putIfAbsent(key,value);
  }
 else {
    if (isTraceEnabled)     LOG.tracev("Located collection-filter query plan in cache ({0} : {1})",collectionRole,filterString);
  }
  return value;
}
