{
  if (delayedCompletionHandling) {
    delayedCompletionHandling=false;
    doAfterCompletion(false,true);
    throw new HibernateException("Transaction was rolled back in a different thread!");
  }
}
