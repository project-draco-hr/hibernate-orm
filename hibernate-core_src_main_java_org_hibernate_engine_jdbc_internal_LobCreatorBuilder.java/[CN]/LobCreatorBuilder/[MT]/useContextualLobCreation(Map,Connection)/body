{
  boolean isNonContextualLobCreationRequired=ConfigurationHelper.getBoolean(Environment.NON_CONTEXTUAL_LOB_CREATION,configValues);
  if (isNonContextualLobCreationRequired) {
    log.info("Disabling contextual LOB creation as " + Environment.NON_CONTEXTUAL_LOB_CREATION + " is true");
    return false;
  }
  if (jdbcConnection == null) {
    log.info("Disabling contextual LOB creation as connection was null");
    return false;
  }
  try {
    try {
      DatabaseMetaData meta=jdbcConnection.getMetaData();
      if (meta.getJDBCMajorVersion() < 4) {
        log.info("Disabling contextual LOB creation as JDBC driver reported JDBC version [" + meta.getJDBCMajorVersion() + "] less than 4");
        return false;
      }
    }
 catch (    SQLException ignore) {
    }
    Class connectionClass=Connection.class;
    Method createClobMethod=connectionClass.getMethod("createClob",NO_ARG_SIG);
    if (createClobMethod.getDeclaringClass().equals(Connection.class)) {
      try {
        Object clob=createClobMethod.invoke(jdbcConnection,NO_ARGS);
        try {
          Method freeMethod=clob.getClass().getMethod("free",NO_ARG_SIG);
          freeMethod.invoke(clob,NO_ARGS);
        }
 catch (        Throwable ignore) {
          log.trace("Unable to free CLOB created to test createClob() implementation : " + ignore);
        }
        return true;
      }
 catch (      Throwable t) {
        log.info("Disabling contextual LOB creation as createClob() method threw error : " + t);
      }
    }
  }
 catch (  NoSuchMethodException ignore) {
  }
  return false;
}
