{
  String original=buildRecursively(LONG_STRING_SIZE,'x');
  String changed=buildRecursively(LONG_STRING_SIZE,'y');
  Session s=openSession();
  s.beginTransaction();
  LongStringHolder entity=new LongStringHolder();
  s.save(entity);
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.beginTransaction();
  entity=(LongStringHolder)s.get(LongStringHolder.class,entity.getId());
  assertNull(entity.getLongString());
  assertNull(entity.getName());
  assertNull(entity.getWhatEver());
  entity.setLongString(original);
  entity.setName(original.toCharArray());
  entity.setWhatEver(wrapPrimitive(original.toCharArray()));
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.beginTransaction();
  entity=(LongStringHolder)s.get(LongStringHolder.class,entity.getId());
  assertEquals(LONG_STRING_SIZE,entity.getLongString().length());
  assertEquals(original,entity.getLongString());
  assertNotNull(entity.getName());
  assertEquals(LONG_STRING_SIZE,entity.getName().length);
  assertEquals(original.toCharArray(),entity.getName());
  assertNotNull(entity.getWhatEver());
  assertEquals(LONG_STRING_SIZE,entity.getWhatEver().length);
  assertEquals(original.toCharArray(),unwrapNonPrimitive(entity.getWhatEver()));
  entity.setLongString(changed);
  entity.setName(changed.toCharArray());
  entity.setWhatEver(wrapPrimitive(changed.toCharArray()));
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.beginTransaction();
  entity=(LongStringHolder)s.get(LongStringHolder.class,entity.getId());
  assertEquals(LONG_STRING_SIZE,entity.getLongString().length());
  assertEquals(changed,entity.getLongString());
  assertNotNull(entity.getName());
  assertEquals(LONG_STRING_SIZE,entity.getName().length);
  assertEquals(changed.toCharArray(),entity.getName());
  assertNotNull(entity.getWhatEver());
  assertEquals(LONG_STRING_SIZE,entity.getWhatEver().length);
  assertEquals(changed.toCharArray(),unwrapNonPrimitive(entity.getWhatEver()));
  entity.setLongString(null);
  entity.setName(null);
  entity.setWhatEver(null);
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.beginTransaction();
  entity=(LongStringHolder)s.get(LongStringHolder.class,entity.getId());
  assertNull(entity.getLongString());
  assertNull(entity.getName());
  assertNull(entity.getWhatEver());
  s.delete(entity);
  s.getTransaction().commit();
  s.close();
}
