{
  final Type elementType=persister.getElementType();
  final Type indexType=persister.getIndexType();
  final String indexNodeName=getIndexAttributeName(persister);
  final List elements=element.elements(persister.getElementNodeName());
  final int length=elements.size();
  final Serializable[] result=new Serializable[length * 2];
  int i=0;
  while (i < length * 2) {
    final Element elem=(Element)elements.get(i / 2);
    final Object object=elementType.fromXMLNode(elem,persister.getFactory());
    final String indexString=getIndex(elem,indexNodeName,i);
    final Object index=((XmlRepresentableType)indexType).fromXMLString(indexString,persister.getFactory());
    result[i++]=indexType.disassemble(index,getSession(),null);
    result[i++]=elementType.disassemble(object,getSession(),null);
  }
  return result;
}
