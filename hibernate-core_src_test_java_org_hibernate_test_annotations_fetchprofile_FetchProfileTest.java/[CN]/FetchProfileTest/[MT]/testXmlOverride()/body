{
  AnnotationConfiguration config=new AnnotationConfiguration();
  config.addAnnotatedClass(Customer5.class);
  config.addAnnotatedClass(Order.class);
  config.addAnnotatedClass(Country.class);
  InputStream is=Thread.currentThread().getContextClassLoader().getResourceAsStream("org/hibernate/test/annotations/fetchprofile/mappings.hbm.xml");
  config.addInputStream(is);
  SessionFactoryImplementor sessionImpl=(SessionFactoryImplementor)config.buildSessionFactory(serviceRegistryHolder.getServiceRegistry());
  assertTrue("fetch profile not parsed properly",sessionImpl.containsFetchProfileDefinition("orders-profile"));
  config=new AnnotationConfiguration();
  config.addAnnotatedClass(Customer5.class);
  config.addAnnotatedClass(Order.class);
  config.addAnnotatedClass(Country.class);
  try {
    config.buildSessionFactory(serviceRegistryHolder.getServiceRegistry());
    fail();
  }
 catch (  MappingException e) {
    log.trace("success");
  }
}
