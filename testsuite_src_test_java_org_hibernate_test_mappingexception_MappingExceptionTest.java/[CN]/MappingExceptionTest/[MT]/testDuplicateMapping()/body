{
  String resourceName="org/hibernate/test/mappingexception/User.hbm.xml";
  Configuration cfg=new Configuration();
  cfg.addResource(resourceName);
  cfg.buildMappings();
  try {
    cfg.addResource(resourceName);
    cfg.buildMappings();
    fail();
  }
 catch (  InvalidMappingException inv) {
    assertEquals(inv.getType(),"resource");
    assertEquals(inv.getPath(),resourceName);
    assertClassAssignability(inv.getCause().getClass(),DuplicateMappingException.class);
  }
}
