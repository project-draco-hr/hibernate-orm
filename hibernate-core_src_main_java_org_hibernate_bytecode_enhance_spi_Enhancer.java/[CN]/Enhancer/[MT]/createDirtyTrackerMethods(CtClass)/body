{
  try {
    String trackerChangeMethod="public void " + EnhancerConstants.TRACKER_CHANGER_NAME + "(String name) {"+ "  if("+ EnhancerConstants.TRACKER_FIELD_NAME+ " == null) {"+ "    "+ EnhancerConstants.TRACKER_FIELD_NAME+ " = new java.util.HashSet();"+ "  }"+ "  if(!"+ EnhancerConstants.TRACKER_FIELD_NAME+ ".contains(name)) {"+ "    "+ EnhancerConstants.TRACKER_FIELD_NAME+ ".add(name);"+ "  }"+ "}";
    managedCtClass.addMethod(CtNewMethod.make(trackerChangeMethod,managedCtClass));
    createCollectionDirtyCheckMethod(managedCtClass);
    createCollectionDirtyCheckGetFieldsMethod(managedCtClass);
    createHasDirtyAttributesMethod(managedCtClass);
    createClearDirtyCollectionMethod(managedCtClass);
    createClearDirtyMethod(managedCtClass);
    String trackerGetMethod="public java.util.List " + EnhancerConstants.TRACKER_GET_NAME + "() { "+ "if("+ EnhancerConstants.TRACKER_FIELD_NAME+ " == null) "+ EnhancerConstants.TRACKER_FIELD_NAME+ " = new java.util.HashSet();"+ EnhancerConstants.TRACKER_COLLECTION_CHANGED_FIELD_NAME+ "("+ EnhancerConstants.TRACKER_FIELD_NAME+ ");"+ "return "+ EnhancerConstants.TRACKER_FIELD_NAME+ "; }";
    CtMethod getMethod=CtNewMethod.make(trackerGetMethod,managedCtClass);
    MethodInfo methodInfo=getMethod.getMethodInfo();
    SignatureAttribute signatureAttribute=new SignatureAttribute(methodInfo.getConstPool(),"()Ljava/util/Set<Ljava/lang/String;>;");
    methodInfo.addAttribute(signatureAttribute);
    managedCtClass.addMethod(getMethod);
  }
 catch (  CannotCompileException e) {
    e.printStackTrace();
  }
catch (  ClassNotFoundException e) {
    e.printStackTrace();
  }
}
