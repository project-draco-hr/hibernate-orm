{
  final ConstPool constPool=targetClass.getClassFile().getConstPool();
  final CtField theField;
  try {
    theField=new CtField(fieldType,fieldName,targetClass);
    targetClass.addField(theField);
  }
 catch (  CannotCompileException e) {
    throw new EnhancementException(String.format("Could not enhance class [%s] to add field [%s]",targetClass.getName(),fieldName),e);
  }
  if (makeTransient) {
    theField.setModifiers(theField.getModifiers() | Modifier.TRANSIENT);
  }
  theField.setModifiers(Modifier.setPrivate(theField.getModifiers()));
  final AnnotationsAttribute annotationsAttribute=getVisibleAnnotations(theField.getFieldInfo());
  annotationsAttribute.addAnnotation(new Annotation(Transient.class.getName(),constPool));
  return theField;
}
