{
  try {
    final String name=PERSISTENT_FIELD_WRITER_PREFIX + persistentField.getName();
    CtMethod writer=CtNewMethod.setter(name,persistentField);
    managedCtClass.addMethod(writer);
    return writer;
  }
 catch (  CannotCompileException e) {
    throw new EnhancementException(String.format("Could not enhance entity class [%s] to add virtual writer method for field [%s]",managedCtClass.getName(),persistentField.getName()),e);
  }
}
