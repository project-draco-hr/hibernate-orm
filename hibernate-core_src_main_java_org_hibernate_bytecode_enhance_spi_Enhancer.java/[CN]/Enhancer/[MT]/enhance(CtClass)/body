{
  if (managedCtClass.isInterface()) {
    log.debugf("Skipping enhancement of [%s]: it's an interface",managedCtClass);
    return;
  }
  for (  String interfaceName : managedCtClass.getClassFile2().getInterfaces()) {
    if (ManagedEntity.class.getName().equals(interfaceName) || ManagedComposite.class.getName().equals(interfaceName)) {
      log.debugf("Skipping enhancement of [%s]: already enhanced",managedCtClass.getName());
      return;
    }
  }
  if (enhancementContext.isEntityClass(managedCtClass)) {
    log.debugf("Enhancing [%s] as Entity",managedCtClass.getName());
    new EntityEnhancer(enhancementContext).enhance(managedCtClass);
  }
 else   if (enhancementContext.isCompositeClass(managedCtClass)) {
    log.debugf("Enhancing [%s] as Composite",managedCtClass.getName());
    new CompositeEnhancer(enhancementContext).enhance(managedCtClass);
  }
 else   if (enhancementContext.doFieldAccessEnhancement(managedCtClass)) {
    log.debugf("Enhancing field access in [%s]",managedCtClass.getName());
    new PersistentAttributesEnhancer(enhancementContext).enhanceFieldAccess(managedCtClass);
  }
 else {
    log.debug("Skipping enhancement: not entity or composite");
  }
}
