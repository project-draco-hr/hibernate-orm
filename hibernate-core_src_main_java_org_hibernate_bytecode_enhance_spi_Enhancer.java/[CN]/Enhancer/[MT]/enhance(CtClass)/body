{
  final String className=managedCtClass.getName();
  log.debugf("Enhancing %s",className);
  if (managedCtClass.isInterface()) {
    log.debug("skipping enhancement : interface");
    return;
  }
  final String[] interfaceNames=managedCtClass.getClassFile2().getInterfaces();
  for (  String interfaceName : interfaceNames) {
    if (ManagedEntity.class.getName().equals(interfaceName) || ManagedComposite.class.getName().equals(interfaceName)) {
      log.debug("skipping enhancement : already enhanced");
      return;
    }
  }
  if (enhancementContext.isEntityClass(managedCtClass)) {
    enhanceAsEntity(managedCtClass);
  }
 else   if (enhancementContext.isCompositeClass(managedCtClass)) {
    enhanceAsComposite(managedCtClass);
  }
 else {
    log.debug("skipping enhancement : not entity or composite");
  }
}
