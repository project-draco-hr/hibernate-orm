{
  if (string == null || string.isEmpty()) {
    return null;
  }
  boolean separatorFound=false;
  int position=0;
  char[] chars=string.toCharArray();
  for (int i=0; i < chars.length; i++) {
    if (chars[i] == '_') {
      if (!separatorFound) {
        string=new String(chars,position,i - position);
        position=i + 1;
      }
 else {
        if (chars.length > i + 1) {
          return new Locale(string,new String(chars,position,i - position),new String(chars,i + 1,chars.length - i - 1));
        }
 else {
          return new Locale(string,new String(chars,position,i - position),"");
        }
      }
      separatorFound=true;
    }
  }
  if (!separatorFound) {
    return new Locale(string);
  }
 else {
    return new Locale(string,new String(chars,position,chars.length - position));
  }
}
