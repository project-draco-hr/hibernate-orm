{
  try {
    releasing=true;
    try {
      if (batchUpdate != null) {
        batchUpdate.close();
      }
    }
 catch (    SQLException sqle) {
      LOG.warn(LOG.unableToCloseJdbcPreparedStatement(),sqle);
    }
    batchUpdate=null;
    batchUpdateSQL=null;
    Iterator iter=resultSetsToClose.iterator();
    while (iter.hasNext()) {
      try {
        logCloseResults();
        ((ResultSet)iter.next()).close();
      }
 catch (      SQLException e) {
        LOG.warn(LOG.unableToCloseJdbcResultSet(),e);
      }
catch (      ConcurrentModificationException e) {
        LOG.unableToReleaseBatcher();
        break;
      }
catch (      Throwable e) {
        LOG.warn(LOG.unableToCloseJdbcResultSet(),e);
      }
    }
    resultSetsToClose.clear();
    iter=statementsToClose.iterator();
    while (iter.hasNext()) {
      try {
        closeQueryStatement((PreparedStatement)iter.next());
      }
 catch (      ConcurrentModificationException e) {
        LOG.unableToReleaseBatcher();
        break;
      }
catch (      SQLException e) {
        LOG.warn(LOG.unableToCloseJdbcStatement(),e);
      }
    }
    statementsToClose.clear();
  }
  finally {
    releasing=false;
  }
}
