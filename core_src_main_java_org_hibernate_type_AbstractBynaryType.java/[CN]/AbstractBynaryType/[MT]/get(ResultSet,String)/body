{
  if (Environment.useStreamsForBinary()) {
    InputStream inputStream=rs.getBinaryStream(name);
    if (inputStream == null)     return toExternalFormat(null);
    ByteArrayOutputStream outputStream=new ByteArrayOutputStream(2048);
    byte[] buffer=new byte[2048];
    try {
      while (true) {
        int amountRead=inputStream.read(buffer);
        if (amountRead == -1) {
          break;
        }
        outputStream.write(buffer,0,amountRead);
      }
      inputStream.close();
      outputStream.close();
    }
 catch (    IOException ioe) {
      throw new HibernateException("IOException occurred reading a binary value",ioe);
    }
    return toExternalFormat(outputStream.toByteArray());
  }
 else {
    return toExternalFormat(rs.getBytes(name));
  }
}
