{
  super(entityManagerFactory,pcType,synchronizationType,transactionType,properties);
  this.open=true;
  this.discardOnClose=discardOnClose;
  Object localSessionInterceptor=null;
  if (properties != null) {
    localSessionInterceptor=properties.get(AvailableSettings.SESSION_INTERCEPTOR);
  }
  if (localSessionInterceptor != null) {
    if (localSessionInterceptor instanceof Class) {
      sessionInterceptorClass=(Class)localSessionInterceptor;
    }
 else     if (localSessionInterceptor instanceof String) {
      final ClassLoaderService cls=entityManagerFactory.getSessionFactory().getServiceRegistry().getService(ClassLoaderService.class);
      try {
        sessionInterceptorClass=cls.classForName((String)localSessionInterceptor);
      }
 catch (      ClassLoadingException e) {
        throw new PersistenceException("Unable to instanciate interceptor: " + localSessionInterceptor,e);
      }
    }
 else {
      throw new PersistenceException("Unable to instanciate interceptor: " + localSessionInterceptor);
    }
  }
  this.sessionInterceptorClass=sessionInterceptorClass;
  postInit();
}
