{
  List results=null;
  tm.begin();
  try {
    Query query=sessionFactory.getCurrentSession().createQuery("select account.balance from Account as account where account.accountHolder = ?");
    query.setParameter(0,holder);
    query.setCacheable(true);
    results=query.list();
    tm.commit();
  }
 catch (  Exception e) {
    log.error("rolling back",e);
    tm.rollback();
    throw e;
  }
  int total=0;
  if (results != null) {
    for (Iterator it=results.iterator(); it.hasNext(); ) {
      total+=((Integer)it.next()).intValue();
      System.out.println("Total = " + total);
    }
  }
  return total;
}
