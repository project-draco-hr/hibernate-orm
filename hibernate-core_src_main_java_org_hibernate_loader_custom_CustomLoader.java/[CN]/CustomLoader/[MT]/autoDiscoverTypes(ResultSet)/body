{
  try {
    JdbcResultMetadata metadata=new JdbcResultMetadata(getFactory(),rs);
    rowProcessor.prepareForAutoDiscovery(metadata);
    List<String> aliases=new ArrayList<String>();
    List<Type> types=new ArrayList<Type>();
    for (    ResultColumnProcessor resultProcessor : rowProcessor.getColumnProcessors()) {
      resultProcessor.performDiscovery(metadata,types,aliases);
    }
    validateAliases(aliases);
    resultTypes=ArrayHelper.toTypeArray(types);
    transformerAliases=ArrayHelper.toStringArray(aliases);
  }
 catch (  SQLException e) {
    throw new HibernateException("Exception while trying to autodiscover types.",e);
  }
}
