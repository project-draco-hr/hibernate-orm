{
  if (serviceRegistry == null) {
    serviceRegistryProperties=properties;
    serviceRegistry=ServiceRegistryBuilder.buildServiceRegistry(properties);
  }
 else   if (!properties.equals(serviceRegistryProperties)) {
    throw new AssertionFailure("ServiceRegistry was already build using different properties.");
  }
  return serviceRegistry;
}
