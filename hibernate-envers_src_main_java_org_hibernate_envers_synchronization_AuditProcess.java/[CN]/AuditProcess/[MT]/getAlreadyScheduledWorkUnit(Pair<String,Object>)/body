{
  EntityMetamodel entityMetamodel=session.getFactory().getEntityPersister(idKey.getFirst()).getEntityMetamodel();
  String rootEntityName=entityMetamodel.getRootName();
  EntityMetamodel rootEntityMetamodel=session.getFactory().getEntityPersister(rootEntityName).getEntityMetamodel();
  for (  Object entityName : rootEntityMetamodel.getSubclassEntityNames()) {
    Pair<String,Object> key=Pair.make((String)entityName,idKey.getSecond());
    if (usedIds.containsKey(key)) {
      return usedIds.get(key);
    }
  }
  return null;
}
