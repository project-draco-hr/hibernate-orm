{
  final Type.PersistenceType persistenceType=ownerType.getPersistenceType();
  if (persistenceType == Type.PersistenceType.ENTITY) {
    return context.getSessionFactory().getEntityPersister(ownerType.getJavaType().getName()).getEntityMetamodel();
  }
 else   if (persistenceType == Type.PersistenceType.MAPPED_SUPERCLASS) {
    PersistentClass persistentClass=context.getPersistentClassHostingProperties((MappedSuperclassTypeImpl<?>)ownerType);
    return context.getSessionFactory().getEntityPersister(persistentClass.getClassName()).getEntityMetamodel();
  }
 else {
    throw new AssertionFailure("Cannot get the metamodel for PersistenceType: " + persistenceType);
  }
}
