{
  final Class<X> clazz=type.getReturnedClass();
  final EmbeddableTypeImpl<X> embeddableType=new EmbeddableTypeImpl<X>(clazz);
  context.registerEmbeddedableType(embeddableType);
  final Component component=(Component)value;
  final Iterator<Property> subProperties=component.getPropertyIterator();
  while (subProperties.hasNext()) {
    final Property property=subProperties.next();
    embeddableType.getBuilder().addAttribute(buildAttribute(embeddableType,property));
  }
  embeddableType.lock();
  return embeddableType;
}
