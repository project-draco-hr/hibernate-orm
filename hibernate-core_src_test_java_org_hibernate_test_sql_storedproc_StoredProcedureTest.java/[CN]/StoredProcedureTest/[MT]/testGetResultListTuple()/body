{
  Session session=openSession();
  session.beginTransaction();
  ProcedureCall query=session.createStoredProcedureCall("findUsers");
  ProcedureResult procedureResult=query.getResult();
  assertTrue("Checking ProcedureResult has more returns",procedureResult.hasMoreReturns());
  Return nextReturn=procedureResult.getNextReturn();
  assertNotNull(nextReturn);
  ExtraAssertions.assertClassAssignability(ResultSetReturn.class,nextReturn.getClass());
  ResultSetReturn resultSetReturn=(ResultSetReturn)nextReturn;
  List results=resultSetReturn.getResultList();
  assertEquals(3,results.size());
  for (  Object result : results) {
    ExtraAssertions.assertTyping(Object[].class,result);
    Integer id=(Integer)((Object[])result)[0];
    String name=(String)((Object[])result)[1];
    if (id.equals(1)) {
      assertEquals("Steve",name);
    }
 else     if (id.equals(2)) {
      assertEquals("John",name);
    }
 else     if (id.equals(3)) {
      assertEquals("Jane",name);
    }
 else {
      fail("Unexpected id value found [" + id + "]");
    }
  }
  session.getTransaction().commit();
  session.close();
}
