{
  Session session=openSession();
  session.beginTransaction();
  ProcedureCall query=session.createStoredProcedureCall("findUserRange");
  query.registerParameter("start",Integer.class,ParameterMode.IN).bindValue(1);
  query.registerParameter("end",Integer.class,ParameterMode.IN).bindValue(2);
  ProcedureResult procedureResult=query.getResult();
  assertTrue("Checking ProcedureResult has more returns",procedureResult.hasMoreReturns());
  Return nextReturn=procedureResult.getNextReturn();
  assertNotNull(nextReturn);
  ExtraAssertions.assertClassAssignability(ResultSetReturn.class,nextReturn.getClass());
  ResultSetReturn resultSetReturn=(ResultSetReturn)nextReturn;
  List results=resultSetReturn.getResultList();
  assertEquals(1,results.size());
  Object result=results.get(0);
  ExtraAssertions.assertTyping(Object[].class,result);
  Integer id=(Integer)((Object[])result)[0];
  String name=(String)((Object[])result)[1];
  assertEquals(1,(int)id);
  assertEquals("User 1",name);
  session.getTransaction().commit();
  session.close();
}
