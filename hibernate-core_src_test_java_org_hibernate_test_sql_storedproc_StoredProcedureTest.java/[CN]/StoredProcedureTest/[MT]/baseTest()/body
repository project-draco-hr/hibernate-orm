{
  Session session=openSession();
  session.beginTransaction();
  StoredProcedureCall query=session.createStoredProcedureCall("user");
  StoredProcedureOutputs outputs=query.getOutputs();
  assertTrue("Checking StoredProcedureOutputs has more returns",outputs.hasMoreReturns());
  StoredProcedureReturn nextReturn=outputs.getNextReturn();
  assertNotNull(nextReturn);
  ExtraAssertions.assertClassAssignability(StoredProcedureResultSetReturn.class,nextReturn.getClass());
  StoredProcedureResultSetReturn resultSetReturn=(StoredProcedureResultSetReturn)nextReturn;
  String name=(String)resultSetReturn.getSingleResult();
  assertEquals("SA",name);
  session.getTransaction().commit();
  session.close();
}
