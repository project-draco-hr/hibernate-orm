{
  if (value == null) {
    return null;
  }
  if (targetType.equals(value.getClass())) {
    return (T)value;
  }
  Conversion<T> conversion=determineAppropriateConversion(targetType);
  if (conversion == null) {
    throw unknownConversion(value,targetType);
  }
  return conversion.apply(value);
}
