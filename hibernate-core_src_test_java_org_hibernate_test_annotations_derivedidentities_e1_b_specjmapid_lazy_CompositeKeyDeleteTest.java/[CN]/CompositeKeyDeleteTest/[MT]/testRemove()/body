{
  Session s=openSession();
  Transaction tx=s.beginTransaction();
  CustomerTwo c1=new CustomerTwo("foo","bar","contact1","100",new BigDecimal(1000),new BigDecimal(1000),new BigDecimal(1000));
  s.persist(c1);
  s.flush();
  s.clear();
  Item boat=new Item();
  boat.setId("1");
  boat.setName("cruiser");
  boat.setPrice(new BigDecimal(500));
  boat.setDescription("a boat");
  boat.setCategory(42);
  s.persist(boat);
  Item house=new Item();
  house.setId("2");
  house.setName("blada");
  house.setPrice(new BigDecimal(5000));
  house.setDescription("a house");
  house.setCategory(74);
  s.persist(house);
  s.flush();
  s.clear();
  c1.addInventory(boat,10,new BigDecimal(5000));
  c1.addInventory(house,100,new BigDecimal(50000));
  s.merge(c1);
  Integer id=c1.getId();
  tx.commit();
  s.close();
  s=openSession();
  tx=s.beginTransaction();
  CustomerTwo c12=(CustomerTwo)s.createQuery("select c from CustomerTwo c").uniqueResult();
  Assert.assertNotNull(c12);
  List<CustomerInventoryTwo> list=c12.getInventories();
  Assert.assertNotNull(list);
  Assert.assertEquals(2,list.size());
  CustomerInventoryTwo ci=list.get(1);
  list.remove(ci);
  s.delete(ci);
  s.flush();
  tx.commit();
  s.close();
}
