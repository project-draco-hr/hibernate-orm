{
  Object entityId=delegate.mapToIdFromMap(data);
  Object value=null;
  if (entityId != null) {
    if (versionsReader.getFirstLevelCache().contains(referencedEntityName,revision,entityId)) {
      value=versionsReader.getFirstLevelCache().get(referencedEntityName,revision,entityId);
    }
 else {
      EntityInfo referencedEntity=getEntityInfo(verCfg,referencedEntityName);
      value=ToOneEntityLoader.createProxyOrLoadImmediate(versionsReader,referencedEntity.getEntityClass(),referencedEntityName,entityId,revision,verCfg);
    }
  }
  setPropertyValue(obj,value);
}
