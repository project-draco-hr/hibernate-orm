{
  TestData testData=new TestData();
  testData.prepare();
  Session session=openSession();
  session.beginTransaction();
  final String queryString="from Order o where :salesPersonName in ( select sp.name from Salesperson sp )";
  List result=session.createQuery(queryString).setParameter("salesPersonName","steve").list();
  assertEquals(2,result.size());
  session.enableFilter("fulfilledOrders").setParameter("asOfDate",testData.lastMonth.getTime());
  result=session.createQuery(queryString).setParameter("salesPersonName","steve").list();
  assertEquals(1,result.size());
  session.enableFilter("regionlist").setParameterList("regions",new String[]{"APAC"});
  result=session.createQuery(queryString).setParameter("salesPersonName","steve").list();
  assertEquals(1,result.size());
  session.enableFilter("regionlist").setParameterList("regions",new String[]{"gamma quadrant"});
  result=session.createQuery(queryString).setParameter("salesPersonName","steve").list();
  assertEquals(0,result.size());
  session.getTransaction().commit();
  session.close();
  testData.release();
}
