{
  SessionFactoryServiceInitiator<R> sessionFactoryServiceInitiator=(SessionFactoryServiceInitiator<R>)serviceInitiator;
  if (metadata != null) {
    return sessionFactoryServiceInitiator.initiateService(sessionFactory,metadata,this);
  }
 else   if (configuration != null) {
    return sessionFactoryServiceInitiator.initiateService(sessionFactory,configuration,this);
  }
 else {
    throw new IllegalStateException("Both metadata and configuration are null.");
  }
}
