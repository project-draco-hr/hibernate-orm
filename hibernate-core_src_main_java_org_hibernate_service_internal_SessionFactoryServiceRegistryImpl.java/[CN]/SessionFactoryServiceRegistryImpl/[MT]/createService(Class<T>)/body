{
  SessionFactoryServiceInitiator<T> initiator=serviceInitiatorMap.get(serviceRole);
  if (initiator == null) {
    throw new UnknownServiceException(serviceRole);
  }
  try {
    T service=initiator.initiateService(sessionFactory,configuration,this);
    registerService(serviceRole,service);
    return service;
  }
 catch (  ServiceException e) {
    throw e;
  }
catch (  Exception e) {
    throw new ServiceException("Unable to create requested service [" + serviceRole.getName() + "]",e);
  }
}
