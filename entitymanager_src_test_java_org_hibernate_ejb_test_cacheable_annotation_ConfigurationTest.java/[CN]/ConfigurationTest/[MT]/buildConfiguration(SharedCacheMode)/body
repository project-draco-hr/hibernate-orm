{
  Properties properties=new Properties();
  properties.put(AvailableSettings.SHARED_CACHE_MODE,mode);
  properties.put(Environment.CACHE_REGION_FACTORY,CustomRegionFactory.class.getName());
  Ejb3Configuration config=new Ejb3Configuration();
  config.setProperties(properties);
  config.addAnnotatedClass(ExplicitlyCacheableEntity.class);
  config.addAnnotatedClass(ExplicitlyNonCacheableEntity.class);
  config.addAnnotatedClass(NoCacheableAnnotationEntity.class);
  config.buildMappings();
  return config;
}
