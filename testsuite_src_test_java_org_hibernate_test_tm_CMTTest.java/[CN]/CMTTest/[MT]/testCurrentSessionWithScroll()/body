{
  SimpleJtaTransactionManagerImpl.getInstance().begin();
  Session s=getSessions().getCurrentSession();
  Map item1=new HashMap();
  item1.put("name","Item - 1");
  item1.put("description","The first item");
  s.persist("Item",item1);
  Map item2=new HashMap();
  item2.put("name","Item - 2");
  item2.put("description","The second item");
  s.persist("Item",item2);
  SimpleJtaTransactionManagerImpl.getInstance().getTransaction().commit();
  SimpleJtaTransactionManagerImpl.getInstance().begin();
  s=getSessions().getCurrentSession();
  ScrollableResults results=s.createQuery("from Item").scroll();
  results.next();
  SimpleJtaTransactionManagerImpl.getInstance().getTransaction().commit();
  SimpleJtaTransactionManagerImpl.getInstance().begin();
  s=getSessions().getCurrentSession();
  results=s.createQuery("from Item").scroll();
  results.next();
  results.close();
  SimpleJtaTransactionManagerImpl.getInstance().getTransaction().commit();
  SimpleJtaTransactionManagerImpl.getInstance().begin();
  s=getSessions().getCurrentSession();
  results=s.createQuery("from Item").scroll();
  while (!results.isLast()) {
    results.next();
  }
  SimpleJtaTransactionManagerImpl.getInstance().getTransaction().commit();
  SimpleJtaTransactionManagerImpl.getInstance().begin();
  s=getSessions().getCurrentSession();
  results=s.createQuery("from Item").scroll();
  while (!results.isLast()) {
    results.next();
  }
  results.close();
  SimpleJtaTransactionManagerImpl.getInstance().getTransaction().commit();
  SimpleJtaTransactionManagerImpl.getInstance().begin();
  s=getSessions().getCurrentSession();
  s.createQuery("delete from Item").executeUpdate();
  SimpleJtaTransactionManagerImpl.getInstance().getTransaction().commit();
}
