{
  Session s=openSession();
  Blobber b=new Blobber();
  b.setBlob(Hibernate.createBlob("foo/bar/baz".getBytes()));
  b.setClob(Hibernate.createClob("foo/bar/baz"));
  s.save(b);
  s.flush();
  if (getDialect() instanceof SybaseDialect && !(getDialect() instanceof SQLServerDialect)) {
    s.connection().rollback();
    s.close();
    return;
  }
  s.refresh(b);
  b.getClob().getSubString(2,3);
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  b=(Blobber)s.load(Blobber.class,new Integer(b.getId()));
  Blobber b2=new Blobber();
  s.save(b2);
  b2.setBlob(b.getBlob());
  b.setBlob(null);
  b.getClob().getSubString(1,6);
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  b=(Blobber)s.load(Blobber.class,new Integer(b.getId()));
  b.setClob(Hibernate.createClob("xcvfxvc xcvbx cvbx cvbx cvbxcvbxcvbxcvb"));
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  b=(Blobber)s.load(Blobber.class,new Integer(b.getId()));
  assertTrue(b.getClob().getSubString(1,7).equals("xcvfxvc"));
  s.flush();
  s.connection().commit();
  s.close();
}
