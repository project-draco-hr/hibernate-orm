{
  boolean result=false;
  if (current == null) {
    current=newVal;
    preInval=preInvalidateValue;
    preInvalidated=false;
    result=true;
  }
 else   if (preInvalidated) {
    if (newVal instanceof Comparable) {
      if (safeEquals(preInvalidateValue,this.preInval) || ((Comparable)newVal).compareTo(preInval) > 0) {
        current=newVal;
        preInval=preInvalidateValue;
        preInvalidated=false;
        result=true;
      }
    }
 else {
      current=newVal;
      preInval=preInvalidateValue;
      result=true;
    }
  }
 else   if (newVal instanceof Comparable) {
    if (safeEquals(preInvalidateValue,this.preInval) && ((Comparable)newVal).compareTo(current) > 0) {
      current=newVal;
      preInval=preInvalidateValue;
      result=true;
    }
  }
  return result;
}
