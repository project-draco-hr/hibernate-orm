{
  try {
    if (getSessionFactory().getSessionFactoryOptions().isJpaBootstrap()) {
      if (!contains(event.getObject())) {
        throw new IllegalArgumentException("Entity not managed");
      }
    }
    checkOpen();
    checkTransactionSynchStatus();
    for (    RefreshEventListener listener : listeners(EventType.REFRESH)) {
      listener.onRefresh(event);
    }
  }
 catch (  RuntimeException e) {
    if (!getSessionFactory().getSessionFactoryOptions().isJpaBootstrap()) {
      if (e instanceof HibernateException) {
        throw e;
      }
    }
    throw convert(e);
  }
 finally {
    delayedAfterCompletion();
  }
}
