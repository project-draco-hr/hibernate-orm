{
  errorIfClosed();
  if (entityName == null) {
    return factory.getEntityPersister(guessEntityName(object));
  }
 else {
    try {
      return factory.getEntityPersister(entityName).getSubclassEntityPersister(object,getFactory());
    }
 catch (    HibernateException e) {
      try {
        return getEntityPersister(null,object);
      }
 catch (      HibernateException e2) {
        throw e;
      }
    }
  }
}
