{
  BasicGetter getter=getGetterOrNull(theClass,propertyName);
  Class returnType=(getter == null) ? null : getter.getReturnType();
  Method[] methods=theClass.getDeclaredMethods();
  Method potentialSetter=null;
  for (int i=0; i < methods.length; i++) {
    String methodName=methods[i].getName();
    if (methods[i].getParameterTypes().length == 1 && methodName.startsWith("set")) {
      String testStdMethod=Introspector.decapitalize(methodName.substring(3));
      String testOldMethod=methodName.substring(3);
      if (testStdMethod.equals(propertyName) || testOldMethod.equals(propertyName)) {
        potentialSetter=methods[i];
        if (returnType == null || methods[i].getParameterTypes()[0].equals(returnType)) {
          return potentialSetter;
        }
      }
    }
  }
  return potentialSetter;
}
