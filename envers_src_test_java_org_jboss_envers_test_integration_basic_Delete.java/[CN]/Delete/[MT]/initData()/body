{
  EntityManager em=getEntityManager();
  em.getTransaction().begin();
  BasicTestEntity2 bte1=new BasicTestEntity2("x","a");
  BasicTestEntity2 bte2=new BasicTestEntity2("y","b");
  BasicTestEntity2 bte3=new BasicTestEntity2("z","c");
  em.persist(bte1);
  em.persist(bte2);
  em.persist(bte3);
  em.getTransaction().commit();
  em=getEntityManager();
  em.getTransaction().begin();
  bte1=em.find(BasicTestEntity2.class,bte1.getId());
  bte2=em.find(BasicTestEntity2.class,bte2.getId());
  bte3=em.find(BasicTestEntity2.class,bte3.getId());
  bte1.setStr1("x2");
  bte2.setStr2("b2");
  em.remove(bte3);
  em.getTransaction().commit();
  em=getEntityManager();
  em.getTransaction().begin();
  bte2=em.find(BasicTestEntity2.class,bte2.getId());
  em.remove(bte2);
  em.getTransaction().commit();
  em=getEntityManager();
  em.getTransaction().begin();
  bte1=em.find(BasicTestEntity2.class,bte1.getId());
  em.remove(bte1);
  em.getTransaction().commit();
  id1=bte1.getId();
  id2=bte2.getId();
  id3=bte3.getId();
}
