{
  final String name="itemJpaQueryWithLockModeAndHints";
  EntityManager em=getOrCreateEntityManager();
  em.getTransaction().begin();
  Query query=em.createNamedQuery(name);
  org.hibernate.query.Query hibernateQuery=(org.hibernate.query.Query)query;
  assertNull(hibernateQuery.getQueryOptions().getFirstRow());
  assertNull(hibernateQuery.getQueryOptions().getMaxRows());
  assertEquals(FlushMode.AUTO,hibernateQuery.getHibernateFlushMode());
  assertEquals(CacheMode.IGNORE,hibernateQuery.getCacheMode());
  assertEquals(LockMode.PESSIMISTIC_WRITE,hibernateQuery.getLockOptions().getLockMode());
  assertEquals((Integer)3,hibernateQuery.getTimeout());
  query.setHint(QueryHints.HINT_TIMEOUT,10);
  em.getEntityManagerFactory().addNamedQuery(name,query);
  query=em.createNamedQuery(name);
  hibernateQuery=(org.hibernate.query.Query)query;
  assertEquals(0,hibernateQuery.getFirstResult());
  assertEquals(Integer.MAX_VALUE,hibernateQuery.getMaxResults());
  assertEquals(FlushModeType.AUTO,hibernateQuery.getFlushMode());
  assertEquals(CacheMode.IGNORE,hibernateQuery.getCacheMode());
  assertEquals(LockMode.PESSIMISTIC_WRITE,hibernateQuery.getLockOptions().getLockMode());
  assertEquals((Integer)10,hibernateQuery.getTimeout());
  query.setHint(QueryHints.SPEC_HINT_TIMEOUT,10000);
  em.getEntityManagerFactory().addNamedQuery(name,query);
  query=em.createNamedQuery(name);
  hibernateQuery=(org.hibernate.query.Query)query;
  assertEquals(0,hibernateQuery.getFirstResult());
  assertEquals(Integer.MAX_VALUE,hibernateQuery.getMaxResults());
  assertEquals(FlushModeType.AUTO,hibernateQuery.getFlushMode());
  assertEquals(CacheMode.IGNORE,hibernateQuery.getCacheMode());
  assertEquals(LockMode.PESSIMISTIC_WRITE,hibernateQuery.getLockOptions().getLockMode());
  assertEquals((Integer)10,hibernateQuery.getTimeout());
  query.setFirstResult(51);
  em.getEntityManagerFactory().addNamedQuery(name,query);
  query=em.createNamedQuery(name);
  hibernateQuery=(org.hibernate.query.Query)query;
  assertEquals(51,hibernateQuery.getFirstResult());
  assertEquals(Integer.MAX_VALUE,hibernateQuery.getMaxResults());
  assertEquals(FlushModeType.AUTO,hibernateQuery.getFlushMode());
  assertEquals(CacheMode.IGNORE,hibernateQuery.getCacheMode());
  assertEquals(LockMode.PESSIMISTIC_WRITE,hibernateQuery.getLockOptions().getLockMode());
  assertEquals((Integer)10,hibernateQuery.getTimeout());
  em.getTransaction().commit();
  em.close();
}
