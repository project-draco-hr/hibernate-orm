{
  try {
    List errors=new ArrayList();
    org.dom4j.Document doc=xmlHelper.createSAXReader("XML InputStream",errors,entityResolver).read(new InputSource(xmlInputStream));
    if (errors.size() != 0) {
      throw new InvalidMappingException("invalid mapping",null,(Throwable)errors.get(0));
    }
    add(doc);
    return this;
  }
 catch (  DocumentException e) {
    throw new InvalidMappingException("input stream",null,e);
  }
 finally {
    try {
      xmlInputStream.close();
    }
 catch (    IOException ioe) {
      log.warn("Could not close input stream",ioe);
    }
  }
}
