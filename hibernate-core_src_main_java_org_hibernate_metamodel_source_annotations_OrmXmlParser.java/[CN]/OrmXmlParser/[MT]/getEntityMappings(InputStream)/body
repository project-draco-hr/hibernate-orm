{
  EntityMappings entityMappings;
  Schema schema=getMappingSchema();
  try {
    JAXBContext jc=JAXBContext.newInstance(EntityMappings.class);
    Unmarshaller unmarshaller=jc.createUnmarshaller();
    unmarshaller.setSchema(schema);
    StreamSource stream=new StreamSource(in);
    JAXBElement<EntityMappings> root=unmarshaller.unmarshal(stream,EntityMappings.class);
    entityMappings=root.getValue();
  }
 catch (  JAXBException e) {
    String msg="Error parsing mapping file.";
    log.error(msg);
    throw new ValidationException(msg,e);
  }
  return entityMappings;
}
