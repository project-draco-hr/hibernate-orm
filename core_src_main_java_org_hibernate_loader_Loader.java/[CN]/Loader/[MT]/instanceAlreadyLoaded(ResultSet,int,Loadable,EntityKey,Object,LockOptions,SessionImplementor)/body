{
  LockMode lockMode=(lockOptions == null) ? null : lockOptions.getLockMode();
  if (!persister.isInstance(object,session.getEntityMode())) {
    throw new WrongClassException("loaded object was of wrong class " + object.getClass(),key.getIdentifier(),persister.getEntityName());
  }
  if (LockMode.NONE != lockMode && upgradeLocks()) {
    final boolean isVersionCheckNeeded=persister.isVersioned() && session.getPersistenceContext().getEntry(object).getLockMode().lessThan(lockMode);
    if (isVersionCheckNeeded) {
      checkVersion(i,persister,key.getIdentifier(),object,rs,session);
      session.getPersistenceContext().getEntry(object).setLockMode(lockMode);
    }
  }
}
