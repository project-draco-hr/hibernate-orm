{
  final Loadable[] persisters=getEntityPersisters();
  final int entitySpan=persisters.length;
  for (int i=0; i < entitySpan; i++) {
    keys[i]=getKeyFromResultSet(i,persisters[i],i == entitySpan - 1 ? queryParameters.getOptionalId() : null,resultSet,session);
  }
  registerNonExists(keys,persisters,session);
  Object[] row=getRow(resultSet,persisters,keys,queryParameters.getOptionalObject(),optionalObjectKey,lockModesArray,hydratedObjects,session);
  readCollectionElements(row,resultSet,session);
  if (returnProxies) {
    for (int i=0; i < entitySpan; i++) {
      Object entity=row[i];
      Object proxy=session.getPersistenceContext().proxyFor(persisters[i],keys[i],entity);
      if (entity != proxy) {
        ((HibernateProxy)proxy).getHibernateLazyInitializer().setImplementation(entity);
        row[i]=proxy;
      }
    }
  }
  applyPostLoadLocks(row,lockModesArray,session);
  return getResultColumnOrRow(row,queryParameters.getResultTransformer(),resultSet,session);
}
