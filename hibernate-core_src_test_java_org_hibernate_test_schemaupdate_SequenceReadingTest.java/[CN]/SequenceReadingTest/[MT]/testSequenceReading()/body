{
  StandardServiceRegistry ssr=new StandardServiceRegistryBuilder().applySetting(AvailableSettings.DIALECT,MyExtendedH2Dialect.class).build();
  try {
    final MetadataImplementor metadata=(MetadataImplementor)new MetadataSources(ssr).addAnnotatedClass(MyEntity.class).buildMetadata();
    metadata.validate();
    try {
      new SchemaUpdate().execute(EnumSet.of(TargetType.DATABASE),metadata);
    }
  finally {
      try {
        new SchemaExport().drop(EnumSet.of(TargetType.DATABASE),metadata);
      }
 catch (      Exception ignore) {
      }
    }
  }
  finally {
    StandardServiceRegistryBuilder.destroy(ssr);
  }
}
