{
  if ("isWrapperFor".equals(method.getName()) && args.length == 1) {
    return method.invoke(databaseMetaData,args);
  }
  if ("unwrap".equals(method.getName()) && args.length == 1) {
    return method.invoke(databaseMetaData,args);
  }
  try {
    boolean exposingResultSet=doesMethodExposeResultSet(method);
    Object result=method.invoke(databaseMetaData,args);
    if (exposingResultSet) {
      result=ProxyBuilder.buildImplicitResultSet((ResultSet)result,connectionProxyHandler,connectionProxy);
      connectionProxyHandler.getResourceRegistry().register((ResultSet)result);
    }
    return result;
  }
 catch (  InvocationTargetException e) {
    Throwable realException=e.getTargetException();
    if (SQLException.class.isInstance(realException)) {
      throw connectionProxyHandler.getJdbcServices().getSqlExceptionHelper().convert((SQLException)realException,realException.getMessage());
    }
 else {
      throw realException;
    }
  }
}
