{
  final String fetchAssociactionRole=fetch.getAssociation().getRole();
  final Type associationType=fetch.getAssociation().getOwner().getPropertyType(fetch.getAssociation().getAssociationPath());
  if (associationType.isCollectionType()) {
    LOG.tracev("Handling request to add collection fetch [{0}]",fetchAssociactionRole);
    if (Fetch.Style.JOIN == fetch.getStyle()) {
      if (BagType.class.isInstance(associationType)) {
        if (containsJoinFetchedCollection) {
          LOG.containsJoinFetchedCollection(fetchAssociactionRole);
          return;
        }
      }
      if (containsJoinFetchedBag) {
        if (fetches.remove(bagJoinFetch.getAssociation().getRole()) != bagJoinFetch) {
          LOG.unableToRemoveBagJoinFetch();
        }
        bagJoinFetch=null;
        containsJoinFetchedBag=false;
      }
      containsJoinFetchedCollection=true;
    }
  }
  fetches.put(fetchAssociactionRole,fetch);
}
