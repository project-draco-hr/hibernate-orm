{
  newSessionFactory();
  Person p=new Person();
  Name n=new Name();
  n.setName("name1");
  p.getNames().add(n);
  getSession().getTransaction().begin();
  getSession().saveOrUpdate(p);
  getSession().getTransaction().commit();
  personId=p.getId();
  getSession().getTransaction().begin();
  n.setName("Changed name");
  getSession().saveOrUpdate(p);
  getSession().getTransaction().commit();
  getSession().getTransaction().begin();
  Name n2=new Name();
  n2.setName("name2");
  p.getNames().add(n2);
  getSession().getTransaction().commit();
}
