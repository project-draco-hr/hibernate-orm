{
  boolean useSecondLevelCache=ConfigurationHelper.getBoolean(AvailableSettings.USE_SECOND_LEVEL_CACHE,configurationValues,true);
  boolean useQueryCache=ConfigurationHelper.getBoolean(AvailableSettings.USE_QUERY_CACHE,configurationValues);
  RegionFactory regionFactory;
  if (useSecondLevelCache || useQueryCache) {
    final Object setting=configurationValues.get(AvailableSettings.CACHE_REGION_FACTORY);
    regionFactory=registry.getService(StrategySelector.class).resolveDefaultableStrategy(RegionFactory.class,setting,NoCachingRegionFactory.INSTANCE);
  }
 else {
    regionFactory=NoCachingRegionFactory.INSTANCE;
  }
  LOG.debugf("Cache region factory : %s",regionFactory.getClass().getName());
  return regionFactory;
}
