{
  EntityManager em=getEntityManager();
  StrTestPrivSeqEntity str1=new StrTestPrivSeqEntity("a");
  StrTestPrivSeqEntity str2=new StrTestPrivSeqEntity("b");
  IntTestPrivSeqEntity int1=new IntTestPrivSeqEntity(1);
  IntTestPrivSeqEntity int2=new IntTestPrivSeqEntity(2);
  TernaryMapEntity map1=new TernaryMapEntity();
  em.getTransaction().begin();
  em.persist(str1);
  em.persist(str2);
  em.persist(int1);
  em.persist(int2);
  map1.getMap().put(int1,str1);
  em.persist(map1);
  em.getTransaction().commit();
  em.getTransaction().begin();
  map1=em.find(TernaryMapEntity.class,map1.getId());
  str1=em.find(StrTestPrivSeqEntity.class,str1.getId());
  int1=em.find(IntTestPrivSeqEntity.class,int1.getId());
  map1.setMap(new HashMap<IntTestPrivSeqEntity,StrTestPrivSeqEntity>());
  em.flush();
  map1.getMap().put(int1,str1);
  map1.getMap().put(int2,str2);
  em.getTransaction().commit();
  em.getTransaction().begin();
  map1=em.find(TernaryMapEntity.class,map1.getId());
  str1=em.find(StrTestPrivSeqEntity.class,str1.getId());
  int1=em.find(IntTestPrivSeqEntity.class,int1.getId());
  map1.getMap().remove(int1);
  em.flush();
  map1.getMap().put(int2,str1);
  em.getTransaction().commit();
  map1_id=map1.getId();
  str1_id=str1.getId();
  str2_id=str2.getId();
  int1_id=int1.getId();
  int2_id=int2.getId();
}
