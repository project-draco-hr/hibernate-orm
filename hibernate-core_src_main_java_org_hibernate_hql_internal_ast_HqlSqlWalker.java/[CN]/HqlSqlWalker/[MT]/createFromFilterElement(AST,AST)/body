{
  FromElement fromElement=currentFromClause.addFromElement(filterEntity.getText(),alias);
  FromClause fromClause=fromElement.getFromClause();
  QueryableCollection persister=sessionFactoryHelper.getCollectionPersister(collectionFilterRole);
  String[] keyColumnNames=persister.getKeyColumnNames();
  String fkTableAlias=persister.isOneToMany() ? fromElement.getTableAlias() : fromClause.getAliasGenerator().createName(collectionFilterRole);
  JoinSequence join=sessionFactoryHelper.createJoinSequence();
  join.setRoot(persister,fkTableAlias);
  if (!persister.isOneToMany()) {
    join.addJoin((AssociationType)persister.getElementType(),fromElement.getTableAlias(),JoinFragment.INNER_JOIN,persister.getElementColumnNames(fkTableAlias));
  }
  join.addCondition(fkTableAlias,keyColumnNames," = ?");
  fromElement.setJoinSequence(join);
  fromElement.setFilter(true);
  LOG.debugf("createFromFilterElement() : processed filter FROM element.");
  return fromElement;
}
