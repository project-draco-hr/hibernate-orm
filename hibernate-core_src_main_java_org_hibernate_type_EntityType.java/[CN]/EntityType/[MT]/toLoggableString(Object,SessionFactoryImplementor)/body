{
  if (value == null) {
    return "null";
  }
  EntityPersister persister=getAssociatedEntityPersister(factory);
  StringBuilder result=new StringBuilder().append(associatedEntityName);
  if (persister.hasIdentifierProperty()) {
    final Serializable id;
    if (value instanceof HibernateProxy) {
      HibernateProxy proxy=(HibernateProxy)value;
      id=proxy.getHibernateLazyInitializer().getIdentifier();
    }
 else {
      id=persister.getIdentifier(value);
    }
    result.append('#').append(persister.getIdentifierType().toLoggableString(id,factory));
  }
  return result.toString();
}
