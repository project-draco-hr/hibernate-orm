{
  this.session=session;
  entitiesByKey=new HashMap<EntityKey,Object>(INIT_COLL_SIZE);
  entitiesByUniqueKey=new HashMap<EntityUniqueKey,Object>(INIT_COLL_SIZE);
  proxiesByKey=(Map<EntityKey,Object>)new ReferenceMap(AbstractReferenceMap.HARD,AbstractReferenceMap.WEAK);
  entitySnapshotsByKey=new HashMap<EntityKey,Object>(INIT_COLL_SIZE);
  entityEntries=IdentityMap.instantiateSequenced(INIT_COLL_SIZE);
  collectionEntries=IdentityMap.instantiateSequenced(INIT_COLL_SIZE);
  parentsByChild=IdentityMap.instantiateSequenced(INIT_COLL_SIZE);
  collectionsByKey=new HashMap<CollectionKey,PersistentCollection>(INIT_COLL_SIZE);
  arrayHolders=new IdentityHashMap<Object,PersistentCollection>(INIT_COLL_SIZE);
  nullifiableEntityKeys=new HashSet<EntityKey>();
  initTransientState();
}
