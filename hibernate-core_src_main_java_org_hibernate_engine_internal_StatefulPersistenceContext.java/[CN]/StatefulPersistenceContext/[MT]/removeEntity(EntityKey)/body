{
  final Object entity=entitiesByKey.remove(key);
  final Iterator itr=entitiesByUniqueKey.values().iterator();
  while (itr.hasNext()) {
    if (itr.next() == entity) {
      itr.remove();
    }
  }
  parentsByChild.clear();
  entitySnapshotsByKey.remove(key);
  nullifiableEntityKeys.remove(key);
  if (batchFetchQueue != null) {
    getBatchFetchQueue().removeBatchLoadableEntityKey(key);
    getBatchFetchQueue().removeSubselect(key);
  }
  return entity;
}
