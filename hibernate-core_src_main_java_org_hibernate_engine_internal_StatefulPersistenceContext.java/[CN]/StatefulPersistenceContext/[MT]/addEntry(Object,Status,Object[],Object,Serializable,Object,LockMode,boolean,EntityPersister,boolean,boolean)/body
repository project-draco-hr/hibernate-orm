{
  final EntityEntry e;
  if ((entity instanceof ManagedEntity) && ((ManagedEntity)entity).$$_hibernate_getEntityEntry() != null && status == Status.READ_ONLY) {
    e=((ManagedEntity)entity).$$_hibernate_getEntityEntry();
    e.setStatus(status);
  }
 else {
    final EntityEntryFactory entityEntryFactory=persister.getEntityEntryFactory();
    e=entityEntryFactory.createEntityEntry(status,loadedState,rowId,id,version,lockMode,existsInDatabase,persister,disableVersionIncrement,lazyPropertiesAreUnfetched,this);
  }
  entityEntryContext.addEntityEntry(entity,e);
  setHasNonReadOnlyEnties(status);
  return e;
}
