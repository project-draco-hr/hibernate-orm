{
  MetadataSources sources=new MetadataSources(serviceRegistry);
  sources.addResource("org/hibernate/metamodel/binding/EntityWithBasicCollections.hbm.xml");
  MetadataImpl metadata=(MetadataImpl)sources.getMetadataBuilder().with(processingOrder).build();
  final EntityBinding entityBinding=metadata.getEntityBinding(EntityWithBasicCollections.class.getName());
  assertNotNull(entityBinding);
  PluralAttributeBinding bagBinding=metadata.getCollection(EntityWithBasicCollections.class.getName() + ".theBag");
  assertNotNull(bagBinding);
  assertSame(bagBinding,entityBinding.locateAttributeBinding("theBag"));
  assertNotNull(bagBinding.getCollectionTable());
  assertEquals(CollectionElementNature.BASIC,bagBinding.getCollectionElement().getCollectionElementNature());
  assertEquals(String.class.getName(),((BasicCollectionElement)bagBinding.getCollectionElement()).getHibernateTypeDescriptor().getJavaTypeName());
  PluralAttributeBinding setBinding=metadata.getCollection(EntityWithBasicCollections.class.getName() + ".theSet");
  assertNotNull(setBinding);
  assertSame(setBinding,entityBinding.locateAttributeBinding("theSet"));
  assertNotNull(setBinding.getCollectionTable());
  assertEquals(CollectionElementNature.BASIC,setBinding.getCollectionElement().getCollectionElementNature());
  assertEquals(String.class.getName(),((BasicCollectionElement)setBinding.getCollectionElement()).getHibernateTypeDescriptor().getJavaTypeName());
}
