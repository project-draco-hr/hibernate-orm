{
  if (collection.getElement() != null) {
    return CollectionElementType.BASIC;
  }
 else   if (collection.getCompositeElement() != null) {
    return CollectionElementType.COMPOSITE;
  }
 else   if (collection.getManyToMany() != null) {
    return CollectionElementType.MANY_TO_MANY;
  }
 else   if (collection.getOneToMany() != null) {
    return CollectionElementType.ONE_TO_MANY;
  }
 else   if (collection.getManyToAny() != null) {
    return CollectionElementType.MANY_TO_ANY;
  }
 else {
    throw new AssertionFailure("Unknown collection element type: " + collection);
  }
}
