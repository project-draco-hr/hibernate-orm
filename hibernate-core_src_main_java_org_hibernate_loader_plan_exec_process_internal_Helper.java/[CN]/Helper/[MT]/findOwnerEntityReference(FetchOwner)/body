{
  if (EntityReference.class.isInstance(owner)) {
    return (EntityReference)owner;
  }
 else   if (CompositeFetch.class.isInstance(owner)) {
    return findOwnerEntityReference(((CompositeFetch)owner).getOwner());
  }
 else   if (EntityElementGraph.class.isInstance(owner)) {
    return ((EntityElementGraph)owner).getEntityReference();
  }
  throw new IllegalStateException("Could not locate owner's EntityReference : " + owner.getPropertyPath().getFullPath());
}
