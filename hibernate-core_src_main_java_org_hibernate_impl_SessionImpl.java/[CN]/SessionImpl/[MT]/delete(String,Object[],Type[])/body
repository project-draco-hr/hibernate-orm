{
  errorIfClosed();
  checkTransactionSynchStatus();
  if (query == null) {
    throw new IllegalArgumentException("attempt to doAfterTransactionCompletion delete-by-query with null query");
  }
  if (LOG.isTraceEnabled()) {
    LOG.trace("delete: " + query);
    if (values.length != 0)     LOG.trace("Parameters: " + StringHelper.toString(values));
  }
  List list=find(query,values,types);
  int deletionCount=list.size();
  for (int i=0; i < deletionCount; i++) {
    delete(list.get(i));
  }
  return deletionCount;
}
