{
  if (vwu.containsWork()) {
    final Object entityId=vwu.getEntityId();
    if (entityId == null) {
      workUnits.offer(vwu);
    }
 else {
      final String entityName=vwu.getEntityName();
      final Pair<String,Object> usedIdsKey=Pair.make(entityName,entityId);
      if (usedIds.containsKey(usedIdsKey)) {
        final AuditWorkUnit other=usedIds.get(usedIdsKey);
        final AuditWorkUnit result=vwu.dispatch(other);
        if (result != other) {
          removeWorkUnit(other);
          if (result != null) {
            usedIds.put(usedIdsKey,result);
            workUnits.offer(result);
          }
        }
      }
 else {
        usedIds.put(usedIdsKey,vwu);
        workUnits.offer(vwu);
      }
    }
  }
}
