{
  Field field=getFieldFromMetamodelFor(clazz,fieldName);
  assertNotNull(field,"Cannot find field '" + fieldName + "' in "+ clazz.getName());
  ParameterizedType type=(ParameterizedType)field.getGenericType();
  Type actualType=type.getActualTypeArguments()[1];
  if (expectedType.isArray()) {
    expectedType=expectedType.getComponentType();
    actualType=getComponentType(actualType);
  }
  assertEquals(actualType,expectedType,"Types do not match: " + errorString);
}
