{
  String name=JandexHelper.getValue(fetchProfile,"name",String.class);
  Set<Fetch> fetches=new HashSet<Fetch>();
  AnnotationInstance[] overrideAnnotations=JandexHelper.getValue(fetchProfile,"fetchOverrides",AnnotationInstance[].class);
  for (  AnnotationInstance override : overrideAnnotations) {
    FetchMode fetchMode=JandexHelper.getValueAsEnum(override,"mode",FetchMode.class);
    if (!fetchMode.equals(org.hibernate.annotations.FetchMode.JOIN)) {
      throw new MappingException("Only FetchMode.JOIN is currently supported");
    }
    String entityName=JandexHelper.getValue(override,"entity",String.class);
    String associationName=JandexHelper.getValue(override,"association",String.class);
    fetches.add(new Fetch(entityName,associationName,fetchMode.toString().toLowerCase()));
  }
  metadata.addFetchProfile(new FetchProfile(name,fetches));
}
