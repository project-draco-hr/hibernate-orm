{
  String name=JandexHelper.getValueAsString(jandex,fetchProfile,"name");
  Set<Fetch> fetches=new HashSet<Fetch>();
  for (  AnnotationInstance override : JandexHelper.getValueAsArray(fetchProfile,"fetchOverrides")) {
    FetchMode fetchMode=JandexHelper.getValueAsEnum(jandex,override,"mode",FetchMode.class);
    if (!fetchMode.equals(org.hibernate.annotations.FetchMode.JOIN))     throw new MappingException("Only FetchMode.JOIN is currently supported");
    fetches.add(new Fetch(JandexHelper.getValueAsString(jandex,override,"entity"),JandexHelper.getValueAsString(jandex,override,"association"),fetchMode.toString().toLowerCase()));
  }
  metadata.addFetchProfile(new FetchProfile(name,fetches));
}
