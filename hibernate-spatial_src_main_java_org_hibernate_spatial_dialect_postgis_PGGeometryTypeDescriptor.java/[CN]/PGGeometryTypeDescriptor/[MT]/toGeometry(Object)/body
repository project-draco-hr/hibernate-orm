{
  if (object == null) {
    return null;
  }
  ByteBuffer buffer=null;
  if (object instanceof PGobject) {
    String pgValue=((PGobject)object).getValue();
    if (pgValue.charAt(0) == 'S') {
      final WktDecoder decoder=Wkt.newDecoder(Wkt.Dialect.POSTGIS_EWKT_1);
      return decoder.decode(pgValue);
    }
 else {
      buffer=ByteBuffer.from(pgValue);
      final WkbDecoder decoder=Wkb.newDecoder(Wkb.Dialect.POSTGIS_EWKB_1);
      return decoder.decode(buffer);
    }
  }
  throw new IllegalStateException("Received object of type " + object.getClass().getCanonicalName());
}
