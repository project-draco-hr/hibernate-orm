{
  final boolean required=canJoinsBeRequired();
  final String entityQuerySpaceUid=getExpandingQuerySpaces().generateImplicitUid();
  final ExpandingEntityQuerySpace entityQuerySpace=getExpandingQuerySpaces().makeEntityQuerySpace(entityQuerySpaceUid,indexPersister,required);
  final JoinDefinedByMetadata join=JoinHelper.INSTANCE.createEntityJoin(this,CollectionPropertyNames.COLLECTION_INDICES,entityQuerySpace,required,(EntityType)persister.getIndexType(),sessionFactory());
  internalGetJoins().add(join);
  return entityQuerySpace;
}
