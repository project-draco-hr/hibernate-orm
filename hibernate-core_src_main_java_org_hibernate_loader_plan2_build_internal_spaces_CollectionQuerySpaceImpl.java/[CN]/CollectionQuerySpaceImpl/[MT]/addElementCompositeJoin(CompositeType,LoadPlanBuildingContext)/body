{
  final String compositeQuerySpaceUid=getQuerySpaces().generateImplicitUid();
  final CompositeQuerySpaceImpl compositeQuerySpace=new CompositeQuerySpaceImpl(new CompositePropertyMapping(compositeType,(PropertyMapping)getCollectionPersister(),""),compositeQuerySpaceUid,getQuerySpaces(),canJoinsBeRequired(),sessionFactory());
  ((QuerySpacesImpl)context.getQuerySpaces()).registerQuerySpace(compositeQuerySpace);
  final JoinImpl join=new JoinImpl(this,CollectionPropertyNames.COLLECTION_ELEMENTS,compositeQuerySpace,((QueryableCollection)persister).getElementColumnNames(),compositeType,canJoinsBeRequired());
  internalGetJoins().add(join);
  return join;
}
