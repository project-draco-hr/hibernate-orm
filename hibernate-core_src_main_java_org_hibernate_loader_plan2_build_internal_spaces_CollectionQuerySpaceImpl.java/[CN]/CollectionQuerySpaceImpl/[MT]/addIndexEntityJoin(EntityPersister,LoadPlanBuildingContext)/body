{
  final boolean required=canJoinsBeRequired();
  final String entityQuerySpaceUid=getQuerySpaces().generateImplicitUid();
  final EntityQuerySpaceImpl entityQuerySpace=new EntityQuerySpaceImpl(indexPersister,entityQuerySpaceUid,getQuerySpaces(),required,sessionFactory());
  getQuerySpaces().registerQuerySpace(entityQuerySpace);
  final JoinImpl join=new JoinImpl(this,CollectionPropertyNames.COLLECTION_INDICES,entityQuerySpace,Helper.INSTANCE.determineRhsColumnNames((EntityType)persister.getIndexType(),sessionFactory()),persister.getIndexType(),required);
  internalGetJoins().add(join);
  return join;
}
