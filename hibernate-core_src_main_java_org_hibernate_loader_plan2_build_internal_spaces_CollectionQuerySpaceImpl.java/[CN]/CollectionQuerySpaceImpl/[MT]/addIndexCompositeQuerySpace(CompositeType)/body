{
  final String compositeQuerySpaceUid=getExpandingQuerySpaces().generateImplicitUid();
  final ExpandingCompositeQuerySpace compositeQuerySpace=getExpandingQuerySpaces().makeCompositeQuerySpace(compositeQuerySpaceUid,new CompositePropertyMapping(compositeType,(PropertyMapping)getCollectionPersister(),"index"),canJoinsBeRequired());
  final JoinDefinedByMetadata join=JoinHelper.INSTANCE.createCompositeJoin(this,CollectionPropertyNames.COLLECTION_INDICES,compositeQuerySpace,canJoinsBeRequired(),compositeType);
  internalGetJoins().add(join);
  return compositeQuerySpace;
}
