{
  SessionImpl session=(SessionImpl)sessionFactory.openSession();
  session.beginTransaction();
  assertEquals(0L,extractInDatabaseValue(session));
  Long generatedValue=(Long)generator.generate(session,null);
  assertEquals(1L,generatedValue.longValue());
  assertEquals(1L,extractInDatabaseValue(session));
  generatedValue=(Long)generator.generate(session,null);
  assertEquals(2L,generatedValue.longValue());
  assertEquals(1L,extractInDatabaseValue(session));
  generatedValue=(Long)generator.generate(session,null);
  assertEquals(3L,generatedValue.longValue());
  assertEquals(1L,extractInDatabaseValue(session));
  generatedValue=(Long)generator.generate(session,null);
  assertEquals(4L,generatedValue.longValue());
  assertEquals(2L,extractInDatabaseValue(session));
  generatedValue=(Long)generator.generate(session,null);
  assertEquals(5L,generatedValue.longValue());
  assertEquals(2L,extractInDatabaseValue(session));
  session.getTransaction().commit();
  session.close();
}
