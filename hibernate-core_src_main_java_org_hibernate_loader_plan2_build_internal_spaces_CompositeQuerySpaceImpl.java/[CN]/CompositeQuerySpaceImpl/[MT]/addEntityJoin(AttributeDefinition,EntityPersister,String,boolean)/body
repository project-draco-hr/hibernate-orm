{
  final boolean isMultiTable=Queryable.class.cast(persister).isMultiTable();
  final boolean required=canJoinsBeRequired() && !isMultiTable && !optional;
  final EntityQuerySpaceImpl rhs=new EntityQuerySpaceImpl(persister,querySpaceUid,getQuerySpaces(),required,sessionFactory());
  getQuerySpaces().registerQuerySpace(rhs);
  final JoinDefinedByMetadata join=JoinHelper.INSTANCE.createEntityJoin(this,attributeDefinition.getName(),rhs,required,(EntityType)attributeDefinition.getType(),sessionFactory());
  internalGetJoins().add(join);
  return join;
}
