{
  final String propertyPath=compositionDefinition.getName();
  final boolean required=canJoinsBeRequired() && !compositionDefinition.isNullable();
  final CompositeQuerySpaceImpl rhs=new CompositeQuerySpaceImpl(new CompositePropertyMapping(compositionDefinition.getType(),compositeSubPropertyMapping,compositionDefinition.getName()),querySpaceUid,getQuerySpaces(),required,sessionFactory());
  getQuerySpaces().registerQuerySpace(rhs);
  final JoinImpl join=new JoinImpl(this,propertyPath,rhs,getPropertyMapping().toColumns(compositionDefinition.getName()),compositionDefinition.getType(),required);
  internalGetJoins().add(join);
  return join;
}
