{
  EventCache cache=new EventCache();
  Simple entity=new Simple(1);
  Simple copy=new Simple(0);
  cache.put(entity,copy,true);
  Map.Entry entry=(Map.Entry)cache.entrySet().iterator().next();
  ((Simple)entry.getKey()).setValue(2);
  assertEquals(2,entity.getValue());
  checkCacheConsistency(cache,1);
  entry=(Map.Entry)cache.entrySet().iterator().next();
  assertSame(entity,entry.getKey());
  assertSame(copy,entry.getValue());
}
