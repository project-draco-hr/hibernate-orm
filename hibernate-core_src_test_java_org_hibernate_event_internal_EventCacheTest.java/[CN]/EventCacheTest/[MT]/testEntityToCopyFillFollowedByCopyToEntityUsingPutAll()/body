{
  EventCache cache=new EventCache();
  Map<Object,Object> input=new HashMap<Object,Object>();
  Object entity1=new Simple(1);
  Object copy1=new Integer(2);
  input.put(entity1,copy1);
  Object entity2=new Simple(3);
  Object copy2=new Integer(2);
  input.put(entity2,copy2);
  cache.putAll(input);
  checkCacheConsistency(cache,2);
  assertTrue(cache.containsKey(entity1));
  assertFalse(cache.containsKey(copy1));
  assertTrue(cache.containsKey(entity2));
  assertFalse(cache.containsKey(copy2));
  assertTrue(cache.invertMap().containsKey(copy1));
  assertFalse(cache.invertMap().containsKey(entity1));
  assertTrue(cache.invertMap().containsKey(copy2));
  assertFalse(cache.invertMap().containsKey(entity2));
}
