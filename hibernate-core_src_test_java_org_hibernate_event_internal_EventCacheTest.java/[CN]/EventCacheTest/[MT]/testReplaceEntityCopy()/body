{
  EventCache cache=new EventCache();
  Simple entity=new Simple(1);
  Simple copy=new Simple(0);
  cache.put(entity,copy);
  Simple copyNew=new Simple(0);
  assertSame(copy,cache.put(entity,copyNew));
  assertSame(copyNew,cache.get(entity));
  checkCacheConsistency(cache,1);
  copy=copyNew;
  copyNew=new Simple(1);
  assertSame(copy,cache.put(entity,copyNew));
  assertSame(copyNew,cache.get(entity));
  checkCacheConsistency(cache,1);
}
