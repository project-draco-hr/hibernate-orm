{
  if (LOG.isTraceEnabled()) {
    LOG.tracev("Deleting {0}",MessageHelper.infoString(persister,entityEntry.getId(),session.getFactory()));
  }
  final PersistenceContext persistenceContext=session.getPersistenceContext();
  final Type[] propTypes=persister.getPropertyTypes();
  final Object version=entityEntry.getVersion();
  final Object[] currentState;
  if (entityEntry.getLoadedState() == null) {
    currentState=persister.getPropertyValues(entity);
  }
 else {
    currentState=entityEntry.getLoadedState();
  }
  final Object[] deletedState=createDeletedState(persister,currentState,session);
  entityEntry.setDeletedState(deletedState);
  session.getInterceptor().onDelete(entity,entityEntry.getId(),deletedState,persister.getPropertyNames(),propTypes);
  persistenceContext.setEntryStatus(entityEntry,Status.DELETED);
  final EntityKey key=session.generateEntityKey(entityEntry.getId(),persister);
  cascadeBeforeDelete(session,persister,entity,entityEntry,transientEntities);
  new ForeignKeys.Nullifier(entity,true,false,session).nullifyTransientReferences(entityEntry.getDeletedState(),propTypes);
  new Nullability(session).checkNullability(entityEntry.getDeletedState(),persister,true);
  persistenceContext.getNullifiableEntityKeys().add(key);
  if (isOrphanRemovalBeforeUpdates) {
    session.getActionQueue().addAction(new OrphanRemovalAction(entityEntry.getId(),deletedState,version,entity,persister,isCascadeDeleteEnabled,session));
  }
 else {
    session.getActionQueue().addAction(new EntityDeleteAction(entityEntry.getId(),deletedState,version,entity,persister,isCascadeDeleteEnabled,session));
  }
  cascadeAfterDelete(session,persister,entity,transientEntities);
}
