{
  this.configuration=cfg;
  dialect=Dialect.getDialect(connectionProperties);
  Properties props=new Properties();
  props.putAll(dialect.getDefaultProperties());
  props.putAll(connectionProperties);
  connectionHelper=new ManagedProviderConnectionHelper(props);
  exceptions=new ArrayList();
  formatter=(PropertiesHelper.getBoolean(Environment.FORMAT_SQL,props) ? FormatStyle.DDL : FormatStyle.NONE).getFormatter();
}
