{
  Index index=JandexHelper.indexForClass(service,Entity.class);
  Set<ConfiguredClassHierarchy> hierarchies=ConfiguredClassHierarchyBuilder.createEntityHierarchies(index,serviceRegistry);
  assertEquals("There should be only one hierarchy",1,hierarchies.size());
  Iterator<ConfiguredClass> iter=hierarchies.iterator().next().iterator();
  ConfiguredClass configuredClass=iter.next();
  MappedAttribute property=configuredClass.getMappedProperty("id");
  assertEquals("Unexpected property type","int",property.getType());
  property=configuredClass.getMappedProperty("string");
  assertEquals("Unexpected property type",String.class.getName(),property.getType());
  property=configuredClass.getMappedProperty("customString");
  assertEquals("Unexpected property type","my.custom.Type",property.getType());
  Map<String,String> typeParameters=property.getTypeParameters();
  assertEquals("There should be a type parameter","bar",typeParameters.get("foo"));
}
