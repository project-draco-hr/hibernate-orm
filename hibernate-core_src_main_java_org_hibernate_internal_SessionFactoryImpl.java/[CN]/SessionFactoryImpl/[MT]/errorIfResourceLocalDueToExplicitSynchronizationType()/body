{
  if (!getServiceRegistry().getService(TransactionCoordinatorBuilder.class).isJta()) {
    throw new IllegalStateException("Illegal attempt to specify a SynchronizationType when building an EntityManager from a " + "EntityManagerFactory defined as RESOURCE_LOCAL (as opposed to JTA)");
  }
}
