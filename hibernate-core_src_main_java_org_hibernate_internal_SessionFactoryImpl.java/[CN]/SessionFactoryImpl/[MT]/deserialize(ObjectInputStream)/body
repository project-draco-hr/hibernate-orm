{
  final String uuid=ois.readUTF();
  boolean isNamed=ois.readBoolean();
  final String name=isNamed ? ois.readUTF() : null;
  Object result=SessionFactoryRegistry.INSTANCE.getSessionFactory(uuid);
  if (result == null) {
    LOG.trace("Could not locate session factory by uuid [" + uuid + "] during session deserialization; trying name");
    if (isNamed) {
      result=SessionFactoryRegistry.INSTANCE.getNamedSessionFactory(name);
    }
    if (result == null) {
      throw new InvalidObjectException("could not resolve session factory during session deserialization [uuid=" + uuid + ", name="+ name+ "]");
    }
  }
  return (SessionFactoryImpl)result;
}
