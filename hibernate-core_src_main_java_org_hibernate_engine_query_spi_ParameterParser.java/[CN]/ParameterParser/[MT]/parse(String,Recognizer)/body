{
  final boolean hasMainOutputParameter=startsWithEscapeCallTemplate(sqlString);
  boolean foundMainOutputParam=false;
  final int stringLength=sqlString.length();
  boolean inSingleQuotes=false;
  boolean inDoubleQuotes=false;
  boolean inLineComment=false;
  boolean inDelimitedComment=false;
  for (int indx=0; indx < stringLength; indx++) {
    final char c=sqlString.charAt(indx);
    final boolean lastCharacter=indx == stringLength - 1;
    if (inDelimitedComment) {
      recognizer.other(c);
      if (!lastCharacter && '*' == c && '/' == sqlString.charAt(indx + 1)) {
        inDelimitedComment=false;
        recognizer.other(sqlString.charAt(indx + 1));
        indx++;
      }
    }
 else     if (!lastCharacter && '/' == c && '*' == sqlString.charAt(indx + 1)) {
      inDelimitedComment=true;
      recognizer.other(c);
      recognizer.other(sqlString.charAt(indx + 1));
      indx++;
    }
 else     if (inLineComment) {
      recognizer.other(c);
      if ('\n' == c) {
        inLineComment=false;
      }
 else       if ('\r' == c) {
        inLineComment=false;
        if (!lastCharacter && '\n' == sqlString.charAt(indx + 1)) {
          recognizer.other(sqlString.charAt(indx + 1));
          indx++;
        }
      }
    }
 else     if ('-' == c) {
      recognizer.other(c);
      if (!lastCharacter && '-' == sqlString.charAt(indx + 1)) {
        inLineComment=true;
        recognizer.other(sqlString.charAt(indx + 1));
        indx++;
      }
    }
 else     if (inDoubleQuotes) {
      if ('\"' == c) {
        inDoubleQuotes=false;
      }
      recognizer.other(c);
    }
 else     if ('\"' == c) {
      inDoubleQuotes=true;
      recognizer.other(c);
    }
 else     if (inSingleQuotes) {
      if ('\'' == c) {
        inSingleQuotes=false;
      }
      recognizer.other(c);
    }
 else     if ('\'' == c) {
      inSingleQuotes=true;
      recognizer.other(c);
    }
 else     if ('\\' == c) {
      recognizer.other(sqlString.charAt(++indx));
    }
 else {
      if (c == ':') {
        final int right=StringHelper.firstIndexOfChar(sqlString,ParserHelper.HQL_SEPARATORS_BITSET,indx + 1);
        final int chopLocation=right < 0 ? sqlString.length() : right;
        final String param=sqlString.substring(indx + 1,chopLocation);
        if (StringHelper.isEmpty(param)) {
          throw new QueryException("Space is not allowed after parameter prefix ':' [" + sqlString + "]");
        }
        recognizer.namedParameter(param,indx);
        indx=chopLocation - 1;
      }
 else       if (c == '?') {
        if (indx < stringLength - 1 && Character.isDigit(sqlString.charAt(indx + 1))) {
          final int right=StringHelper.firstIndexOfChar(sqlString,ParserHelper.HQL_SEPARATORS,indx + 1);
          final int chopLocation=right < 0 ? sqlString.length() : right;
          final String param=sqlString.substring(indx + 1,chopLocation);
          try {
            Integer.valueOf(param);
          }
 catch (          NumberFormatException e) {
            throw new QueryException("JPA-style positional param was not an integral ordinal");
          }
          recognizer.jpaPositionalParameter(param,indx);
          indx=chopLocation - 1;
        }
 else {
          if (hasMainOutputParameter && !foundMainOutputParam) {
            foundMainOutputParam=true;
            recognizer.outParameter(indx);
          }
 else {
            recognizer.ordinalParameter(indx);
          }
        }
      }
 else {
        recognizer.other(c);
      }
    }
  }
}
