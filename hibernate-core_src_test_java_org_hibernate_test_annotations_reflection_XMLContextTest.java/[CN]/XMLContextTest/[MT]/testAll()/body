{
  XMLHelper xmlHelper=new XMLHelper();
  ClassLoader cl=Thread.currentThread().getContextClassLoader();
  InputStream is=cl.getResourceAsStream("org/hibernate/test/annotations/reflection/orm.xml");
  Assert.assertNotNull("ORM.xml not found",is);
  XMLContext context=new XMLContext();
  ErrorLogger errorLogger=new ErrorLogger();
  SAXReader saxReader=xmlHelper.createSAXReader(errorLogger,EJB3DTDEntityResolver.INSTANCE);
  try {
    saxReader.setFeature("http://apache.org/xml/features/validation/schema",true);
  }
 catch (  SAXNotSupportedException e) {
    saxReader.setValidation(false);
  }
  org.dom4j.Document doc;
  try {
    doc=saxReader.read(new InputSource(new BufferedInputStream(is)));
  }
  finally {
    try {
      is.close();
    }
 catch (    IOException ioe) {
    }
  }
  Assert.assertFalse(errorLogger.hasErrors());
  context.addDocument(doc);
}
