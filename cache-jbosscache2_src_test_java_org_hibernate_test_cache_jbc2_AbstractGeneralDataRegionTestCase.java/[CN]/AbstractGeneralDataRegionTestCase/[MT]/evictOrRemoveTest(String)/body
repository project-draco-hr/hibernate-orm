{
  Configuration cfg=createConfiguration(configName);
  JBossCacheRegionFactory regionFactory=CacheTestUtil.startRegionFactory(cfg,getCacheTestSupport());
  Cache localCache=getJBossCache(regionFactory);
  boolean invalidation=CacheHelper.isClusteredInvalidation(localCache);
  avoidConcurrentFlush();
  GeneralDataRegion localRegion=(GeneralDataRegion)createRegion(regionFactory,getStandardRegionName(REGION_PREFIX),cfg.getProperties(),null);
  cfg=createConfiguration(configName);
  regionFactory=CacheTestUtil.startRegionFactory(cfg,getCacheTestSupport());
  GeneralDataRegion remoteRegion=(GeneralDataRegion)createRegion(regionFactory,getStandardRegionName(REGION_PREFIX),cfg.getProperties(),null);
  assertNull("local is clean",localRegion.get(KEY));
  assertNull("remote is clean",remoteRegion.get(KEY));
  localRegion.put(KEY,VALUE1);
  assertEquals(VALUE1,localRegion.get(KEY));
  sleep(250);
  Object expected=invalidation ? null : VALUE1;
  assertEquals(expected,remoteRegion.get(KEY));
  localRegion.evict(KEY);
  assertEquals(null,localRegion.get(KEY));
  assertEquals(null,remoteRegion.get(KEY));
}
