{
  String name=cfg.getHibernateConfiguration().getProperty(AvailableSettings.CONFIGURATION_JNDI_NAME);
  if (name == null) {
    LOG.debug("No JNDI name configured for binding Ejb3Configuration");
  }
 else {
    LOG.ejb3ConfigurationName(name);
    JndiServiceImpl jndiService=new JndiServiceImpl(cfg.getProperties());
    try {
      jndiService.bind(name,cfg);
      LOG.boundEjb3ConfigurationToJndiName(name);
      try {
        jndiService.addListener(name,LISTENER);
      }
 catch (      Exception e) {
        LOG.couldNotBindJndiListener();
      }
    }
 catch (    JndiNameException e) {
      LOG.invalidJndiName(name,e);
    }
catch (    JndiException e) {
      LOG.unableToBindEjb3ConfigurationToJndi(e);
    }
  }
}
