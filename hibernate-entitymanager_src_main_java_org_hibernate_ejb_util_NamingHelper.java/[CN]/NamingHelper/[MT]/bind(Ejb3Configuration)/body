{
  String name=cfg.getHibernateConfiguration().getProperty(AvailableSettings.CONFIGURATION_JNDI_NAME);
  if (name == null)   LOG.debugf("No JNDI name configured for binding Ejb3Configuration");
 else {
    LOG.ejb3ConfigurationName(name);
    try {
      Context ctx=JndiHelper.getInitialContext(cfg.getProperties());
      JndiHelper.bind(ctx,name,cfg);
      LOG.boundEjb3ConfigurationToJndiName(name);
      ((EventContext)ctx).addNamingListener(name,EventContext.OBJECT_SCOPE,LISTENER);
    }
 catch (    InvalidNameException ine) {
      LOG.invalidJndiName(name,ine);
    }
catch (    NamingException ne) {
      LOG.unableToBindEjb3ConfigurationToJndi(ne);
    }
catch (    ClassCastException cce) {
      LOG.initialContextDoesNotImplementEventContext();
    }
  }
}
