{
  ConnectionProvider dcp=ConnectionProviderBuilder.buildConnectionProvider();
  Session s=sessionFactory().withOptions().connection(dcp.getConnection()).openSession();
  Transaction tx=s.beginTransaction();
  s.createQuery("from Fo").list();
  tx.commit();
  Connection c=s.disconnect();
  assertTrue(c != null);
  s.reconnect(c);
  tx=s.beginTransaction();
  s.createQuery("from Fo").list();
  tx.commit();
  assertTrue(s.close() == c);
  c.close();
}
