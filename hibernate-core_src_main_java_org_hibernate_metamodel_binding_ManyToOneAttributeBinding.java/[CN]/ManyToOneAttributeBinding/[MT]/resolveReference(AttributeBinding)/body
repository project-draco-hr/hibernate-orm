{
  if (!EntityBinding.class.isInstance(referencedAttributeBinding.getContainer())) {
    throw new AssertionFailure("Illegal attempt to resolve many-to-one reference based on non-entity attribute");
  }
  final EntityBinding entityBinding=(EntityBinding)referencedAttributeBinding.getContainer();
  if (!referencedEntityName.equals(entityBinding.getEntity().getName())) {
    throw new IllegalStateException("attempt to set EntityBinding with name: [" + entityBinding.getEntity().getName() + "; entity name should be: "+ referencedEntityName);
  }
  if (referencedAttributeName == null) {
    referencedAttributeName=referencedAttributeBinding.getAttribute().getName();
  }
 else   if (!referencedAttributeName.equals(referencedAttributeBinding.getAttribute().getName())) {
    throw new IllegalStateException("Inconsistent attribute name; expected: " + referencedAttributeName + "actual: "+ referencedAttributeBinding.getAttribute().getName());
  }
  this.referencedAttributeBinding=referencedAttributeBinding;
}
