{
  Session s=openSession();
  s.beginTransaction();
  PropertyValue redValue=new StringPropertyValue("red");
  PropertyValue lonliestNumberValue=new IntegerPropertyValue(1);
  Long id;
  PropertySet ps=new PropertySet("my properties");
  ps.setSomeSpecificProperty(redValue);
  ps.getGeneralProperties().put("the lonliest number",lonliestNumberValue);
  ps.getGeneralProperties().put("i like",new StringPropertyValue("pina coladas"));
  ps.getGeneralProperties().put("i also like",new StringPropertyValue("getting caught in the rain"));
  s.save(ps);
  s.getTransaction().commit();
  id=ps.getId();
  s.clear();
  s.beginTransaction();
  s.createQuery("from PropertySet p where p.someSpecificProperty = :ssp").setParameter("ssp",redValue).list();
  s.createQuery("from PropertySet p where p.someSpecificProperty.id is not null").list();
  s.createQuery("from PropertySet p join p.generalProperties gp where gp.id is not null").list();
  s.delete(s.load(PropertySet.class,id));
  s.getTransaction().commit();
  s.close();
}
