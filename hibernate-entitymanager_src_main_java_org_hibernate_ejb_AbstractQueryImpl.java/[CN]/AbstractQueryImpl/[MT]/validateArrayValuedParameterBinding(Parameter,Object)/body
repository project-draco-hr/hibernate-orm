{
  if (!parameter.getParameterType().isArray()) {
    throw new IllegalArgumentException(String.format("Encountered array-valued parameter binding, but was expecting [%s]",parameter.getParameterType().getName()));
  }
  if (value.getClass().getComponentType().isPrimitive()) {
    if (!parameter.getParameterType().getComponentType().isAssignableFrom(value.getClass().getComponentType())) {
      throw new IllegalArgumentException(String.format("Primitive array-valued parameter bind value type [%s] did not match expected type [%s]",value.getClass().getComponentType().getName(),parameter.getParameterType().getName()));
    }
  }
 else {
    final Object[] array=(Object[])value;
    for (    Object element : array) {
      if (!parameter.getParameterType().getComponentType().isInstance(element)) {
        throw new IllegalArgumentException(String.format("Array-valued parameter value element [%s] did not match expected type [%s]",element,parameter.getParameterType().getName()));
      }
    }
  }
}
