{
  if (value != null && parameter.getParameterType() != null) {
    if (Collection.class.isInstance(value)) {
      final Collection collection=(Collection)value;
      for (      Object element : collection) {
        if (!parameter.getParameterType().isInstance(element)) {
          throw new IllegalArgumentException("Parameter value [" + element + "] was not matching type ["+ parameter.getParameterType().getName()+ "]");
        }
      }
    }
 else     if (value.getClass().isArray() && value.getClass().equals(Object[].class)) {
      final Object[] array=(Object[])value;
      for (      Object element : array) {
        if (!parameter.getParameterType().isInstance(element)) {
          throw new IllegalArgumentException("Parameter value [" + element + "] was not matching type ["+ parameter.getParameterType().getName()+ "]");
        }
      }
    }
 else {
      if (!parameter.getParameterType().isInstance(value)) {
        throw new IllegalArgumentException("Parameter value [" + value + "] was not matching type ["+ parameter.getParameterType().getName()+ "]");
      }
    }
  }
  if (parameterBindings == null) {
    parameterBindings=new HashMap();
  }
  parameterBindings.put(parameter,value);
}
