{
  String filesToCompile="";
  for (int count=0; count < 100; count++) {
    String name="Test" + count;
    File javaFile=new File(workPackageDir,name + ".java");
    File hbmFile=new File(workPackageDir,name + ".hbm.xml");
    filesToCompile+=(javaFile.getAbsolutePath() + " ");
    System.out.println("Generating " + javaFile.getAbsolutePath());
    PrintWriter javaWriter=null;
    PrintWriter hbmWriter=null;
    try {
      javaWriter=new PrintWriter(new FileWriter(javaFile));
      hbmWriter=new PrintWriter(new FileWriter(hbmFile));
      javaWriter.println("package " + workPackageName + ";");
      hbmWriter.println("<?xml version=\"1.0\"?>\r\n" + "<!DOCTYPE hibernate-mapping PUBLIC \r\n" + "	\"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\r\n"+ "	\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\">\r\n");
      hbmWriter.println("<hibernate-mapping package=\"" + workPackageName + "\">");
      javaWriter.println("public class " + name + " {");
      javaWriter.println(" static { System.out.println(\"" + name + " initialized!\"); }");
      hbmWriter.println("<class name=\"" + name + "\">");
      hbmWriter.println("<id type=\"long\"><generator class=\"assigned\"/></id>");
      for (int propCount=0; propCount < 100; propCount++) {
        String propName="Prop" + propCount;
        writeJavaProperty(javaWriter,propName);
        hbmWriter.println("<property name=\"" + propName + "\" type=\"string\"/>");
      }
      hbmWriter.println("</class>");
      javaWriter.println("}");
      hbmWriter.println("</hibernate-mapping>");
    }
  finally {
      if (javaWriter != null) {
        javaWriter.flush();
        javaWriter.close();
      }
      if (hbmWriter != null) {
        hbmWriter.flush();
        hbmWriter.close();
      }
    }
  }
  String javac="javac -version -d " + compilationBaseDir + " "+ filesToCompile;
  System.err.println("JAVAC : " + javac);
  Process process=Runtime.getRuntime().exec(javac);
  process.waitFor();
  System.err.println("********************* JAVAC OUTPUT **********************");
  pullStream(process.getInputStream());
  System.err.println("---------------------------------------------------------");
  pullStream(process.getErrorStream());
  System.err.println("*********************************************************");
}
