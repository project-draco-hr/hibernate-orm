{
  Session s=openSession();
  Transaction t=s.beginTransaction();
  Master m=new Master();
  m.setOtherMaster(m);
  s.save(m);
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  Iterator i=s.iterate("from Master");
  m=(Master)i.next();
  assertTrue(m.getOtherMaster() == m);
  if (getDialect() instanceof HSQLDialect) {
    m.setOtherMaster(null);
    s.flush();
  }
  s.delete(m);
  t.commit();
  s.close();
}
