{
  Session s=openSession();
  Eye e=new Eye();
  e.setName("Eye Eye");
  Jay jay=new Jay(e);
  e.setJay(jay);
  s.saveOrUpdate(e);
  s.flush();
  s.connection().commit();
  s.close();
  s=openSession();
  e=(Eye)s.createCriteria(Eye.class).uniqueResult();
  assertTrue(Hibernate.isInitialized(e.getJay()));
  assertTrue(Hibernate.isInitialized(e.getJays()));
  s.connection().commit();
  s.close();
  s=openSession();
  jay=(Jay)s.createQuery("select new Jay(eye) from Eye eye").uniqueResult();
  assertTrue("Eye Eye".equals(jay.getEye().getName()));
  s.delete(jay.getEye());
  s.flush();
  s.connection().commit();
  s.close();
}
