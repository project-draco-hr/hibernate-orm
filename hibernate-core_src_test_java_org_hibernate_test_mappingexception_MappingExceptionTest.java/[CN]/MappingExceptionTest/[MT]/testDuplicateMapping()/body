{
  String resourceName="org/hibernate/test/mappingexception/User.hbm.xml";
  Configuration cfg=new Configuration();
  cfg.addResource(resourceName);
  cfg.buildMappings();
  try {
    cfg.addResource(resourceName);
    cfg.buildMappings();
    fail();
  }
 catch (  InvalidMappingException e) {
    assertEquals(e.getType(),"resource");
    assertEquals(e.getPath(),resourceName);
    assertClassAssignability(DuplicateMappingException.class,e.getCause().getClass());
  }
}
