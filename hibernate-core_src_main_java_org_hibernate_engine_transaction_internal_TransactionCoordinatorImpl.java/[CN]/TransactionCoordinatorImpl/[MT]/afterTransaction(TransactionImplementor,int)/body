{
  if (TRACING)   LOG.trace("after transaction completion");
  final boolean success=JtaStatusHelper.isCommitted(status);
  if (sessionFactory().getStatistics().isStatisticsEnabled()) {
    transactionEnvironment.getStatisticsImplementor().endTransaction(success);
  }
  getJdbcCoordinator().afterTransaction();
  getTransactionContext().afterTransactionCompletion(hibernateTransaction,success);
  sendAfterTransactionCompletionNotifications(hibernateTransaction,status);
  reset();
}
