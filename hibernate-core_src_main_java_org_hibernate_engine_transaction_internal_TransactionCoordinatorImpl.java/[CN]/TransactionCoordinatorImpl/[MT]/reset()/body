{
  synchronizationRegistered=false;
  ownershipTaken=false;
  if (currentHibernateTransaction != null) {
    currentHibernateTransaction.invalidate();
  }
  currentHibernateTransaction=transactionFactory().createTransaction(this);
  if (transactionContext.shouldAutoJoinTransaction()) {
    currentHibernateTransaction.markForJoin();
    currentHibernateTransaction.join();
  }
  synchronizationRegistry.clearSynchronizations();
}
