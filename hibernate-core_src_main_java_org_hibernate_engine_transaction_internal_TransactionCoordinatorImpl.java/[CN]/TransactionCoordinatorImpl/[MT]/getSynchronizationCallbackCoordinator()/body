{
  if (callbackCoordinator == null) {
    callbackCoordinator=transactionEnvironment.getSessionFactory().getSettings().isJtaTrackByThread() ? new SynchronizationCallbackCoordinatorTrackingImpl(this) : new SynchronizationCallbackCoordinatorNonTrackingImpl(this);
  }
  return callbackCoordinator;
}
