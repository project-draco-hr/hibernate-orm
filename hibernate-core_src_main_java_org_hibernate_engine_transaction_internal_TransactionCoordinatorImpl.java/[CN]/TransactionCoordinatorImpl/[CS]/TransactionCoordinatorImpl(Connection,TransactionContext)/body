{
  this.transactionContext=transactionContext;
  this.jdbcCoordinator=new JdbcCoordinatorImpl(userSuppliedConnection,this);
  this.transactionEnvironment=transactionContext.getTransactionEnvironment();
  this.transactionFactory=this.transactionEnvironment.getTransactionFactory();
  this.observers=new ArrayList<TransactionObserver>();
  this.synchronizationRegistry=new SynchronizationRegistryImpl();
  reset();
  final boolean registerSynchronization=transactionContext.isAutoCloseSessionEnabled() || transactionContext.isFlushBeforeCompletionEnabled() || transactionContext.getConnectionReleaseMode() == ConnectionReleaseMode.AFTER_TRANSACTION;
  if (registerSynchronization) {
    pulse();
  }
}
