{
  if (isClosed) {
    throw new HibernateException("connection manager has been closed");
  }
  if (isSuppliedConnection()) {
    return connection;
  }
 else {
    if (borrowedConnection == null) {
      borrowedConnection=BorrowedConnectionProxy.generateProxy(this);
    }
    return borrowedConnection;
  }
}
