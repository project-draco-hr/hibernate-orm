{
  if (log.isErrorEnabled()) {
    if (log.isDebugEnabled()) {
      message=StringHelper.isNotEmpty(message) ? message : DEFAULT_EXCEPTION_MSG;
      log.debug(message,ex);
    }
    while (ex != null) {
      StringBuffer buf=new StringBuffer(30).append("SQL Error: ").append(ex.getErrorCode()).append(", SQLState: ").append(ex.getSQLState());
      log.warn(buf.toString());
      log.error(ex.getMessage());
      ex=ex.getNextException();
    }
  }
}
