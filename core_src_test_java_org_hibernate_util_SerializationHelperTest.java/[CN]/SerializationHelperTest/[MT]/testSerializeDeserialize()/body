{
  Class clazz=Thread.currentThread().getContextClassLoader().loadClass("org.hibernate.util.SerializableThing");
  Object instance=clazz.newInstance();
  byte[] bytes=SerializationHelper.serialize((Serializable)instance);
  Object instance2=SerializationHelper.deserialize(bytes,Serializable.class.getClassLoader());
  assertEquals(instance.getClass(),instance2.getClass());
  assertEquals(instance.getClass().getClassLoader(),instance2.getClass().getClassLoader());
  assertEquals(custom,instance2.getClass().getClassLoader());
}
