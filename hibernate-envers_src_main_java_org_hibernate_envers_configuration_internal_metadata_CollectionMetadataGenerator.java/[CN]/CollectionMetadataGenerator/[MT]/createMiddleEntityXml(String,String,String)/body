{
  final String schema=mainGenerator.getSchema(propertyAuditingData.getJoinTable().schema(),propertyValue.getCollectionTable());
  final String catalog=mainGenerator.getCatalog(propertyAuditingData.getJoinTable().catalog(),propertyValue.getCollectionTable());
  final Element middleEntityXml=MetadataTools.createEntity(xmlMappingData.newAdditionalMapping(),new AuditTableData(auditMiddleEntityName,auditMiddleTableName,schema,catalog),null,null);
  final Element middleEntityXmlId=middleEntityXml.addElement("composite-id");
  if (where != null) {
    middleEntityXml.addAttribute("where",where);
  }
  middleEntityXmlId.addAttribute("name",mainGenerator.getVerEntCfg().getOriginalIdPropName());
  mainGenerator.addRevisionInfoRelation(middleEntityXmlId);
  mainGenerator.addRevisionType(isEmbeddableElementType() ? middleEntityXmlId : middleEntityXml,middleEntityXml);
  return middleEntityXmlId;
}
