{
  ServiceRegistry serviceRegistry=null;
  SessionFactory sf=null;
  try {
    AnnotationConfiguration config=new AnnotationConfiguration();
    config.addAnnotatedClass(Address.class);
    config.addAnnotatedClass(Person.class);
    serviceRegistry=ServiceRegistryBuilder.buildServiceRegistry(Environment.getProperties());
    sf=config.buildSessionFactory(serviceRegistry);
    String[] schema=config.generateSchemaCreationScript(new SQLServerDialect());
    for (    String s : schema) {
      log.debug(s);
    }
    String expectedMappingTableSql="create table personAddress (address_id numeric(19,0), " + "person_id numeric(19,0) not null, primary key (person_id))";
    Assert.assertEquals("Wrong SQL",expectedMappingTableSql,schema[2]);
  }
 catch (  Exception e) {
    Assert.fail(e.getMessage());
  }
 finally {
    if (sf != null) {
      sf.close();
    }
    if (serviceRegistry != null) {
      ServiceRegistryBuilder.destroy(serviceRegistry);
    }
  }
}
