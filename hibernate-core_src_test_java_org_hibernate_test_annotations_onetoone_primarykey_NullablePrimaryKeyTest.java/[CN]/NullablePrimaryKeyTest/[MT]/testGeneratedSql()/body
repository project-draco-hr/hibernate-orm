{
  ServiceRegistryHolder serviceRegistryHolder=null;
  try {
    AnnotationConfiguration config=new AnnotationConfiguration();
    config.addAnnotatedClass(Address.class);
    config.addAnnotatedClass(Person.class);
    serviceRegistryHolder=new ServiceRegistryHolder(Environment.getProperties());
    config.buildSessionFactory(serviceRegistryHolder.getServiceRegistry());
    String[] schema=config.generateSchemaCreationScript(new SQLServerDialect());
    for (    String s : schema) {
      LOG.debug(s);
    }
    String expectedMappingTableSql="create table personAddress (address_id numeric(19,0) null, " + "person_id numeric(19,0) not null, primary key (person_id))";
    assertEquals("Wrong SQL",expectedMappingTableSql,schema[2]);
  }
 catch (  Exception e) {
    fail(e.getMessage());
  }
 finally {
    if (serviceRegistryHolder != null) {
      serviceRegistryHolder.destroy();
    }
  }
}
