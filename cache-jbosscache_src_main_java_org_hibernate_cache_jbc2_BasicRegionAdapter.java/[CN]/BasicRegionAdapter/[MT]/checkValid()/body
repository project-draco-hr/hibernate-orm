{
  boolean valid=invalidateState.get() == InvalidateState.VALID;
  if (!valid) {
synchronized (invalidationMutex) {
      if (invalidateState.compareAndSet(InvalidateState.INVALID,InvalidateState.CLEARING)) {
        Transaction tx=suspend();
        try {
          Option opt=new Option();
          opt.setLockAcquisitionTimeout(1);
          opt.setCacheModeLocal(true);
          CacheHelper.removeAll(jbcCache,regionFqn,opt);
          invalidateState.compareAndSet(InvalidateState.CLEARING,InvalidateState.VALID);
        }
 catch (        Exception e) {
          if (log.isTraceEnabled()) {
            log.trace("Could not invalidate region: " + e.getLocalizedMessage());
          }
        }
 finally {
          resume(tx);
        }
      }
    }
    valid=invalidateState.get() == InvalidateState.VALID;
  }
  return valid;
}
