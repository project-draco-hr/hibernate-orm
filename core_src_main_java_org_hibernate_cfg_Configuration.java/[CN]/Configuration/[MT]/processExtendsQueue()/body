{
  log.debug("processing extends queue");
  int added=0;
  ExtendsQueueEntry extendsQueueEntry=findPossibleExtends();
  while (extendsQueueEntry != null) {
    metadataSourceQueue.processHbmXml(extendsQueueEntry.getMetadataXml(),extendsQueueEntry.getEntityNames());
    extendsQueueEntry=findPossibleExtends();
  }
  if (extendsQueue.size() > 0) {
    Iterator iterator=extendsQueue.keySet().iterator();
    StringBuffer buf=new StringBuffer("Following super classes referenced in extends not found: ");
    while (iterator.hasNext()) {
      final ExtendsQueueEntry entry=(ExtendsQueueEntry)iterator.next();
      buf.append(entry.getExplicitName());
      if (entry.getMappingPackage() != null) {
        buf.append("[").append(entry.getMappingPackage()).append("]");
      }
      if (iterator.hasNext()) {
        buf.append(",");
      }
    }
    throw new MappingException(buf.toString());
  }
  return added;
}
