{
  File cachedFile=determineCachedDomFile(xmlFile);
  try {
    return addCacheableFileStrictly(xmlFile);
  }
 catch (  SerializationException e) {
    log.warn("Could not deserialize cache file: " + cachedFile.getPath() + " : "+ e);
  }
catch (  FileNotFoundException e) {
    log.warn("I/O reported cached file could not be found : " + cachedFile.getPath() + " : "+ e);
  }
  final String name=xmlFile.getAbsolutePath();
  final InputSource inputSource;
  try {
    inputSource=new InputSource(new FileInputStream(xmlFile));
  }
 catch (  FileNotFoundException e) {
    throw new MappingNotFoundException("file",xmlFile.toString());
  }
  log.info("Reading mappings from file: " + xmlFile);
  XmlDocument metadataXml=add(inputSource,"file",name);
  try {
    log.debug("Writing cache file for: " + xmlFile + " to: "+ cachedFile);
    SerializationHelper.serialize((Serializable)metadataXml.getDocumentTree(),new FileOutputStream(cachedFile));
  }
 catch (  SerializationException e) {
    log.warn("Could not write cached file: " + cachedFile,e);
  }
catch (  FileNotFoundException e) {
    log.warn("I/O reported error writing cached file : " + cachedFile.getPath(),e);
  }
  return this;
}
