{
  if (object instanceof HibernateProxy) {
    LazyInitializer initializer=((HibernateProxy)object).getHibernateLazyInitializer();
    if (initializer.isUninitialized()) {
      return initializer.getEntityName();
    }
    object=initializer.getImplementation();
  }
  EntityEntry entry=persistenceContext.getEntry(object);
  if (entry == null) {
    return guessEntityName(object);
  }
 else {
    return entry.getPersister().getEntityName();
  }
}
