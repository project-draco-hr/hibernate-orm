{
  errorIfClosed();
  checkTransactionSynchStatus();
  NonFlushedChanges nonFlushedChanges=new NonFlushedChangesImpl(this);
  if (childSessionsByEntityMode != null) {
    Iterator it=childSessionsByEntityMode.values().iterator();
    while (it.hasNext()) {
      nonFlushedChanges.extractFromSession((EventSource)it.next());
    }
  }
  return nonFlushedChanges;
}
