{
  Element sfNode=doc.getRootElement().element("session-factory");
  String name=sfNode.attributeValue("name");
  if (name != null) {
    properties.setProperty(Environment.SESSION_FACTORY_NAME,name);
  }
  addProperties(sfNode);
  parseSessionFactory(sfNode,name);
  Element secNode=doc.getRootElement().element("security");
  if (secNode != null) {
    parseSecurity(secNode);
  }
  log.info("Configured SessionFactory: " + name);
  log.debug("properties: " + properties);
  return this;
}
