{
  File cachedFile=determineCachedDomFile(xmlFile);
  try {
    return addCacheableFileStrictly(xmlFile);
  }
 catch (  SerializationException e) {
    LOG.unableToDeserializeCache(cachedFile.getPath(),e);
  }
catch (  FileNotFoundException e) {
    LOG.cachedFileNotFound(cachedFile.getPath(),e);
  }
  final String name=xmlFile.getAbsolutePath();
  final InputSource inputSource;
  try {
    inputSource=new InputSource(new FileInputStream(xmlFile));
  }
 catch (  FileNotFoundException e) {
    throw new MappingNotFoundException("file",xmlFile.toString());
  }
  LOG.readingMappingsFromFile(xmlFile.getPath());
  XmlDocument metadataXml=add(inputSource,"file",name);
  try {
    LOG.writingCacheFile(xmlFile,cachedFile);
    SerializationHelper.serialize((Serializable)metadataXml.getDocumentTree(),new FileOutputStream(cachedFile));
  }
 catch (  Exception e) {
    LOG.unableToWriteCachedFile(cachedFile.getPath(),e.getMessage());
  }
  return this;
}
