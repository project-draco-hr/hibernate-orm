{
  final String protocol=url.getProtocol();
  if ("jar".equals(protocol)) {
    return new JarProtocolArchiveDescriptor(this,url,entry);
  }
 else   if (StringHelper.isEmpty(protocol) || "file".equals(protocol) || "vfszip".equals(protocol)|| "vfsfile".equals(protocol)) {
    final File file=new File(extractLocalFilePath(url));
    if (file.isDirectory()) {
      return new ExplodedArchiveDescriptor(this,url,entry);
    }
 else {
      return new JarFileBasedArchiveDescriptor(this,url,entry);
    }
  }
 else {
    return new JarInputStreamBasedArchiveDescriptor(this,url,entry);
  }
}
