{
  Session s=openSession();
  s.getTransaction().begin();
  Criteria rootCriteria=s.createCriteria(Order.class,"order");
  rootCriteria.createCriteria("order.orderContacts","contact",JoinType.LEFT_OUTER_JOIN).add(Restrictions.eq("contact.contact","Contact1"));
  rootCriteria.createAlias("order.orderLines","line",JoinType.LEFT_OUTER_JOIN).add(Restrictions.eq("line.articleId","3000"));
  Order result=(Order)rootCriteria.uniqueResult();
  assertEquals(order1.getOrderId(),result.getOrderId());
  assertEquals(1,result.getLines().size());
  assertEquals("3000",result.getLines().iterator().next().getArticleId());
  assertEquals(2,result.getContacts().size());
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.getTransaction().begin();
  rootCriteria=s.createCriteria(Order.class,"order");
  rootCriteria.createCriteria("order.orderContacts","contact",JoinType.LEFT_OUTER_JOIN).add(Restrictions.eq("contact.contact","Contact1"));
  rootCriteria.createAlias("order.orderLines","line",JoinType.LEFT_OUTER_JOIN).add(Restrictions.eq("line.articleId","3000"));
  result=(Order)rootCriteria.uniqueResult();
  assertEquals(order1.getOrderId(),result.getOrderId());
  assertEquals(1,result.getLines().size());
  assertEquals("3000",result.getLines().iterator().next().getArticleId());
  assertEquals(2,result.getContacts().size());
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.getTransaction().begin();
  rootCriteria=s.createCriteria(Order.class,"order");
  rootCriteria.createAlias("order.orderContacts","contact",JoinType.LEFT_OUTER_JOIN).add(Restrictions.eq("contact.contact","Contact1"));
  rootCriteria.createCriteria("order.orderLines","line",JoinType.LEFT_OUTER_JOIN).add(Restrictions.eq("line.articleId","3000"));
  result=(Order)rootCriteria.uniqueResult();
  assertEquals(order1.getOrderId(),result.getOrderId());
  assertEquals(2,result.getLines().size());
  assertEquals(1,result.getContacts().size());
  assertEquals("Contact1",result.getContacts().iterator().next().getContact());
  s.getTransaction().commit();
  s.close();
  s=openSession();
  s.getTransaction().begin();
  rootCriteria=s.createCriteria(Order.class,"order");
  rootCriteria.createCriteria("order.orderLines","line",JoinType.LEFT_OUTER_JOIN).add(Restrictions.eq("line.articleId","3000"));
  rootCriteria.createAlias("order.orderContacts","contact",JoinType.LEFT_OUTER_JOIN).add(Restrictions.eq("contact.contact","Contact1"));
  result=(Order)rootCriteria.uniqueResult();
  assertEquals(order1.getOrderId(),result.getOrderId());
  assertEquals(2,result.getLines().size());
  assertEquals(1,result.getContacts().size());
  assertEquals("Contact1",result.getContacts().iterator().next().getContact());
  s.getTransaction().commit();
  s.close();
}
