{
  Session s=openSession();
  s.getTransaction().begin();
  Criteria rootCriteria=s.createCriteria(Order.class);
  Criteria subCriteria=rootCriteria.createCriteria("orderLines",JoinFragment.LEFT_OUTER_JOIN);
  assertNotSame(rootCriteria,subCriteria);
  assertSame(subCriteria,subCriteria.add(Restrictions.or(Restrictions.isNull("articleId"),Restrictions.eq("articleId","1000"))));
  List orders=rootCriteria.list();
  assertEquals(2,orders.size());
  for (Iterator it=orders.iterator(); it.hasNext(); ) {
    Order o=(Order)it.next();
    if (order1.getOrderId() == o.getOrderId()) {
      assertEquals(order1.getLines().size(),o.getLines().size());
    }
 else     if (order2.getOrderId() == o.getOrderId()) {
      assertEquals(order2.getLines(),o.getLines());
      assertTrue(o.getLines().isEmpty());
    }
 else {
      fail("unknown order");
    }
  }
  s.getTransaction().commit();
  s.close();
}
