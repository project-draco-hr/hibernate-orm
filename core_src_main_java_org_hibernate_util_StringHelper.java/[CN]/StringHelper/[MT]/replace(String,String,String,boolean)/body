{
  int loc=template == null ? -1 : template.indexOf(placeholder);
  if (loc < 0) {
    return template;
  }
 else {
    final boolean actuallyReplace=!wholeWords || loc + placeholder.length() == template.length() || !Character.isJavaIdentifierPart(template.charAt(loc + placeholder.length()));
    String actualReplacement=actuallyReplace ? replacement : placeholder;
    return new StringBuffer(template.substring(0,loc)).append(actualReplacement).append(replace(template.substring(loc + placeholder.length()),placeholder,replacement,wholeWords)).toString();
  }
}
