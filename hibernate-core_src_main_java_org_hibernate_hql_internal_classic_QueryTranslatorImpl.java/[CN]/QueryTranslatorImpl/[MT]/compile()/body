{
  LOG.trace("Compiling query");
  try {
    ParserHelper.parse(new PreprocessingParser(tokenReplacements),queryString,ParserHelper.HQL_SEPARATORS,this);
    renderSQL();
  }
 catch (  QueryException qe) {
    if (qe.getQueryString() == null) {
      throw generateQueryException(qe.getMessage(),qe);
    }
 else {
      throw qe;
    }
  }
catch (  MappingException me) {
    throw me;
  }
catch (  Exception e) {
    LOG.debug("Unexpected query compilation problem",e);
    e.printStackTrace();
    throw generateQueryException("Incorrect query syntax",e);
  }
  postInstantiate();
  compiled=true;
}
