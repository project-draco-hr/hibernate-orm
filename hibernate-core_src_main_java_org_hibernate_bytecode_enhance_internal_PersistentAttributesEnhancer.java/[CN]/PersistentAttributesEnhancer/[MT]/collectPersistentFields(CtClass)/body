{
  final List<CtField> persistentFieldList=new LinkedList<CtField>();
  for (  CtField ctField : managedCtClass.getDeclaredFields()) {
    if (Modifier.isStatic(ctField.getModifiers()) || ctField.getName().startsWith("$$_hibernate_")) {
      continue;
    }
    if ("this$0".equals(ctField.getName())) {
      continue;
    }
    if (enhancementContext.isPersistentField(ctField)) {
      persistentFieldList.add(ctField);
    }
  }
  for (  CtField ctField : managedCtClass.getFields()) {
    if (ctField.getDeclaringClass().equals(managedCtClass)) {
      continue;
    }
    if (!enhancementContext.isMappedSuperclassClass(ctField.getDeclaringClass()) || Modifier.isStatic(ctField.getModifiers())) {
      continue;
    }
    if (enhancementContext.isPersistentField(ctField)) {
      persistentFieldList.add(ctField);
    }
  }
  return enhancementContext.order(persistentFieldList.toArray(new CtField[persistentFieldList.size()]));
}
