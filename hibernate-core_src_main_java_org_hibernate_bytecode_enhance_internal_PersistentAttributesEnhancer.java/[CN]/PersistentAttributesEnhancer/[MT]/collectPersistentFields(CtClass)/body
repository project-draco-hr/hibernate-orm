{
  List<CtField> persistentFieldList=new ArrayList<CtField>();
  for (  CtField ctField : managedCtClass.getDeclaredFields()) {
    if (ctField.getName().startsWith("$$_hibernate_") || "this$0".equals(ctField.getName())) {
      continue;
    }
    if (!Modifier.isStatic(ctField.getModifiers()) && enhancementContext.isPersistentField(ctField)) {
      persistentFieldList.add(ctField);
    }
  }
  if (!enhancementContext.isMappedSuperclassClass(managedCtClass)) {
    persistentFieldList.addAll(collectInheritPersistentFields(managedCtClass));
  }
  CtField[] orderedFields=enhancementContext.order(persistentFieldList.toArray(new CtField[0]));
  log.debugf("Persistent fields for entity %s: %s",managedCtClass.getName(),Arrays.toString(orderedFields));
  return orderedFields;
}
