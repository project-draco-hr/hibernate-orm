{
  final boolean required=canJoinsBeRequired() && !compositionDefinition.isNullable();
  final CompositeQuerySpaceImpl rhs=new CompositeQuerySpaceImpl(new CompositePropertyMapping(compositionDefinition.getType(),(PropertyMapping)this.getEntityPersister(),compositionDefinition.getName()),querySpaceUid,getQuerySpaces(),required,sessionFactory());
  getQuerySpaces().registerQuerySpace(rhs);
  final JoinDefinedByMetadata join=JoinHelper.INSTANCE.createCompositeJoin(this,compositionDefinition.getName(),rhs,required,compositionDefinition.getType());
  internalGetJoins().add(join);
  return join;
}
