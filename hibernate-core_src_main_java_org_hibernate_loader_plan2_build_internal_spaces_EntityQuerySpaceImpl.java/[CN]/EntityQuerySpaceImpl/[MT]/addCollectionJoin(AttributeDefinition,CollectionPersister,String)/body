{
  final boolean required=canJoinsBeRequired() && !attributeDefinition.isNullable();
  final CollectionQuerySpaceImpl rhs=new CollectionQuerySpaceImpl(collectionPersister,querySpaceUid,getQuerySpaces(),required,sessionFactory());
  getQuerySpaces().registerQuerySpace(rhs);
  final JoinImpl join=new JoinImpl(this,attributeDefinition.getName(),rhs,((CollectionType)attributeDefinition.getType()).getAssociatedJoinable(sessionFactory()).getKeyColumnNames(),(AssociationType)attributeDefinition.getType(),required);
  internalGetJoins().add(join);
  return join;
}
