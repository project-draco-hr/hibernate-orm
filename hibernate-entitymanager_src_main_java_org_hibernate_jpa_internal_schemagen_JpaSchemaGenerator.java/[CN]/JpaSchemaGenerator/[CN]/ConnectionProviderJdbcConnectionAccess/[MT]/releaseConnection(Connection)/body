{
  if (connection != this.jdbcConnection) {
    throw new PersistenceException(String.format("Connection [%s] passed back to %s was not the one obtained [%s] from it",connection,ConnectionProviderJdbcConnectionAccess.class.getName(),jdbcConnection));
  }
  if (!wasInitiallyAutoCommit) {
    try {
      if (jdbcConnection.getAutoCommit()) {
        jdbcConnection.setAutoCommit(false);
      }
    }
 catch (    SQLException e) {
      log.info("Was unable to reset JDBC connection to no longer be in auto-commit mode");
    }
  }
  connectionProvider.closeConnection(jdbcConnection);
}
