{
  final List<GenerationSource> generationSourceList=new ArrayList<GenerationSource>();
  SchemaGenSource sourceType=SchemaGenSource.interpret(hibernateConfiguration.getProperty(AvailableSettings.SCHEMA_GEN_DROP_SOURCE));
  final Object dropScriptSourceSetting=hibernateConfiguration.getProperties().get(AvailableSettings.SCHEMA_GEN_DROP_SCRIPT_SOURCE);
  if (sourceType == null) {
    if (dropScriptSourceSetting != null) {
      sourceType=SchemaGenSource.SCRIPTS;
    }
 else {
      sourceType=SchemaGenSource.METADATA;
    }
  }
  final ImportSqlCommandExtractor scriptCommandExtractor=serviceRegistry.getService(ImportSqlCommandExtractor.class);
  if (sourceType == SchemaGenSource.METADATA) {
    generationSourceList.add(new MetadataSource(hibernateConfiguration,dialect,false));
  }
 else   if (sourceType == SchemaGenSource.SCRIPTS) {
    generationSourceList.add(new ScriptSource(dropScriptSourceSetting,scriptCommandExtractor));
  }
 else   if (sourceType == SchemaGenSource.METADATA_THEN_SCRIPTS) {
    generationSourceList.add(new MetadataSource(hibernateConfiguration,dialect,false));
    generationSourceList.add(new ScriptSource(dropScriptSourceSetting,scriptCommandExtractor));
  }
 else   if (sourceType == SchemaGenSource.SCRIPTS_THEN_METADATA) {
    generationSourceList.add(new ScriptSource(dropScriptSourceSetting,scriptCommandExtractor));
    generationSourceList.add(new MetadataSource(hibernateConfiguration,dialect,false));
  }
  return generationSourceList;
}
