{
  if (!hasNaturalIdentifier()) {
    throw new HibernateException("Attempt to build natural-id -> PK resolution query for entity that does not define natural id");
  }
  if (pkByNaturalIdQuery == null) {
    pkByNaturalIdQuery=generateEntityIdByNaturalIdSql();
  }
  return pkByNaturalIdQuery;
}
