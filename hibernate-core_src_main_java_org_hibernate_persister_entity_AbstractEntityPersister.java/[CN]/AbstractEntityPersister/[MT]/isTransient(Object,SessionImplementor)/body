{
  final Serializable id;
  if (canExtractIdOutOfEntity()) {
    id=getIdentifier(entity,session);
  }
 else {
    id=null;
  }
  if (id == null) {
    return Boolean.TRUE;
  }
  final Object version=getVersion(entity);
  if (isVersioned()) {
    Boolean result=entityMetamodel.getVersionProperty().getUnsavedValue().isUnsaved(version);
    if (result != null) {
      return result;
    }
  }
  Boolean result=entityMetamodel.getIdentifierProperty().getUnsavedValue().isUnsaved(id);
  if (result != null) {
    return result;
  }
  if (hasCache()) {
    CacheKey ck=session.generateCacheKey(id,getIdentifierType(),getRootEntityName());
    if (getCacheAccessStrategy().get(ck,session.getTimestamp()) != null) {
      return Boolean.FALSE;
    }
  }
  return null;
}
