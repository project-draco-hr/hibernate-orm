{
  if (!(isResolved() && nakedPropertyRef)) {
    throw new UnsupportedOperationException();
  }
  String propertyName=getOriginalText();
  if (!getDataType().isCollectionType()) {
    throw new SemanticException("Collection expected; [" + propertyName + "] does not refer to a collection property");
  }
  CollectionType type=(CollectionType)getDataType();
  String role=type.getRole();
  QueryableCollection queryableCollection=getSessionFactoryHelper().requireQueryableCollection(role);
  String alias=null;
  String columnTableAlias=getFromElement().getTableAlias();
  int joinType=JoinFragment.INNER_JOIN;
  boolean fetch=false;
  FromElementFactory factory=new FromElementFactory(getWalker().getCurrentFromClause(),getFromElement(),propertyName,alias,getFromElement().toColumns(columnTableAlias,propertyName,false),true);
  FromElement elem=factory.createCollection(queryableCollection,role,joinType,fetch,true);
  setFromElement(elem);
  getWalker().addQuerySpaces(queryableCollection.getCollectionSpaces());
}
