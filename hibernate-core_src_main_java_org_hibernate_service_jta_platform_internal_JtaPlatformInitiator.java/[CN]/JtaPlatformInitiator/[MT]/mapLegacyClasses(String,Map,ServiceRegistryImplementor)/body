{
  if (tmlImplName == null) {
    return null;
  }
  LOG.legacyTransactionManagerStrategy(JtaPlatform.class.getName(),AvailableSettings.JTA_PLATFORM);
  if ("org.hibernate.transaction.BESTransactionManagerLookup".equals(tmlImplName)) {
    return new BorlandEnterpriseServerJtaPlatform();
  }
  if ("org.hibernate.transaction.BTMTransactionManagerLookup".equals(tmlImplName)) {
    return new BitronixJtaPlatform();
  }
  if ("org.hibernate.transaction.JBossTransactionManagerLookup".equals(tmlImplName)) {
    return new JBossAppServerJtaPlatform();
  }
  if ("org.hibernate.transaction.JBossTSStandaloneTransactionManagerLookup".equals(tmlImplName)) {
    return new JBossStandAloneJtaPlatform();
  }
  if ("org.hibernate.transaction.JOnASTransactionManagerLookup".equals(tmlImplName)) {
    return new JOnASJtaPlatform();
  }
  if ("org.hibernate.transaction.JOTMTransactionManagerLookup".equals(tmlImplName)) {
    return new JOTMJtaPlatform();
  }
  if ("org.hibernate.transaction.JRun4TransactionManagerLookup".equals(tmlImplName)) {
    return new JRun4JtaPlatform();
  }
  if ("org.hibernate.transaction.OC4JTransactionManagerLookup".equals(tmlImplName)) {
    return new OC4JJtaPlatform();
  }
  if ("org.hibernate.transaction.OrionTransactionManagerLookup".equals(tmlImplName)) {
    return new OrionJtaPlatform();
  }
  if ("org.hibernate.transaction.ResinTransactionManagerLookup".equals(tmlImplName)) {
    return new ResinJtaPlatform();
  }
  if ("org.hibernate.transaction.SunONETransactionManagerLookup".equals(tmlImplName)) {
    return new SunOneJtaPlatform();
  }
  if ("org.hibernate.transaction.WeblogicTransactionManagerLookup".equals(tmlImplName)) {
    return new WeblogicJtaPlatform();
  }
  if ("org.hibernate.transaction.WebSphereTransactionManagerLookup".equals(tmlImplName)) {
    return new WebSphereJtaPlatform();
  }
  if ("org.hibernate.transaction.WebSphereExtendedJTATransactionLookup".equals(tmlImplName)) {
    return new WebSphereExtendedJtaPlatform();
  }
  try {
    TransactionManagerLookup lookup=(TransactionManagerLookup)registry.getService(ClassLoaderService.class).classForName(tmlImplName).newInstance();
    return new TransactionManagerLookupBridge(lookup,JndiHelper.extractJndiProperties(configVales));
  }
 catch (  Exception e) {
    throw new JtaPlatformException("Unable to build " + TransactionManagerLookupBridge.class.getName() + " from specified "+ TransactionManagerLookup.class.getName()+ " implementation: "+ tmlImplName);
  }
}
