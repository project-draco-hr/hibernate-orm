{
  final ResultSetProcessingContext.EntityReferenceProcessingState entityReferenceProcessingState=context.getProcessingState(this);
  EntityKey entityKey=entityReferenceProcessingState.getEntityKey();
  if (entityKey == null) {
    entityKey=identifierDescription.resolve(resultSet,context);
    if (entityKey == null) {
      if (getFetchedType().isOneToOne()) {
        final EntityKey ownersEntityKey=context.getProcessingState((EntityReference)getOwner()).getEntityKey();
        if (ownersEntityKey != null) {
          context.getSession().getPersistenceContext().addNullProperty(ownersEntityKey,getFetchedType().getPropertyName());
        }
      }
    }
    entityReferenceProcessingState.registerEntityKey(entityKey);
    for (    Fetch fetch : getFetches()) {
      fetch.resolve(resultSet,context);
    }
  }
  return entityKey;
}
