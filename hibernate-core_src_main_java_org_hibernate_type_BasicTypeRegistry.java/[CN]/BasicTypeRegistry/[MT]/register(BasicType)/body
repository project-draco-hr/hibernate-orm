{
  if (locked) {
    throw new HibernateException("Can not alter TypeRegistry at this time");
  }
  if (type == null) {
    throw new HibernateException("Type to register cannot be null");
  }
  if (type.getRegistrationKeys() == null || type.getRegistrationKeys().length == 0) {
    log.warn("Type [{}] defined no registration keys; ignoring",type);
  }
  for (  String key : type.getRegistrationKeys()) {
    if (key == null) {
      continue;
    }
    log.debug("Adding type registration {} -> {}",key,type);
    final Type old=registry.put(key,type);
    if (old != null && old != type) {
      log.info("Type registration [{}] overrides previous : {}",key,old);
    }
  }
}
