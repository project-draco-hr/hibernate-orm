{
  if (initialized) {
    throw new UnsupportedOperationException("EnversService#initialize should be called only once");
  }
  initialized=true;
  this.serviceRegistry=metadata.getMetadataBuildingOptions().getServiceRegistry();
  this.classLoaderService=serviceRegistry.getService(ClassLoaderService.class);
  doInitialize(metadata,mappingCollector,serviceRegistry,classLoaderService);
}
