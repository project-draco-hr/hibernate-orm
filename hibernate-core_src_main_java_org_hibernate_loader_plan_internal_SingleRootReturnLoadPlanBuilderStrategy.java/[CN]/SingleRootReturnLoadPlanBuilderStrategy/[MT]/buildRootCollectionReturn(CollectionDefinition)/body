{
  final CollectionPersister persister=collectionDefinition.getCollectionPersister();
  final String collectionRole=persister.getRole();
  final CollectionAliases collectionAliases=generateCollectionColumnAliases(collectionDefinition.getCollectionPersister());
  final Type elementType=collectionDefinition.getCollectionPersister().getElementType();
  final EntityAliases elementAliases;
  if (elementType.isEntityType()) {
    final EntityType entityElementType=(EntityType)elementType;
    elementAliases=generateEntityColumnAliases((EntityPersister)entityElementType.getAssociatedJoinable(sessionFactory()));
  }
 else {
    elementAliases=null;
  }
  return new CollectionReturn(sessionFactory(),rootAlias,LockMode.NONE,persister.getOwnerEntityPersister().getEntityName(),StringHelper.unqualify(collectionRole),collectionAliases,elementAliases);
}
