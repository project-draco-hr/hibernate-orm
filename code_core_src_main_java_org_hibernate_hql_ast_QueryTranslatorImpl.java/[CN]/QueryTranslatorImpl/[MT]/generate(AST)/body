{
  if (sql == null) {
    SqlGenerator gen=new SqlGenerator(factory);
    gen.statement(sqlAst);
    sql=gen.getSQL();
    if (log.isDebugEnabled()) {
      log.debug("HQL: " + hql);
      log.debug("SQL: " + sql);
    }
    gen.getParseErrorHandler().throwQueryException();
  }
}
