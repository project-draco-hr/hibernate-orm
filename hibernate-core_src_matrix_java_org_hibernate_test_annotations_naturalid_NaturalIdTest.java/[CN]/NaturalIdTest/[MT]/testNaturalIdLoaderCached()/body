{
  saveSomeCitizens();
  Statistics stats=sessionFactory().getStatistics();
  assertEquals("Cache hits should be empty",0,stats.getNaturalIdCacheHitCount());
  assertEquals("First load should be a miss",1,stats.getNaturalIdCacheMissCount());
  assertEquals("Query result should be added to cache",3,stats.getNaturalIdCachePutCount());
  Session s=openSession();
  Transaction tx=s.beginTransaction();
  State france=(State)s.load(State.class,2);
  final NaturalIdLoadAccess naturalIdLoader=s.byNaturalId(Citizen.class);
  naturalIdLoader.using("ssn","1234").using("state",france);
  stats.setStatisticsEnabled(true);
  stats.clear();
  assertEquals("Cache hits should be empty",0,stats.getNaturalIdCacheHitCount());
  Citizen citizen=(Citizen)naturalIdLoader.load();
  assertNotNull(citizen);
  assertEquals("Cache hits should be empty",1,stats.getNaturalIdCacheHitCount());
  assertEquals("First load should be a miss",0,stats.getNaturalIdCacheMissCount());
  assertEquals("Query result should be added to cache",0,stats.getNaturalIdCachePutCount());
  tx.rollback();
  s.close();
}
