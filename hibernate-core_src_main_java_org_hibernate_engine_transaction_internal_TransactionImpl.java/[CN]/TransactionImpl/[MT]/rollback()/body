{
  TransactionStatus status=transactionDriverControl.getStatus();
  if (!status.canRollback()) {
    throw new TransactionException("Cannot rollback transaction in current status [" + status.name() + "]");
  }
  LOG.debug("rolling back");
  if (status != TransactionStatus.FAILED_COMMIT || allowFailedCommitToPhysicallyRollback()) {
    try {
      this.transactionDriverControl.rollback();
    }
  finally {
      invalidate();
    }
  }
}
