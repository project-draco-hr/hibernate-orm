{
  Metadata metadata=new Metadata();
{
    XmlDocument xmlDocument=readResource("/org/hibernate/metamodel/binding/SimpleEntity.hbm.xml");
    metadata.getHibernateXmlBinder().bindRoot(xmlDocument);
    EntityBinding entityBinding=metadata.getEntityBinding(SimpleEntity.class.getName());
    assertNotNull(entityBinding);
    assertNotNull(entityBinding.getEntityIdentifier());
    assertNotNull(entityBinding.getEntityIdentifier().getValueBinding());
    assertNull(entityBinding.getVersioningValueBinding());
    AttributeBinding idAttributeBinding=entityBinding.getAttributeBinding("id");
    assertNotNull(idAttributeBinding);
    assertSame(idAttributeBinding,entityBinding.getEntityIdentifier().getValueBinding());
    assertNotNull(idAttributeBinding.getAttribute());
    assertNotNull(idAttributeBinding.getValue());
    assertTrue(idAttributeBinding.getValue() instanceof Column);
    AttributeBinding nameBinding=entityBinding.getAttributeBinding("name");
    assertNotNull(nameBinding);
    assertNotNull(nameBinding.getAttribute());
    assertNotNull(nameBinding.getValue());
  }
{
    XmlDocument xmlDocument=readResource("/org/hibernate/metamodel/binding/SimpleVersionedEntity.hbm.xml");
    metadata.getHibernateXmlBinder().bindRoot(xmlDocument);
    EntityBinding entityBinding=metadata.getEntityBinding(SimpleVersionedEntity.class.getName());
    assertNotNull(entityBinding);
    assertNotNull(entityBinding.getEntityIdentifier());
    assertNotNull(entityBinding.getEntityIdentifier().getValueBinding());
    assertNotNull(entityBinding.getVersioningValueBinding());
    assertNotNull(entityBinding.getVersioningValueBinding().getAttribute());
    AttributeBinding idAttributeBinding=entityBinding.getAttributeBinding("id");
    assertNotNull(idAttributeBinding);
    assertSame(idAttributeBinding,entityBinding.getEntityIdentifier().getValueBinding());
    assertNotNull(idAttributeBinding.getAttribute());
    assertNotNull(idAttributeBinding.getValue());
    assertTrue(idAttributeBinding.getValue() instanceof Column);
    AttributeBinding nameBinding=entityBinding.getAttributeBinding("name");
    assertNotNull(nameBinding);
    assertNotNull(nameBinding.getAttribute());
    assertNotNull(nameBinding.getValue());
  }
}
