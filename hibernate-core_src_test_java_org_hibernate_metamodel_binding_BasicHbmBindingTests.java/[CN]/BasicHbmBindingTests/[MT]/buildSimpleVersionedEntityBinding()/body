{
  MetadataImpl metadata=new MetadataImpl(basicServiceRegistry());
  String fileName="/org/hibernate/metamodel/binding/SimpleVersionedEntity.hbm.xml";
  XmlDocument xmlDocument=readResource(fileName);
  metadata.getHibernateXmlBinder().bindRoot(xmlDocument);
  fileName="org/hibernate/metamodel/binding/SimpleVersionedEntity.xml";
  final String HIBERNATE_MAPPING_XSD="org/hibernate/hibernate-mapping-3.0.xsd";
  HibernateMapping mapping=null;
  try {
    ClassLoaderService classLoaderService=metadata.getServiceRegistry().getService(ClassLoaderService.class);
    mapping=XmlHelper.unmarshallXml(fileName,HIBERNATE_MAPPING_XSD,HibernateMapping.class,classLoaderService).getRoot();
  }
 catch (  JAXBException e) {
    log.debug(e.getMessage());
    fail("Unable to load xml " + fileName);
  }
  metadata.getHibernateXmlBinder().bindRoot(mapping);
  return metadata.getEntityBinding(SimpleVersionedEntity.class.getName());
}
