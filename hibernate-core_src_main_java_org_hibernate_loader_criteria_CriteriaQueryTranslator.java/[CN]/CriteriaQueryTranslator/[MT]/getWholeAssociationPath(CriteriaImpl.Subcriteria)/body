{
  String path=subcriteria.getPath();
  Criteria parent=null;
  if (path.indexOf('.') > 0) {
    String testAlias=StringHelper.root(path);
    if (!testAlias.equals(subcriteria.getAlias())) {
      parent=aliasCriteriaMap.get(testAlias);
    }
  }
  if (parent == null) {
    parent=subcriteria.getParent();
  }
 else {
    path=StringHelper.unroot(path);
  }
  if (parent.equals(rootCriteria)) {
    return path;
  }
 else {
    return getWholeAssociationPath((CriteriaImpl.Subcriteria)parent) + '.' + path;
  }
}
