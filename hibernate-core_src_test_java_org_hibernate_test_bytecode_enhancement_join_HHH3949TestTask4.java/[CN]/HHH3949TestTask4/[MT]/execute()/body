{
  Session session=getFactory().openSession();
  session.getTransaction().begin();
  List<Vehicle> vehicles=(List<Vehicle>)session.createCriteria(Vehicle.class).setFetchMode("driver",FetchMode.JOIN).list();
  session.getTransaction().commit();
  session.close();
  for (  Vehicle vehicle : vehicles) {
    if (shouldHaveDriver(vehicle)) {
      Assert.assertNotNull(vehicle.getDriver());
      Assert.assertNotNull(vehicle.getDriver().getVehicle());
    }
  }
}
