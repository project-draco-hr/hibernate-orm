{
  final Type indexType=persister.getIndexType();
  HashMap snapshot=(HashMap)getSnapshot();
  HashMap deletes=(HashMap)snapshot.clone();
  deletes.keySet().removeAll(((HashMap)getSnapshot(persister)).keySet());
  ArrayList deleteList=new ArrayList(deletes.size());
  Iterator iter=deletes.entrySet().iterator();
  while (iter.hasNext()) {
    Map.Entry me=(Map.Entry)iter.next();
    final Object object=indexIsFormula ? me.getValue() : ((NullableType)indexType).fromXMLString((String)me.getKey(),persister.getFactory());
    if (object != null)     deleteList.add(object);
  }
  return deleteList.iterator();
}
