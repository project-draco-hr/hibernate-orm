{
  if (injectionMethod.getParameterTypes() == null || injectionMethod.getParameterTypes().length != 1) {
    throw new ServiceDependencyException("Encountered @InjectService on method with unexpected number of parameters");
  }
  Class dependentServiceRole=injectService.serviceRole();
  if (dependentServiceRole == null || dependentServiceRole.equals(Void.class)) {
    dependentServiceRole=injectionMethod.getParameterTypes()[0];
  }
  final Service dependantService=servicesRegistry.getService(dependentServiceRole);
  if (dependantService == null) {
    if (injectService.required()) {
      throw new ServiceDependencyException("Dependency [" + dependentServiceRole + "] declared by service ["+ service+ "] not found");
    }
  }
 else {
    try {
      injectionMethod.invoke(service,dependantService);
    }
 catch (    Exception e) {
      throw new ServiceDependencyException("Cannot inject dependency service",e);
    }
  }
}
