{
  final int loc=propertyPath.indexOf('.');
  final String basePropertyName=loc > 0 ? propertyPath.substring(0,loc) : propertyPath;
  final int index=entityMetamodel.getPropertyIndex(basePropertyName);
  final Object baseValue=getPropertyValue(entity,index);
  if (loc > 0) {
    if (baseValue == null) {
      return null;
    }
    return getComponentValue((ComponentType)entityMetamodel.getPropertyTypes()[index],baseValue,propertyPath.substring(loc + 1));
  }
 else {
    return baseValue;
  }
}
