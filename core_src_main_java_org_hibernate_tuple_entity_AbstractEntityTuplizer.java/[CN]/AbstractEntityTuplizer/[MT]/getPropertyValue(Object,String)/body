{
  int loc=propertyPath.indexOf('.');
  String basePropertyName=loc > 0 ? propertyPath.substring(0,loc) : propertyPath;
  int index=entityMetamodel.getPropertyIndex(basePropertyName);
  Object baseValue=getPropertyValue(entity,index);
  if (loc > 0) {
    ComponentType type=(ComponentType)entityMetamodel.getPropertyTypes()[index];
    return getComponentValue(type,baseValue,propertyPath.substring(loc + 1));
  }
 else {
    return baseValue;
  }
}
