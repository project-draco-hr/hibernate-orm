{
  Set rev1_related=new HashSet(getAuditReader().createQuery().forEntitiesAtRevision(SetRefIngMulIdEntity.class,1).add(AuditEntity.relatedId("reference").eq(id3)).getResultList());
  Set rev1=new HashSet(getAuditReader().createQuery().forEntitiesAtRevision(SetRefIngMulIdEntity.class,1).add(AuditEntity.property("reference").eq(new SetRefEdMulIdEntity(id3,null))).getResultList());
  Set rev2_related=new HashSet(getAuditReader().createQuery().forEntitiesAtRevision(SetRefIngMulIdEntity.class,2).add(AuditEntity.relatedId("reference").eq(id3)).getResultList());
  Set rev2=new HashSet(getAuditReader().createQuery().forEntitiesAtRevision(SetRefIngMulIdEntity.class,2).add(AuditEntity.property("reference").eq(new SetRefEdMulIdEntity(id3,null))).getResultList());
  Set rev3_related=new HashSet(getAuditReader().createQuery().forEntitiesAtRevision(SetRefIngMulIdEntity.class,3).add(AuditEntity.relatedId("reference").eq(id3)).getResultList());
  Set rev3=new HashSet(getAuditReader().createQuery().forEntitiesAtRevision(SetRefIngMulIdEntity.class,3).add(AuditEntity.property("reference").eq(new SetRefEdMulIdEntity(id3,null))).getResultList());
  assertEquals(rev1,rev1_related);
  assertEquals(rev2,rev2_related);
  assertEquals(rev3,rev3_related);
  assertEquals(rev1,TestTools.makeSet());
  assertEquals(rev2,TestTools.makeSet(new SetRefIngMulIdEntity(id1,"x",null)));
  assertEquals(rev3,TestTools.makeSet(new SetRefIngMulIdEntity(id1,"x",null),new SetRefIngMulIdEntity(id2,"y",null)));
}
