{
  Session s=openSession();
  Transaction t=s.beginTransaction();
  C1 c1=new C1();
  D d=new D();
  d.setAmount(213.34f);
  c1.setAddress("foo bar");
  c1.setCount(23432);
  c1.setName("c1");
  c1.setD(d);
  s.save(c1);
  d.setId(c1.getId());
  s.save(d);
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  A c1a=(A)s.load(A.class,c1.getId());
  assertFalse(Hibernate.isInitialized(c1a));
  assertTrue(c1a.getName().equals("c1"));
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  B c1b=(B)s.load(B.class,c1.getId());
  assertTrue((c1b.getCount() == 23432) && c1b.getName().equals("c1"));
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  c1=(C1)s.load(C1.class,c1.getId());
  assertTrue(c1.getAddress().equals("foo bar") && (c1.getCount() == 23432) && c1.getName().equals("c1")&& c1.getD().getAmount() > 213.3f);
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  c1a=(A)s.load(A.class,c1.getId());
  assertTrue(c1a.getName().equals("c1"));
  c1=(C1)s.load(C1.class,c1.getId());
  assertTrue(c1.getAddress().equals("foo bar") && (c1.getCount() == 23432) && c1.getName().equals("c1")&& c1.getD().getAmount() > 213.3f);
  c1b=(B)s.load(B.class,c1.getId());
  assertTrue((c1b.getCount() == 23432) && c1b.getName().equals("c1"));
  assertTrue(c1a.getName().equals("c1"));
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  c1a=(A)s.load(A.class,c1.getId());
  assertTrue(c1a.getName().equals("c1"));
  c1=(C1)s.load(C1.class,c1.getId(),LockMode.UPGRADE);
  assertTrue(c1.getAddress().equals("foo bar") && (c1.getCount() == 23432) && c1.getName().equals("c1")&& c1.getD().getAmount() > 213.3f);
  c1b=(B)s.load(B.class,c1.getId(),LockMode.UPGRADE);
  assertTrue((c1b.getCount() == 23432) && c1b.getName().equals("c1"));
  assertTrue(c1a.getName().equals("c1"));
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  c1a=(A)s.load(A.class,c1.getId());
  c1=(C1)s.load(C1.class,c1.getId());
  c1b=(B)s.load(B.class,c1.getId());
  assertTrue(c1a.getName().equals("c1"));
  assertTrue(c1.getAddress().equals("foo bar") && (c1.getCount() == 23432) && c1.getName().equals("c1")&& c1.getD().getAmount() > 213.3f);
  assertTrue((c1b.getCount() == 23432) && c1b.getName().equals("c1"));
  System.out.println(s.delete("from A"));
  t.commit();
  s.close();
  s=openSession();
  t=s.beginTransaction();
  s.save(new B());
  s.save(new A());
  assertTrue(s.find("from B").size() == 1);
  assertTrue(s.find("from A").size() == 2);
  s.delete("from A");
  t.commit();
  s.close();
}
