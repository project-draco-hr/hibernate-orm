{
  final String rhsTableAlias=aliasResolutionContext.resolveSqlTableAliasFromQuerySpaceUid(join.getRightHandSide().getUid());
  if (StringHelper.isEmpty(rhsTableAlias)) {
    throw new IllegalStateException("Join's RHS table alias cannot be empty");
  }
  final String lhsTableAlias=aliasResolutionContext.resolveSqlTableAliasFromQuerySpaceUid(join.getLeftHandSide().getUid());
  if (lhsTableAlias == null) {
    throw new IllegalStateException("QuerySpace with that UID was not yet registered in the AliasResolutionContext");
  }
  final String additionalJoinConditions=resolveAdditionalJoinCondition(rhsTableAlias,join.getAnyAdditionalJoinConditions(rhsTableAlias),joinable,getJoinedAssociationTypeOrNull(join));
  joinFragment.addJoin(joinable.getTableName(),rhsTableAlias,join.resolveAliasedLeftHandSideJoinConditionColumns(lhsTableAlias),join.resolveNonAliasedRightHandSideJoinConditionColumns(),join.isRightHandSideRequired() ? JoinType.INNER_JOIN : JoinType.LEFT_OUTER_JOIN,additionalJoinConditions);
  joinFragment.addJoins(joinable.fromJoinFragment(rhsTableAlias,false,true),joinable.whereJoinFragment(rhsTableAlias,false,true));
}
