{
  for (  Object entityElementO : currentMappingDocument.getMappingRoot().getClazzOrSubclassOrJoinedSubclass()) {
    final EntityElement entityElement=(EntityElement)entityElementO;
    if (JaxbHibernateMapping.JaxbClass.class.isInstance(entityElement)) {
      final JaxbHibernateMapping.JaxbClass jaxbClass=(JaxbHibernateMapping.JaxbClass)entityElement;
      final RootEntitySourceImpl rootEntitySource=new RootEntitySourceImpl(currentMappingDocument,jaxbClass);
      final EntityHierarchyImpl hierarchy=new EntityHierarchyImpl(rootEntitySource);
      entityHierarchies.add(hierarchy);
      subEntityContainerMap.put(rootEntitySource.getEntityName(),rootEntitySource);
      processSubElements(entityElement,rootEntitySource);
    }
 else {
      final SubclassEntitySourceImpl subClassEntitySource=new SubclassEntitySourceImpl(currentMappingDocument,entityElement);
      final String entityName=subClassEntitySource.getEntityName();
      subEntityContainerMap.put(entityName,subClassEntitySource);
      final String entityItExtends=currentMappingDocument.getMappingLocalBindingContext().qualifyClassName(((SubEntityElement)entityElement).getExtends());
      processSubElements(entityElement,subClassEntitySource);
      final SubclassEntityContainer container=subEntityContainerMap.get(entityItExtends);
      if (container != null) {
        container.add(subClassEntitySource);
      }
 else {
        extendsQueue.add(new ExtendsQueueEntry(subClassEntitySource,entityItExtends));
      }
    }
  }
}
