{
  if (!isSupportedByDialect(SpatialFunction.relate)) {
    return;
  }
  String matrix="T*T***T**";
  Map<Integer,Boolean> dbexpected=expectationsFactory.getRelate(expectationsFactory.getTestPolygon(),matrix);
  String hql="SELECT id, relate(geom, :filter, :matrix) from GeomEntity where relate(geom, :filter, :matrix) = true and srid(geom) = 4326";
  Map<String,Object> params=createQueryParams("filter",expectationsFactory.getTestPolygon());
  params.put("matrix",matrix);
  retrieveHQLResultsAndCompare(dbexpected,hql,params);
  matrix="FF*FF****";
  dbexpected=expectationsFactory.getRelate(expectationsFactory.getTestPolygon(),matrix);
  params.put("matrix",matrix);
  retrieveHQLResultsAndCompare(dbexpected,hql,params);
}
