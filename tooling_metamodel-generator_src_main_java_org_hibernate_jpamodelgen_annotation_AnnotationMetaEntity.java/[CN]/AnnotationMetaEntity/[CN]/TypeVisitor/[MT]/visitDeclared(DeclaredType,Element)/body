{
  if (isPersistent(element)) {
    TypeElement returnedElement=(TypeElement)context.getProcessingEnvironment().getTypeUtils().asElement(t);
    String fqElementName=returnedElement.getQualifiedName().toString();
    String collection=COLLECTIONS.get(fqElementName);
    final List<? extends AnnotationMirror> annotations=element.getAnnotationMirrors();
    String targetEntity=getTargetEntity(annotations);
    if (collection != null) {
      if (containsAnnotation(annotations,ElementCollection.class)) {
        TypeMirror collectionElementType=getCollectionElementType(t,fqElementName);
        final TypeElement collectionElement=(TypeElement)context.getProcessingEnvironment().getTypeUtils().asElement(collectionElementType);
        this.parent.context.processElement(collectionElement,this.parent.defaultAccessTypeForElement);
      }
      if (collection.equals("javax.persistence.metamodel.MapAttribute")) {
        return new AnnotationMetaMap(parent,element,collection,getKeyType(t),getElementType(t,targetEntity));
      }
 else {
        return new AnnotationMetaCollection(parent,element,collection,getElementType(t,targetEntity));
      }
    }
 else {
      if (element.getAnnotation(Embedded.class) != null || returnedElement.getAnnotation(Embeddable.class) != null) {
        this.parent.context.processElement(returnedElement,this.parent.defaultAccessTypeForElement);
      }
      return new AnnotationMetaSingleAttribute(parent,element,returnedElement.getQualifiedName().toString());
    }
  }
 else {
    return null;
  }
}
