{
  PersistenceException pe;
  if (e instanceof org.hibernate.OptimisticLockException) {
    org.hibernate.OptimisticLockException ole=(org.hibernate.OptimisticLockException)e;
    pe=new OptimisticLockException(ole.getMessage(),ole,ole.getEntity());
  }
 else   if (e instanceof org.hibernate.PessimisticLockException) {
    org.hibernate.PessimisticLockException ple=(org.hibernate.PessimisticLockException)e;
    if (lockOptions != null && lockOptions.getTimeOut() > -1) {
      pe=new LockTimeoutException(ple.getMessage(),ple,ple.getEntity());
    }
 else {
      pe=new PessimisticLockException(ple.getMessage(),ple,ple.getEntity());
    }
  }
 else {
    pe=new OptimisticLockException(e);
  }
  return pe;
}
