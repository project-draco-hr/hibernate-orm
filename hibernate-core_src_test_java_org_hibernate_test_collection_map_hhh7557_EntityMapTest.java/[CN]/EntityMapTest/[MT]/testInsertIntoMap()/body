{
{
    Session session=openSession();
    session.beginTransaction();
    MapHolder mapHolder=new MapHolder();
    mapHolder.setMap(new HashMap<MapKey,MapValue>());
    addMapEntry(session,mapHolder,"A","1");
    addMapEntry(session,mapHolder,"B","2");
    addMapEntry(session,mapHolder,"C","3");
    session.save(mapHolder);
    Assert.assertEquals(3,mapHolder.getMap().size());
    session.getTransaction().commit();
    session.close();
  }
{
    Session session=openSession();
    session.beginTransaction();
    MapHolder mapHolder=getMapHolder(session);
    System.out.println("Got MapHolder; checking map size -----");
    Assert.assertEquals(3,mapHolder.getMap().size());
    System.out.println("Got MapHolder; checked map size -----");
    addMapEntry(session,mapHolder,"D","4");
    Assert.assertEquals(4,mapHolder.getMap().size());
    session.getTransaction().commit();
    session.close();
  }
{
    Session session=openSession();
    session.beginTransaction();
    MapHolder mapHolder=getMapHolder(session);
    Assert.assertEquals(4,mapHolder.getMap().size());
    session.getTransaction().commit();
    session.close();
  }
}
