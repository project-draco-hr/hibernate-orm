{
  EntityManager em=getEntityManager();
  UnversionedStrTestEntity uste1=new UnversionedStrTestEntity("str1");
  UnversionedStrTestEntity uste2=new UnversionedStrTestEntity("str2");
  em.getTransaction().begin();
  em.persist(uste1);
  em.persist(uste2);
  em.getTransaction().commit();
  em.getTransaction().begin();
  uste1=em.find(UnversionedStrTestEntity.class,uste1.getId());
  uste2=em.find(UnversionedStrTestEntity.class,uste2.getId());
  TargetNotAuditedEntity tnae1=new TargetNotAuditedEntity(1,"tnae1",uste1);
  TargetNotAuditedEntity tnae2=new TargetNotAuditedEntity(2,"tnae2",uste2);
  em.persist(tnae1);
  em.persist(tnae2);
  em.getTransaction().commit();
  em.getTransaction().begin();
  tnae1=em.find(TargetNotAuditedEntity.class,tnae1.getId());
  tnae2=em.find(TargetNotAuditedEntity.class,tnae2.getId());
  tnae1.setReference(uste2);
  tnae2.setReference(uste1);
  em.getTransaction().commit();
  em.getTransaction().begin();
  tnae1=em.find(TargetNotAuditedEntity.class,tnae1.getId());
  tnae2=em.find(TargetNotAuditedEntity.class,tnae2.getId());
  tnae1.setReference(uste2);
  tnae2.setReference(uste2);
  em.getTransaction().commit();
  em.getTransaction().begin();
  tnae1=em.find(TargetNotAuditedEntity.class,tnae1.getId());
  tnae2=em.find(TargetNotAuditedEntity.class,tnae2.getId());
  tnae1.setReference(uste1);
  tnae2.setReference(uste1);
  em.getTransaction().commit();
  tnae1_id=tnae1.getId();
  tnae2_id=tnae2.getId();
  uste1_id=uste1.getId();
  uste2_id=uste2.getId();
}
