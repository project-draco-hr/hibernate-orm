{
  Properties properties=cfg.getProperties();
  YReflectionManager reflectionManager=YReflectionManager.get(cfg);
  RevisionInfoConfiguration revInfoCfg=new RevisionInfoConfiguration();
  RevisionInfoConfigurationResult revInfoCfgResult=revInfoCfg.configure(cfg,reflectionManager);
  verEntCfg=new AuditEntitiesConfiguration(properties,revInfoCfgResult.getRevisionInfoEntityName());
  globalCfg=new GlobalConfiguration(properties);
  versionsSyncManager=new AuditSyncManager(revInfoCfgResult.getRevisionInfoGenerator());
  revisionInfoQueryCreator=revInfoCfgResult.getRevisionInfoQueryCreator();
  revisionInfoNumberReader=revInfoCfgResult.getRevisionInfoNumberReader();
  entCfg=new EntitiesConfigurator().configure(cfg,reflectionManager,globalCfg,verEntCfg,revInfoCfgResult.getRevisionInfoXmlMapping(),revInfoCfgResult.getRevisionInfoRelationMapping());
}
