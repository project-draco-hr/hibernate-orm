{
  try {
    context=NamingHelper.getInitialContext(props);
  }
 catch (  NamingException ne) {
    log.error("Could not obtain initial context",ne);
    throw new HibernateException("Could not obtain initial context",ne);
  }
  utName=props.getProperty(Environment.USER_TRANSACTION);
  if (utName == null) {
    TransactionManagerLookup lookup=TransactionManagerLookupFactory.getTransactionManagerLookup(props);
    if (lookup != null)     utName=lookup.getUserTransactionName();
  }
  if (utName == null)   utName=DEFAULT_USER_TRANSACTION_NAME;
}
