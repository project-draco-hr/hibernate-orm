{
  if (trace) {
    log.trace("Started invalidating region " + cache.getName());
  }
  boolean ok=true;
  long now=System.currentTimeMillis();
synchronized (this) {
    regionInvalidationTimestamp=Long.MAX_VALUE;
    regionInvalidations++;
  }
  try {
    for (Iterator<PendingPutMap> it=pendingPuts.values().iterator(); it.hasNext(); ) {
      PendingPutMap entry=it.next();
      if (entry.acquireLock(60,TimeUnit.SECONDS)) {
        try {
          entry.invalidate(now,expirationPeriod);
        }
  finally {
          entry.releaseLock();
        }
      }
 else {
        ok=false;
      }
    }
  }
 catch (  Exception e) {
    ok=false;
  }
  return ok;
}
