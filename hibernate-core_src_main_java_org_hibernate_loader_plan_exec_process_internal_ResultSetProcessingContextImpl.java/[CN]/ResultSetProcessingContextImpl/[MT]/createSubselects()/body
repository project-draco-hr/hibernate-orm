{
  if (subselectLoadableEntityKeyMap == null || subselectLoadableEntityKeyMap.size() <= 1) {
    return;
  }
  final Map<String,int[]> namedParameterLocMap=ResultSetProcessorHelper.buildNamedParameterLocMap(queryParameters,namedParameterContext);
  final String subselectQueryString=SubselectFetch.createSubselectFetchQueryFragment(queryParameters);
  for (  Map.Entry<EntityPersister,Set<EntityKey>> entry : subselectLoadableEntityKeyMap.entrySet()) {
    if (!entry.getKey().hasSubselectLoadableCollections()) {
      continue;
    }
    SubselectFetch subselectFetch=new SubselectFetch(subselectQueryString,null,(Loadable)entry.getKey(),queryParameters,entry.getValue(),namedParameterLocMap);
    for (    EntityKey key : entry.getValue()) {
      session.getPersistenceContext().getBatchFetchQueue().addSubselect(key,subselectFetch);
    }
  }
}
