{
  final Type elementType=persister.getElementType();
  final String indexNode=getIndexAttributeName(persister);
  final HashMap snapshot=(HashMap)getSnapshot();
  final List elements=element.elements(persister.getElementNodeName());
  if (snapshot.size() != elements.size()) {
    return false;
  }
  for (int i=0; i < snapshot.size(); i++) {
    final Element elem=(Element)elements.get(i);
    final Object old=snapshot.get(getIndex(elem,indexNode,i));
    final Object current=elementType.fromXMLNode(elem,persister.getFactory());
    if (elementType.isDirty(old,current,getSession())) {
      return false;
    }
  }
  return true;
}
