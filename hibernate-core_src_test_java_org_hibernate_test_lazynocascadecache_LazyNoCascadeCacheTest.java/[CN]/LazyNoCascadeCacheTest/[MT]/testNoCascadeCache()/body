{
  Parent parent=new Parent();
  BaseChild firstChild=new BaseChild();
  parent.getChildren().add(firstChild);
  Child secondChild=new Child();
  secondChild.setName("SecondChildName");
  parent.getChildren().add(secondChild);
  firstChild.setDependency(secondChild);
  Session s=openSession();
  Transaction t=s.beginTransaction();
  s.merge(parent);
  t.commit();
  s.close();
}
