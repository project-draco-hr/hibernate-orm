{
  if (collection != null) {
    final SessionImplementor session=getSession();
    final PersistentCollection persistentCollection;
    if (type.isArrayType()) {
      persistentCollection=session.getPersistenceContext().getCollectionHolder(collection);
    }
 else {
      persistentCollection=(PersistentCollection)collection;
    }
    if (persistentCollection.isDirty()) {
      dirty=true;
      return null;
    }
  }
  return null;
}
