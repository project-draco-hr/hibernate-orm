{
  Configuration cfg=CacheTestUtil.buildConfiguration("test",InfinispanRegionFactory.class,true,false);
  InfinispanRegionFactory regionFactory=CacheTestUtil.startRegionFactory(getConnectionProvider(),cfg,getCacheTestSupport());
  TransactionalDataRegion region=(TransactionalDataRegion)createRegion(regionFactory,"test/test",cfg.getProperties(),getCacheDataDescription());
  assertTrue("Region is transaction-aware",region.isTransactionAware());
  CacheTestUtil.stopRegionFactory(regionFactory,getCacheTestSupport());
  cfg=CacheTestUtil.buildConfiguration("test",InfinispanRegionFactory.class,true,false);
  cfg.getProperties().remove(Environment.TRANSACTION_MANAGER_STRATEGY);
  regionFactory=CacheTestUtil.startRegionFactory(getConnectionProvider(),cfg,getCacheTestSupport());
  region=(TransactionalDataRegion)createRegion(regionFactory,"test/test",cfg.getProperties(),getCacheDataDescription());
  assertFalse("Region is not transaction-aware",region.isTransactionAware());
  CacheTestUtil.stopRegionFactory(regionFactory,getCacheTestSupport());
}
