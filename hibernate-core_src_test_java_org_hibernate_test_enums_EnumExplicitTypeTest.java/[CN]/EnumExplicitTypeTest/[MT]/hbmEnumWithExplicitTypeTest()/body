{
  Session s=openSession();
  s.getTransaction().begin();
  Person painted=Person.person(Gender.MALE,HairColor.BROWN);
  painted.setOriginalHairColor(HairColor.BLONDE);
  s.persist(painted);
  s.getTransaction().commit();
  s.clear();
  s.getTransaction().begin();
  Number id=(Number)session.createNativeQuery("select id from Person where originalHairColor = :color").setParameter("color",HairColor.BLONDE.name()).getSingleResult();
  assertEquals(1L,id.longValue());
  s.getTransaction().commit();
  s.close();
}
