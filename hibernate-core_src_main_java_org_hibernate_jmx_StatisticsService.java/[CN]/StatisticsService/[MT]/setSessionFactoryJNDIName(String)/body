{
  this.sfJNDIName=sfJNDIName;
  try {
    final SessionFactory sessionFactory;
    final Object jndiValue=new InitialContext().lookup(sfJNDIName);
    if (jndiValue instanceof Reference) {
      final String uuid=(String)((Reference)jndiValue).get(0).getContent();
      sessionFactory=SessionFactoryRegistry.INSTANCE.getSessionFactory(uuid);
    }
 else {
      sessionFactory=(SessionFactory)jndiValue;
    }
    setSessionFactory(sessionFactory);
  }
 catch (  NameNotFoundException e) {
    LOG.noSessionFactoryWithJndiName(sfJNDIName,e);
    setSessionFactory(null);
  }
catch (  NamingException e) {
    LOG.unableToAccessSessionFactory(sfJNDIName,e);
    setSessionFactory(null);
  }
catch (  ClassCastException e) {
    LOG.jndiNameDoesNotHandleSessionFactoryReference(sfJNDIName,e);
    setSessionFactory(null);
  }
}
