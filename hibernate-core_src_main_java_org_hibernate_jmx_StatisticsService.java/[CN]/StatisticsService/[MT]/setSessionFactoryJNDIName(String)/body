{
  this.sfJNDIName=sfJNDIName;
  try {
    Object obj=new InitialContext().lookup(sfJNDIName);
    if (obj instanceof Reference) {
      Reference ref=(Reference)obj;
      setSessionFactory((SessionFactory)SessionFactoryObjectFactory.getInstance((String)ref.get(0).getContent()));
    }
 else {
      setSessionFactory((SessionFactory)obj);
    }
  }
 catch (  NameNotFoundException e) {
    LOG.error(LOG.noSessionFactoryWithJndiName(sfJNDIName),e);
    setSessionFactory(null);
  }
catch (  NamingException e) {
    LOG.error(LOG.unableToAccessSessionFactory(sfJNDIName),e);
    setSessionFactory(null);
  }
catch (  ClassCastException e) {
    LOG.error(LOG.jndiNameDoesNotHandleSessionFactoryReference(sfJNDIName),e);
    setSessionFactory(null);
  }
}
