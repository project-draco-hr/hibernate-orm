{
  tm.begin();
  try {
    Query query=sessionFactory.getCurrentSession().createQuery("select account from Account as account where account.branch = :branch");
    query.setString("branch",branch);
    if (useRegion) {
      query.setCacheRegion("AccountRegion");
    }
    query.setCacheable(true);
    int result=query.list().size();
    tm.commit();
    return result;
  }
 catch (  Exception e) {
    log.error("rolling back",e);
    tm.rollback();
    throw e;
  }
}
