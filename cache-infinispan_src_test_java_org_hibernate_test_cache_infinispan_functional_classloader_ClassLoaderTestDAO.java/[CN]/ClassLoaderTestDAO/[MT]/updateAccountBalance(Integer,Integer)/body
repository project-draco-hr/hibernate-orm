{
  log.debug("Updating account " + id + " to balance "+ newBalance);
  tm.begin();
  try {
    Session session=sessionFactory.getCurrentSession();
    Object account=session.get(acctClass,id);
    setBalance.invoke(account,newBalance);
    session.update(account);
    tm.commit();
  }
 catch (  Exception e) {
    log.error("rolling back",e);
    tm.rollback();
    throw e;
  }
  log.debug("Updated account " + id + " to balance "+ newBalance);
}
