{
  if (!verCfg.getGlobalCfg().isGenerateRevisionsForCollections()) {
    return;
  }
  if (rd != null && rd.isBidirectional()) {
    String relatedEntityName=rd.getToEntityName();
    IdMapper relatedIdMapper=verCfg.getEntCfg().get(relatedEntityName).getIdMapper();
    for (    PersistentCollectionChangeData changeData : workUnit.getCollectionChanges()) {
      Object relatedObj=changeData.getChangedElement();
      Serializable relatedId=(Serializable)relatedIdMapper.mapToIdFromEntity(relatedObj);
      auditProcess.addWorkUnit(new CollectionChangeWorkUnit(event.getSession(),relatedEntityName,verCfg,relatedId,relatedObj));
    }
  }
}
