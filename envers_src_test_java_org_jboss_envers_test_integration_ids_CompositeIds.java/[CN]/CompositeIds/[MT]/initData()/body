{
  id1=new EmbId(1,2);
  id2=new EmbId(10,20);
  id3=new MulId(100,101);
  id4=new MulId(102,103);
  EntityManager em=getEntityManager();
  em.getTransaction().begin();
  em.persist(new EmbIdTestEntity(id1,"x"));
  em.persist(new MulIdTestEntity(id3.getId1(),id3.getId2(),"a"));
  em.getTransaction().commit();
  em=getEntityManager();
  em.getTransaction().begin();
  em.persist(new EmbIdTestEntity(id2,"y"));
  em.persist(new MulIdTestEntity(id4.getId1(),id4.getId2(),"b"));
  em.getTransaction().commit();
  em=getEntityManager();
  em.getTransaction().begin();
  EmbIdTestEntity ete1=em.find(EmbIdTestEntity.class,id1);
  EmbIdTestEntity ete2=em.find(EmbIdTestEntity.class,id2);
  MulIdTestEntity mte3=em.find(MulIdTestEntity.class,id3);
  MulIdTestEntity mte4=em.find(MulIdTestEntity.class,id4);
  ete1.setStr1("x2");
  ete2.setStr1("y2");
  mte3.setStr1("a2");
  mte4.setStr1("b2");
  em.getTransaction().commit();
  em=getEntityManager();
  em.getTransaction().begin();
  ete1=em.find(EmbIdTestEntity.class,id1);
  ete2=em.find(EmbIdTestEntity.class,id2);
  mte3=em.find(MulIdTestEntity.class,id3);
  em.remove(ete1);
  em.remove(mte3);
  ete2.setStr1("y3");
  em.getTransaction().commit();
  em=getEntityManager();
  em.getTransaction().begin();
  ete2=em.find(EmbIdTestEntity.class,id2);
  em.remove(ete2);
  em.getTransaction().commit();
}
