{
class WorkToDo implements Work {
    Serializable generatedValue;
    @Override public void execute(    Connection connection) throws SQLException {
      String sql=null;
      try {
        generatedValue=doWorkInCurrentTransaction(connection,sql);
      }
 catch (      SQLException e) {
        throw session.getFactory().getSQLExceptionHelper().convert(e,"could not get or update next value",sql);
      }
    }
  }
  WorkToDo work=new WorkToDo();
  session.getTransactionCoordinator().getTransaction().createIsolationDelegate().delegateWork(work,true);
  return work.generatedValue;
}
