{
  buildConfiguration();
  ClassMetadata meta=sessionFactory().getClassMetadata(clazz);
  assertTrue("Entity is annotated with @Timestamp and should hence be versioned",meta.isVersioned());
  PersistentClass persistentClass=configuration().getClassMapping(clazz.getName());
  assertNotNull(persistentClass);
  Property versionProperty=persistentClass.getVersion();
  assertNotNull(versionProperty);
  assertEquals("Wrong timestamp type",expectedTypeClass,versionProperty.getType().getClass());
}
