{
  final Status status=event.getEntityEntry().getStatus();
  if (mightBeDirty || status == Status.DELETED) {
    dirtyCheck(event);
    if (isUpdateNecessary(event)) {
      return true;
    }
 else {
      InstrumentationService instrumentationService=event.getSession().getFactory().getServiceRegistry().getService(InstrumentationService.class);
      if (instrumentationService.isInstrumented(event.getEntity())) {
        FieldInterceptionHelper.clearDirty(event.getEntity());
      }
      return false;
    }
  }
 else {
    return hasDirtyCollections(event,event.getEntityEntry().getPersister(),status);
  }
}
