{
  final boolean isMultiTable=Queryable.class.cast(persister).isMultiTable();
  final boolean required=canJoinsBeRequired() && !isMultiTable && !optional;
  final ExpandingEntityQuerySpace rhs=getExpandingQuerySpaces().makeEntityQuerySpace(querySpaceUid,persister,required);
  if (shouldIncludeJoin) {
    final JoinDefinedByMetadata join=JoinHelper.INSTANCE.createEntityJoin(this,attribute.getName(),rhs,required,(EntityType)attribute.getType(),sessionFactory());
    internalGetJoins().add(join);
  }
  return rhs;
}
