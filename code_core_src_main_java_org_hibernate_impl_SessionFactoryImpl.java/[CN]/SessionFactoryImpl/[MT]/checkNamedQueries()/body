{
  Map errors=new HashMap();
  log.debug("Checking " + namedQueries.size() + " named HQL queries");
  Iterator itr=namedQueries.entrySet().iterator();
  while (itr.hasNext()) {
    final Map.Entry entry=(Map.Entry)itr.next();
    final String queryName=(String)entry.getKey();
    final NamedQueryDefinition qd=(NamedQueryDefinition)entry.getValue();
    try {
      log.debug("Checking named query: " + queryName);
      queryPlanCache.getHQLQueryPlan(qd.getQueryString(),false,CollectionHelper.EMPTY_MAP);
    }
 catch (    QueryException e) {
      errors.put(queryName,e);
    }
catch (    MappingException e) {
      errors.put(queryName,e);
    }
  }
  log.debug("Checking " + namedSqlQueries.size() + " named SQL queries");
  itr=namedSqlQueries.entrySet().iterator();
  while (itr.hasNext()) {
    final Map.Entry entry=(Map.Entry)itr.next();
    final String queryName=(String)entry.getKey();
    final NamedSQLQueryDefinition qd=(NamedSQLQueryDefinition)entry.getValue();
    try {
      log.debug("Checking named SQL query: " + queryName);
      NativeSQLQuerySpecification spec;
      if (qd.getResultSetRef() != null) {
        ResultSetMappingDefinition definition=(ResultSetMappingDefinition)sqlResultSetMappings.get(qd.getResultSetRef());
        if (definition == null) {
          throw new MappingException("Unable to find resultset-ref definition: " + qd.getResultSetRef());
        }
        spec=new NativeSQLQuerySpecification(qd.getQueryString(),definition.getQueryReturns(),qd.getQuerySpaces());
      }
 else {
        spec=new NativeSQLQuerySpecification(qd.getQueryString(),qd.getQueryReturns(),qd.getQuerySpaces());
      }
      queryPlanCache.getNativeSQLQueryPlan(spec);
    }
 catch (    QueryException e) {
      errors.put(queryName,e);
    }
catch (    MappingException e) {
      errors.put(queryName,e);
    }
  }
  return errors;
}
