{
  if (EntityReference.class.isInstance(owner)) {
    return (EntityReference)owner;
  }
  if (CompositeFetch.class.isInstance(owner)) {
    return resolveEntityReference(((CompositeFetch)owner).getOwner());
  }
  throw new UnsupportedOperationException("Unexpected FetchOwner type [" + owner + "] encountered trying to build circular fetch");
}
