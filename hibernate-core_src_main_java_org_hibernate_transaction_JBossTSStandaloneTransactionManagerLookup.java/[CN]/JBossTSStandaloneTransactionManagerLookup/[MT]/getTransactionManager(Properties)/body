{
  try {
    Class<?> propertyManager=Class.forName("com.arjuna.ats.jta.common.jtaPropertyManager");
    final Method getJTAEnvironmentBean=propertyManager.getMethod("getJTAEnvironmentBean");
    final Object jtaEnvironmentBean=getJTAEnvironmentBean.invoke(null);
    final Method getTransactionManager=jtaEnvironmentBean.getClass().getMethod("getTransactionManager");
    return (TransactionManager)getTransactionManager.invoke(jtaEnvironmentBean);
  }
 catch (  Exception e) {
    throw new HibernateException("Could not obtain JBoss Transactions transaction manager instance",e);
  }
}
