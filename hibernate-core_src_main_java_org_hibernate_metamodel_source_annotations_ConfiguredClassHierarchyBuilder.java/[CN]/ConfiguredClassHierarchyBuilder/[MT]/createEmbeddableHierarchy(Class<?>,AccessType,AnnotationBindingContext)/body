{
  ClassInfo embeddableClassInfo=context.getClassInfo(embeddableClass.getName());
  if (embeddableClassInfo == null) {
    throw new AssertionFailure(String.format("The specified class %s cannot be found in the annotation index",embeddableClass.getName()));
  }
  if (JandexHelper.getSingleAnnotation(embeddableClassInfo,JPADotNames.EMBEDDABLE) == null) {
    throw new AssertionFailure(String.format("The specified class %s is not annotated with @Embeddable",embeddableClass.getName()));
  }
  List<ClassInfo> classInfoList=new ArrayList<ClassInfo>();
  ClassInfo tmpClassInfo;
  Class<?> clazz=embeddableClass;
  while (clazz != null && !clazz.equals(Object.class)) {
    tmpClassInfo=context.getIndex().getClassByName(DotName.createSimple(clazz.getName()));
    clazz=clazz.getSuperclass();
    if (tmpClassInfo == null) {
      continue;
    }
    classInfoList.add(0,tmpClassInfo);
  }
  return EmbeddableHierarchy.createEmbeddableClassHierarchy(classInfoList,accessType,context);
}
