{
  try {
    final CommandLineArgs parsedArgs=CommandLineArgs.parseCommandLineArgs(args);
    final StandardServiceRegistry serviceRegistry=buildStandardServiceRegistry(parsedArgs);
    try {
      final MetadataImplementor metadata=buildMetadata(parsedArgs,serviceRegistry);
      final SchemaUpdate schemaUpdate=new SchemaUpdate(metadata);
      schemaUpdate.setOutputFile(parsedArgs.outFile);
      schemaUpdate.setDelimiter(parsedArgs.delimiter);
      schemaUpdate.execute(parsedArgs.script,parsedArgs.doUpdate);
    }
  finally {
      StandardServiceRegistryBuilder.destroy(serviceRegistry);
    }
  }
 catch (  Exception e) {
    LOG.unableToRunSchemaUpdate(e);
    e.printStackTrace();
  }
}
