{
  final Object[] copiedValues;
  if (foreignKeyDirection == ForeignKeyDirection.TO_PARENT) {
    copiedValues=TypeHelper.replaceAssociations(persister.getPropertyValues(entity),persister.getPropertyValues(target),persister.getPropertyTypes(),source,target,copyCache,foreignKeyDirection);
  }
 else {
    copiedValues=TypeHelper.replace(persister.getPropertyValues(entity),persister.getPropertyValues(target),persister.getPropertyNames(),persister.getPropertyTypes(),source,target,copyCache,foreignKeyDirection);
  }
  persister.setPropertyValues(target,copiedValues);
}
