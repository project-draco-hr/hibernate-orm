{
  final EntityCopyObserver entityCopyObserver=createDetachedEntityCopyObserver();
  final MergeContext mergeContext=new MergeContext(event.getSession(),entityCopyObserver);
  try {
    onMerge(event,mergeContext);
    entityCopyObserver.topLevelMergeComplete(event.getSession());
  }
  finally {
    entityCopyObserver.clear();
    mergeContext.clear();
  }
}
