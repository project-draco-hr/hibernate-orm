{
  if (value == null) {
    return null;
  }
  try {
    if (CharacterStream.class.isAssignableFrom(type)) {
      if (NClobImplementer.class.isInstance(value)) {
        return (X)((NClobImplementer)value).getUnderlyingStream();
      }
 else {
        return (X)new CharacterStreamImpl(DataHelper.extractString(value.getCharacterStream()));
      }
    }
 else     if (NClob.class.isAssignableFrom(type)) {
      final NClob nclob=WrappedNClob.class.isInstance(value) ? ((WrappedNClob)value).getWrappedNClob() : value;
      return (X)nclob;
    }
  }
 catch (  SQLException e) {
    throw new HibernateException("Unable to access nclob stream",e);
  }
  throw unknownUnwrap(type);
}
