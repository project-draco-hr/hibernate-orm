{
  cleanupTest();
  if (session != null && !((SessionImplementor)session).isClosed()) {
    if (session.isConnected()) {
      session.doWork(new RollbackWork());
    }
    session.close();
    session=null;
    LOG.debug("unclosed session");
  }
 else {
    session=null;
  }
  assertAllDataRemoved();
}
