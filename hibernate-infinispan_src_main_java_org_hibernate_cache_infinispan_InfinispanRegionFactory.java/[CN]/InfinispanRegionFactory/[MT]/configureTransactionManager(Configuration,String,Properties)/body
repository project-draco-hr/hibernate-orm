{
  Configuration templateConfig=manager.defineConfiguration(templateCacheName,new Configuration());
  if (templateConfig.isTransactionalCache()) {
    String ispnTmLookupClassName=templateConfig.getTransactionManagerLookupClass();
    String hbTmLookupClassName=org.hibernate.cache.infinispan.tm.HibernateTransactionManagerLookup.class.getName();
    if (ispnTmLookupClassName != null && !ispnTmLookupClassName.equals(hbTmLookupClassName)) {
      log.debug("Infinispan is configured [" + ispnTmLookupClassName + "] with a different transaction manager lookup "+ "class than Hibernate ["+ hbTmLookupClassName+ "]");
    }
 else {
      regionOverrides.setTransactionManagerLookup(transactionManagerlookup);
    }
    String useSyncProp=extractProperty(INFINISPAN_USE_SYNCHRONIZATION_PROP,properties);
    boolean useSync=useSyncProp == null ? DEF_USE_SYNCHRONIZATION : Boolean.parseBoolean(useSyncProp);
    regionOverrides.fluent().transaction().useSynchronization(useSync);
  }
  return regionOverrides;
}
