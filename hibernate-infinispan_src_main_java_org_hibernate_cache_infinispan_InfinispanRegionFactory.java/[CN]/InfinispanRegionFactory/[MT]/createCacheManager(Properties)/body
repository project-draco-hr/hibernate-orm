{
  try {
    final String configLoc=ConfigurationHelper.getString(INFINISPAN_CONFIG_RESOURCE_PROP,properties,DEF_INFINISPAN_CONFIG_RESOURCE);
    ClassLoader classLoader=ClassLoaderHelper.getContextClassLoader();
    InputStream is;
    try {
      is=FileLookupFactory.newInstance().lookupFileStrict(configLoc,classLoader);
    }
 catch (    FileNotFoundException e) {
      classLoader=this.getClass().getClassLoader();
      is=FileLookupFactory.newInstance().lookupFileStrict(configLoc,classLoader);
    }
    final ParserRegistry parserRegistry=new ParserRegistry(classLoader);
    final ConfigurationBuilderHolder holder=parserRegistry.parse(is);
    final String globalStats=extractProperty(INFINISPAN_GLOBAL_STATISTICS_PROP,properties);
    if (globalStats != null) {
      holder.getGlobalConfigurationBuilder().globalJmxStatistics().enabled(Boolean.parseBoolean(globalStats));
    }
    return createCacheManager(holder);
  }
 catch (  IOException e) {
    throw new CacheException("Unable to create default cache manager",e);
  }
}
